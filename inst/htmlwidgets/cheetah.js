/*! For license information please see cheetah.js.LICENSE.txt */
(()=>{var e={190:(e,t,n)=>{var o,r,i;e=n.nmd(e),function(){"use strict";function l(e,t,n,o){return l="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var r,i=c(e,t);if(i){if((r=Object.getOwnPropertyDescriptor(i,t)).set)return r.set.call(o,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(o,t)){if(!r.writable)return!1;r.value=n,Object.defineProperty(o,t,r)}else s(o,t,n);return!0},l(e,t,n,o)}function a(e,t,n,o,r){if(!l(e,t,n,o||e)&&r)throw new Error("failed to set property");return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=c(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},u(e,t,n||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o,r,i=g(e);if(t){var l=g(this).constructor;n=Reflect.construct(i,arguments,l)}else n=i.apply(this,arguments);return o=this,!(r=n)||"object"!==b(r)&&"function"!=typeof r?v(o):r}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function _(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}(function(n){var l;l=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===b(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./main.js")}({"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}",""]),t.default=r},"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,'.cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}',""]),t.default=r},"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,'.cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:"";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}',""]),t.default=r},"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}",""]),t.default=r},"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}",""]),t.default=r},"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}",""]),t.default=r},"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}",""]),t.default=r},"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css":function(e,t,n){n.r(t);var o=n("../node_modules/css-loader/dist/runtime/api.js"),r=n.n(o)()(!1);r.push([e.i,"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}",""]),t.default=r},"../node_modules/css-loader/dist/runtime/api.js":function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,r,i=e[1]||"",l=e[3];if(!l)return i;if(t&&"function"==typeof btoa){var a=(n=l,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),s=l.sources.map((function(e){return"/*# sourceURL=".concat(l.sourceRoot||"").concat(e," */")}));return[i].concat(s).concat([a]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(r[l]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);o&&r[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":function(e,t,o){var r,i=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(n.HTMLIFrameElement&&o instanceof n.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),l=[];function a(e){for(var t=-1,n=0;n<l.length;n++)if(l[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},o=[],r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],u=n[s]||0,c="".concat(s," ").concat(u);n[s]=u+1;var d=a(c),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(l[d].references++,l[d].updater(f)):l.push({identifier:c,updater:y(f,t),references:1}),o.push(c)}return o}function u(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=o.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var l=i(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var i=document.createTextNode(r),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(i,l[t]):e.appendChild(i)}}function h(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var v=null,g=0;function y(e,t){var n,o,r;if(t.singleton){var i=g++;n=v||(v=u(t)),o=f.bind(null,n,i,!1),r=f.bind(null,n,i,!0)}else n=u(t),o=h.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(n&&document&&document.all&&!n.atob)),r));var o=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<o.length;n++){var r=a(o[n]);l[r].references--}for(var i=s(e,t),u=0;u<o.length;u++){var c=a(o[u]);0===l[c].references&&(l[c].updater(),l.splice(c,1))}o=i}}}},"../node_modules/webpack/buildin/global.js":function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"===b(n)&&(o=n)}e.exports=o},"../src/js/columns/action/internal/InlineInputElement.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"../src/js/columns/action/internal/InlineMenuElement.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"../src/js/columns/action/internal/SmallDialogInputElement.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"../src/js/columns/message/internal/ErrorMessageElement.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"../src/js/columns/message/internal/MessageElement.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"../src/js/columns/message/internal/WarningMessageElement.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"../src/js/internal/style.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"../src/js/tooltip/internal/TooltipElement.css":function(e,t,n){var o=n("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n("../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},"./GridCanvasHelper.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GridCanvasHelper=void 0;var l=i(n("./internal/calc.js")),a=i(n("./tools/canvashelper.js")),s=i(n("./internal/fonts.js")),u=i(n("./element/inlines.js")),c=i(n("./themes.js")),d=n("./internal/canvases.js"),f=n("./internal/utils.js"),h=n("./element/InlineDrawer.js"),v=n("./internal/Rect.js"),g=n("./internal/color.js"),p=f.style.toBoxArray,C=u.of("…");function b(e,t,n,o,r){return(0,f.getOrApply)(e,{col:t,row:n,grid:o,context:r})}function w(e,t,n,o,r){if(null!=e)return(0,f.getOrApply)(e,{col:t,row:n,grid:o,context:r})}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r,i=f.getChainSafe.apply(void 0,[e.theme].concat(n));return null==i?f.getChainSafe.apply(void 0,[c.getDefault()].concat(n)):"function"!=typeof i?i:function(e){var t=i(e);return null!=t?t:(r=r||f.getChainSafe.apply(void 0,[c.getDefault()].concat(n)),(0,f.getOrApply)(r,e))}}function E(e,t,n,o,r,i,l,s,u){function c(t,c,d){if(t.canDraw()){e.save();try{e.fillStyle=b(t.color()||e.fillStyle,l,s,u,e),e.font=t.font()||e.font,t.draw({ctx:e,canvashelper:a,rect:n,offset:o,offsetLeft:c,offsetRight:d,offsetTop:r,offsetBottom:i})}finally{e.restore()}}else t.onReady((function(){return u.invalidateCell(l,s)}))}if(1===t.length)c(t[0],0,0);else{var d=t.map((function(t){return(t.width({ctx:e})||0)-0})),f=d.reduce((function(e,t){return e+t})),h=0;t.forEach((function(e,t){var n=d[t];c(e,h,f-=n),h+=n}))}}function j(e,t){return u.buildInlines(e,t||"")}function x(e){return u.string(e)}function S(e){return O(e)&&"ellipsis"!==e&&1===(e=e.trim()).length?u.of(e[0]):C}function O(e){return Boolean(e&&"clip"!==e&&"string"==typeof e)}function T(e,t,n){for(var o=n-3,r=0,i=0;i<t.length;i++){var l=(t[i].width({ctx:e})||0)-0;if(r+l>o)return{index:i,lineWidth:r,remWidth:o-r};r+=l}return null}function I(e,t,n){var o=T(e,t,n);if(!o)return{beforeInlines:t,overflow:!1,afterInlines:[]};var r=o.index,i=o.remWidth,l=t[r],a=t.slice(0,r),s=[];if(l.canBreak()){var u=l.breakWord(e,i),c=u.before,d=u.after;if(!c&&!a.length){var f=l.breakAll(e,i);c=f.before,d=f.after}if(!c&&!a.length){var h=l.splitIndex(1);c=h.before,d=h.after}c&&a.push(c),d&&s.push(d),s.push.apply(s,_(t.slice(r+1)))}else a.length||a.push(l),s.push.apply(s,_(t.slice(a.length)));return{beforeInlines:a,overflow:!0,afterInlines:s}}function M(e,t,n,o){var r=T(e,t,n);if(!r)return{inlines:t,overflow:!1};var i=r.index,l=r.lineWidth,a=t[i],s=S(o),u=n-l-s.width({ctx:e}),c=t.slice(0,i);if(a.canBreak()){var d=a.breakAll(e,u).before;d&&c.push(d)}return c.push(s),{inlines:c,overflow:!0}}function R(e,t,n,o,r,i,l){var a=l.offset,s=l.color,c=l.textAlign,d=l.textBaseline,f=l.font,h=l.textOverflow,g=l.icons,y=l.trailingIcon;t.fillStyle=b(s||t.fillStyle,r,i,e,t),t.textAlign=c,t.textBaseline=d,t.font=f||t.font;var p=j(g,n),m=y?u.iconOf(y):null,_=o,C=o.width,w=0;if(m&&(C-=w=m.width({ctx:t}),_=new v.Rect(o.left,o.top,C,o.height)),O(h)&&function(e,t,n){return!!T(e,t,n)}(t,p,C)){var k=M(t,p,C,h),S=k.inlines,I=k.overflow;p=S,e.setCellOverflowText(r,i,I&&x(n))}else e.setCellOverflowText(r,i,!1);if(E(t,p,_,a,0,0,r,i,e),m){var R=0;p.forEach((function(e){R+=e.width({ctx:t})}));var B=new v.Rect(o.left,o.top,o.width,o.height),P=B.copy();C<R?P.left=P.right-w-a:P.left+=R,P.right=B.right,E(t,[m],P,a,0,0,r,i,e)}}function B(e,t,n){var o=(0,g.colorToRGB)(e),r=(0,g.colorToRGB)(t),i=function(e){var t=o[e],i=r[e];if(n>=1)return i;if(n<=0)return t;var l=t-i;return Math.ceil(t-l*n)};return"rgb(".concat(i("r"),", ").concat(i("g"),", ").concat(i("b"),")")}function P(e,t,n,o,r,i,l){var s=l.animElapsedTime,u=void 0===s?1:s,c=l.uncheckBgColor,f=void 0===c?i.theme.checkbox.uncheckBgColor:c,h=l.checkBgColor,v=void 0===h?i.theme.checkbox.checkBgColor:h,g=l.borderColor,y=void 0===g?i.theme.checkbox.borderColor:g,p=l.textAlign,m=void 0===p?"center":p,_=l.textBaseline,C=void 0===_?"middle":_,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},w=a.measureCheckbox(e).width;e.textAlign=m,e.textBaseline=C;var k=(0,d.calcStartPosition)(e,t,w+1,w+1,b);f=i.getColor(f,n,o,e),v=i.getColor(v,n,o,e),y=i.getColor(y,n,o,e),0<u&&u<1&&(f=r?f:B(v,f,u),v=r?B(f,v,u):v),a.drawCheckbox(e,k.x,k.y,!!r&&u,{uncheckBgColor:f,checkBgColor:v,borderColor:y})}var L=function(){function e(t){y(this,e),this._checkbox=null,this._radioButton=null,this._button=null,this._tree=null,this._header=null,this._messages=null,this._indicators=null,this._grid=t}return m(e,[{key:"getThemeValue",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.apply(void 0,[this._grid].concat(t))}},{key:"font",get:function(){return k(this._grid,"font")}},{key:"underlayBackgroundColor",get:function(){return k(this._grid,"underlayBackgroundColor")}},{key:"color",get:function(){return k(this._grid,"color")}},{key:"frozenRowsColor",get:function(){return k(this._grid,"frozenRowsColor")}},{key:"defaultBgColor",get:function(){return k(this._grid,"defaultBgColor")}},{key:"frozenRowsBgColor",get:function(){return k(this._grid,"frozenRowsBgColor")}},{key:"selectionBgColor",get:function(){return k(this._grid,"selectionBgColor")}},{key:"highlightBgColor",get:function(){return k(this._grid,"highlightBgColor")}},{key:"borderColor",get:function(){return k(this._grid,"borderColor")}},{key:"frozenRowsBorderColor",get:function(){return k(this._grid,"frozenRowsBorderColor")}},{key:"highlightBorderColor",get:function(){return k(this._grid,"highlightBorderColor")}},{key:"checkbox",get:function(){var e=this._grid;return this._checkbox||(this._checkbox={get uncheckBgColor(){return t("uncheckBgColor")},get checkBgColor(){return t("checkBgColor")},get borderColor(){return t("borderColor")}});function t(t){return k(e,"checkbox",t)}}},{key:"radioButton",get:function(){var e=this._grid;return this._radioButton||(this._radioButton={get checkColor(){return t("checkColor")},get uncheckBorderColor(){return t("uncheckBorderColor")},get checkBorderColor(){return t("checkBorderColor")},get uncheckBgColor(){return t("uncheckBgColor")},get checkBgColor(){return t("checkBgColor")}});function t(t){return k(e,"radioButton",t)}}},{key:"button",get:function(){var e=this._grid;return this._button||(this._button={get color(){return t("color")},get bgColor(){return t("bgColor")}});function t(t){return k(e,"button",t)}}},{key:"tree",get:function(){var e=this._grid;return this._tree||(this._tree={get lineStyle(){return t("lineStyle")},get lineColor(){return t("lineColor")},get lineWidth(){return t("lineWidth")},get treeIcon(){return t("treeIcon")}});function t(t){return k(e,"tree",t)}}},{key:"header",get:function(){var e=this._grid;return this._header||(this._header={get sortArrowColor(){return k(e,"header","sortArrowColor")}})}},{key:"messages",get:function(){var e=this._grid;return this._messages||(this._messages={get infoBgColor(){return t("infoBgColor")},get errorBgColor(){return t("errorBgColor")},get warnBgColor(){return t("warnBgColor")},get boxWidth(){return t("boxWidth")},get markHeight(){return t("markHeight")}});function t(t){return k(e,"messages",t)}}},{key:"indicators",get:function(){var e=this._grid;return this._indicators||(this._indicators={get topLeftColor(){return t("topLeftColor")},get topLeftSize(){return t("topLeftSize")},get topRightColor(){return t("topRightColor")},get topRightSize(){return t("topRightSize")},get bottomRightColor(){return t("bottomRightColor")},get bottomRightSize(){return t("bottomRightSize")},get bottomLeftColor(){return t("bottomLeftColor")},get bottomLeftSize(){return t("bottomLeftSize")}});function t(t){return k(e,"indicators",t)}}}]),e}();function D(e,t,n,o,r,i){if(Array.isArray(t)){var l=p(t);a.strokeColorsRect(e,l,n,o,r,i)}else t&&(e.strokeStyle=t,e.strokeRect(n,o,r,i))}function A(e,t,n,o,r){if(!t)return e;var i=o.toBoxPixelArray(t,r,n),l=i[0],a=i[1],s=i[2],u=i[3],c=e.left+u,d=e.top+l,f=e.width-a-u,h=e.height-l-s;return new v.Rect(c,d,f,h)}var F=function(){function e(t){y(this,e),this._grid=t,this._theme=new L(t)}return m(e,[{key:"createCalculator",value:function(e,t){return{calcWidth:function(n){return l.toPx(n,{get full(){return e.getRect().width},get em(){return(0,d.getFontSize)(e.getContext(),t).width}})},calcHeight:function(n){return l.toPx(n,{get full(){return e.getRect().height},get em(){return(0,d.getFontSize)(e.getContext(),t).height}})}}}},{key:"getColor",value:function(e,t,n,o){return b(e,t,n,this._grid,o)}},{key:"getStyleProperty",value:function(e,t,n,o){return b(e,t,n,this._grid,o)}},{key:"toBoxArray",value:function(e){return p(e)}},{key:"toBoxPixelArray",value:function(e,t,n){if("string"==typeof e||Array.isArray(e)){var o=this.createCalculator(t,n),r=p(e);return[o.calcHeight(r[0]),o.calcWidth(r[1]),o.calcHeight(r[2]),o.calcWidth(r[3])]}return p(e)}},{key:"theme",get:function(){return this._theme}},{key:"drawWithClip",value:function(e,t){var n=e.getDrawRect();if(n){var o=e.getContext();o.save();try{o.beginPath(),o.rect(n.left,n.top,n.width,n.height),o.clip(),t(o)}finally{o.restore()}}}},{key:"drawBorderWithClip",value:function(e,t){var n=e.getDrawRect();if(n){var o=e.getRect(),r=e.getContext();r.save();try{r.beginPath();var i=n.left,l=n.width;n.left===o.left&&(i+=-1,l+=1);var a=n.top,s=n.height;n.top===o.top&&(a+=-1,s+=1),r.rect(i,a,l,s),r.clip(),t(r)}finally{r.restore()}}}},{key:"text",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.padding,i=o.offset,l=void 0===i?2:i,a=o.color,s=o.textAlign,u=void 0===s?"left":s,c=o.textBaseline,d=void 0===c?"middle":c,f=o.font,h=o.textOverflow,v=void 0===h?"clip":h,g=o.icons,y=o.trailingIcon,p=t.col,m=t.row;if(!a){a=this.theme.color;var _=this._grid.isFrozenCell(p,m);_&&_.row&&(a=this.theme.frozenRowsColor)}this.drawWithClip(t,(function(o){f=w(f,t.col,t.row,n._grid,o);var i=A(t.getRect(),r,f,n,t);R(n._grid,o,e,i,p,m,{offset:l,color:a,textAlign:u,textBaseline:d,font:f,textOverflow:v,icons:g,trailingIcon:y})}))}},{key:"multilineText",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.padding,i=o.offset,l=void 0===i?2:i,a=o.color,s=o.textAlign,c=void 0===s?"left":s,f=o.textBaseline,h=void 0===f?"middle":f,g=o.font,y=o.lineHeight,p=void 0===y?"1em":y,m=o.autoWrapText,_=void 0!==m&&m,C=o.lineClamp,k=void 0===C?0:C,T=o.textOverflow,R=void 0===T?"clip":T,B=o.icons,P=o.trailingIcon,L=t.col,D=t.row;if(!a){a=this.theme.color;var F=this._grid.isFrozenCell(L,D);F&&F.row&&(a=this.theme.frozenRowsColor)}this.drawWithClip(t,(function(o){g=w(g,t.col,t.row,n._grid,o);var i=A(t.getRect(),r,g,n,t),s=n.createCalculator(t,g);p=s.calcHeight(p),function(e,t,n,o,r,i,l){var a=l.offset,s=l.color,c=l.textAlign,f=l.textBaseline,h=l.font,g=l.lineHeight,y=l.autoWrapText,p=l.lineClamp,m=l.textOverflow,_=l.icons,C=l.trailingIcon;if(t.fillStyle=b(s||t.fillStyle,r,i,e,t),t.textAlign=c,t.textBaseline=f,t.font=h||t.font,"auto"===p){var w=o.height-2*a-2;p=Math.max(Math.floor(w/g),1)}var k,T=C?u.iconOf(C):null,R=o.width,B=0;if(T&&(B=T.width({ctx:t}),R-=B),y||p>0||O(m)){k=[];var P=p>0?function(o,l){if(k.length+1>=p){if(0===o.length&&l)k.push([S(m)]),e.setCellOverflowText(r,i,n.map(x).join("\n"));else{var a=M(t,o,R,m),s=a.inlines,u=a.overflow;k.push(l&&!u?s.concat([S(m)]):s),(u||l)&&e.setCellOverflowText(r,i,n.map(x).join("\n"))}return!1}return!0}:function(){return!0},L=y?function(e,n){if(!P(e,n))return!1;for(;e.length;){if(!P(e,n))return!1;var o=I(t,e,R),r=o.beforeInlines,i=o.afterInlines;k.push(r),e=i}return!0}:O(m)?function(o,l){if(!P(o,l))return!1;var a=M(t,o,R,m),s=a.inlines,u=a.overflow;return k.push(s),u&&e.setCellOverflowText(r,i,n.map(x).join("\n")),!0}:function(e,t){return!!P(e,t)&&(k.push(e),!0)};e.setCellOverflowText(r,i,!1);for(var D=0;D<n.length;D++){var A=n[D];if(!L(j(0===D?_:void 0,A),D+1<n.length))break}}else e.setCellOverflowText(r,i,!1),k=n.map((function(e,t){return j(0===t?_:void 0,e)}));var F=0,H=g*(k.length-1);if("top"===t.textBaseline||"hanging"===t.textBaseline){var N=(0,d.getFontSize)(t,t.font).height,V=(g-N)/2;F+=V,H-=V}else if("bottom"===t.textBaseline||"alphabetic"===t.textBaseline||"ideographic"===t.textBaseline){var W=(0,d.getFontSize)(t,t.font).height,z=(g-W)/2;F-=z,H+=z}if(k.forEach((function(n){E(t,n,o,a,F,H,r,i,e),F+=g,H-=g})),T){var G=0;k.forEach((function(e){var n=0;e.forEach((function(e){n+=e.width({ctx:t})})),G=Math.max(G,n)}));var U=new v.Rect(o.left,o.top,o.width,o.height),Y=U.copy();R<G?Y.left=Y.right-B-a:Y.left+=G,Y.right=U.right,E(t,[T],Y,a,0,0,r,i,e)}}(n._grid,o,e,i,L,D,{offset:l,color:a,textAlign:c,textBaseline:h,font:g,lineHeight:p,autoWrapText:_,lineClamp:k,textOverflow:R,icons:B,trailingIcon:P})}))}},{key:"fillText",value:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=r.color,l=r.textAlign,a=void 0===l?"left":l,s=r.textBaseline,u=void 0===s?"top":s,c=r.font,d=o.col,f=o.row;if(!i){i=this.theme.color;var h=this._grid.isFrozenCell(d,f);h&&h.row&&(i=this.theme.frozenRowsColor)}var v=o.getContext();v.save();try{c=w(c,o.col,o.row,this._grid,v),v.fillStyle=b(i,d,f,this._grid,v),v.textAlign=a,v.textBaseline=u,v.font=c||v.font,v.fillText(e,t,n)}finally{v.restore()}}},{key:"fillCell",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fillColor,o=void 0===n?this.theme.defaultBgColor:n,r=e.getRect();this.drawWithClip(e,(function(n){var i=e.col,l=e.row;n.fillStyle=b(o,i,l,t._grid,n),n.beginPath(),n.rect(r.left,r.top,r.width,r.height),n.fill()}))}},{key:"fillCellWithState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.fillColor=this.getFillColorState(e,t),this.fillCell(e,t)}},{key:"fillRect",value:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fillColor,o=void 0===n?this.theme.defaultBgColor:n,r=t.getContext();r.save();try{var i=t.col,l=t.row;r.fillStyle=b(o,i,l,this._grid,r),r.beginPath(),r.rect(e.left,e.top,e.width,e.height),r.fill()}finally{r.restore()}}},{key:"fillRectWithState",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.fillColor=this.getFillColorState(t,n),this.fillRect(e,t,n)}},{key:"getFillColorState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getSelection(),o=e.col,r=e.row;if(!(0,f.cellEquals)(n.select,e)&&(0,f.cellInRange)(n.range,o,r))return this.theme.selectionBgColor;if(t.fillColor)return t.fillColor;if((0,f.cellEquals)(n.select,e))return this.theme.highlightBgColor;var i=this._grid.isFrozenCell(o,r);return i&&i.row?this.theme.frozenRowsBgColor:this.theme.defaultBgColor}},{key:"border",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.borderColor,r=void 0===o?this.theme.borderColor:o,i=n.lineWidth,l=void 0===i?1:i,a=e.getRect();this.drawBorderWithClip(e,(function(n){var o=e.col,i=e.row,s=b(r,o,i,t._grid,n);if(1===l)n.lineWidth=1,D(n,s,a.left-.5,a.top-.5,a.width,a.height);else if(2===l)n.lineWidth=2,D(n,s,a.left,a.top,a.width-1,a.height-1);else{n.lineWidth=l;var u=l/2-1;D(n,s,a.left+u,a.top+u,a.width-l+1,a.height-l+1)}}))}},{key:"borderWithState",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.getRect(),r=e.getSelection(),i=e.col,l=e.row;if((0,f.cellEquals)(r.select,e))n.borderColor=this.theme.highlightBorderColor,n.lineWidth=2,this.border(e,n);else{var a=this._grid.isFrozenCell(i,l);(null==a?void 0:a.row)&&(n.borderColor=this.theme.frozenRowsBorderColor),n.lineWidth=1,this.border(e,n);var s=this._grid.selection.select;s.col+1===i&&s.row===l?this.drawBorderWithClip(e,(function(e){var n=p(b(t.theme.highlightBorderColor,s.col,s.row,t._grid,e));e.lineWidth=1,e.strokeStyle=n[1]||e.strokeStyle,e.beginPath(),e.moveTo(o.left-.5,o.top),e.lineTo(o.left-.5,o.bottom),e.stroke()})):s.col===i&&s.row+1===l&&this.drawBorderWithClip(e,(function(e){var n=p(b(t.theme.highlightBorderColor,s.col,s.row,t._grid,e));e.lineWidth=1,e.strokeStyle=n[0]||e.strokeStyle,e.beginPath(),e.moveTo(o.left,o.top-.5),e.lineTo(o.right,o.top-.5),e.stroke()}))}}},{key:"buildCheckBoxInline",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this,r=t.getContext(),i=a.measureCheckbox(r).width;return new h.InlineDrawer({draw:function(r){var i=r.ctx,l=r.rect,a=r.offset,s=r.offsetLeft,u=r.offsetRight,c=r.offsetTop,d=r.offsetBottom;P(i,l,t.col,t.row,e,o,n,{offset:a+1,padding:{left:s+1,right:u,top:c,bottom:d}})},width:i+3,height:i+1,color:void 0})}},{key:"checkbox",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.padding,i=o.animElapsedTime,l=o.offset,a=void 0===l?3:l,s=o.uncheckBgColor,u=o.checkBgColor,c=o.borderColor,d=o.textAlign,f=o.textBaseline;this.drawWithClip(t,(function(o){var l=t.col,h=t.row;P(o,A(t.getRect(),r,void 0,n,t),l,h,e,n,{animElapsedTime:i,uncheckBgColor:s,checkBgColor:u,borderColor:c,textAlign:d,textBaseline:f},{offset:a,padding:{left:1}})}))}},{key:"radioButton",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.padding,i=o.animElapsedTime,l=o.offset,s=void 0===l?3:l,u=o.checkColor,c=o.uncheckBorderColor,f=o.checkBorderColor,h=o.uncheckBgColor,v=o.checkBgColor,g=o.textAlign,y=o.textBaseline;this.drawWithClip(t,(function(o){var l=t.col,p=t.row;!function(e,t,n,o,r,i,l){var s=l.animElapsedTime,u=void 0===s?1:s,c=l.checkColor,f=void 0===c?i.theme.radioButton.checkColor:c,h=l.uncheckBorderColor,v=void 0===h?i.theme.radioButton.uncheckBorderColor:h,g=l.checkBorderColor,y=void 0===g?i.theme.radioButton.checkBorderColor:g,p=l.uncheckBgColor,m=void 0===p?i.theme.radioButton.uncheckBgColor:p,_=l.checkBgColor,C=void 0===_?i.theme.radioButton.checkBgColor:_,b=l.textAlign,w=void 0===b?"center":b,k=l.textBaseline,E=void 0===k?"middle":k,j=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},x=a.measureRadioButton(e).width;e.textAlign=w,e.textBaseline=E;var S=(0,d.calcStartPosition)(e,t,x+1,x+1,j);f=i.getColor(f,n,o,e),v=i.getColor(v,n,o,e),y=i.getColor(y,n,o,e),m=i.getColor(m,n,o,e),C=i.getColor(C,n,o,e);var O=r?y:v,T=r?C:m;0<u&&u<1&&(O=r?B(v,y,u):B(y,v,u),T=r?B(m,C,u):B(C,m,u)),a.drawRadioButton(e,S.x,S.y,r?u:1-u,{checkColor:f,borderColor:O,bgColor:T})}(o,A(t.getRect(),r,void 0,n,t),l,p,e,n,{animElapsedTime:i,checkColor:u,uncheckBorderColor:c,checkBorderColor:f,uncheckBgColor:h,checkBgColor:v,textAlign:g,textBaseline:y},{offset:s,padding:{left:1}})}))}},{key:"button",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.bgColor,i=void 0===r?this.theme.button.bgColor:r,l=o.padding,s=o.offset,u=void 0===s?2:s,c=o.color,d=void 0===c?this.theme.button.color:c,f=o.textAlign,h=void 0===f?"center":f,g=o.textBaseline,y=void 0===g?"middle":g,p=o.shadow,m=o.font,_=o.textOverflow,C=void 0===_?"clip":_,k=o.icons,E=t.getRect();this.drawWithClip(t,(function(o){m=w(m,t.col,t.row,n._grid,o);var r=t.col,s=t.row,c=A(E,l||E.height/8,m,n,t),f=c.left,g=c.top,_=c.width,j=c.height;i=b(i,t.col,t.row,n._grid,o),a.drawButton(o,f,g,_,j,{bgColor:i,radius:E.height/8,shadow:p}),R(n._grid,o,e,new v.Rect(f,g,_,j),r,s,{offset:u,color:d,textAlign:h,textBaseline:y,font:m,textOverflow:C,icons:k})}))}},{key:"testFontLoad",value:function(e,t,n){return function(e,t,n,o){return!(e&&!s.check(e,t)&&(s.load(e,t,(function(){return function(e,t){var n=e.col,o=e.row;t.invalidateCell(n,o)}(n,o)})),1))}(e,t,n,this._grid)}}]),e}();t.GridCanvasHelper=F},"./ListGrid.js":function(e,t,o){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ListGrid=void 0;var c=s(o("./internal/icons.js")),f=s(o("./themes.js")),p=o("./data.js"),C=o("./list-grid/layout-map/index.js"),b=o("./columns/message/MessageHandler.js"),w=o("./internal/utils.js"),k=o("./columns/style.js"),E=o("./core/DrawGrid.js"),j=o("./GridCanvasHelper.js"),x=o("./header/style.js"),S=o("./list-grid/LG_EVENT_TYPE.js"),O=o("./internal/Rect.js"),T=o("./tooltip/TooltipHandler.js"),I=o("./internal/symbolManager.js"),M=o("./internal/paste-utils.js"),R=(0,I.getProtectedSymbol)();function B(e,t,n){return e[R].layoutMap.getCellRange(t,n)}function P(e,t,n,o){o.setRectFilter((function(o){for(var r=o.left,i=o.right,l=o.top,a=o.bottom,s=B(e,t,n),u=s.start,c=u.col,d=u.row,f=s.end,h=f.col,v=f.row,g=t-1;g>=c;g--)r-=e.getColWidth(g);for(var y=t+1;y<=h;y++)i+=e.getColWidth(y);for(var p=n-1;p>=d;p--)l-=e.getRowHeight(p);for(var m=n+1;m<=v;m++)a+=e.getRowHeight(m);return O.Rect.bounds(r,l,i,a)}))}function L(e,t,n){if(n<e[R].layoutMap.headerRowCount){var o=e[R].layoutMap.getHeader(t,n).caption;return"function"==typeof o?o():o}var r=e[R].layoutMap.getBody(t,n);return F(e,r.field,n)}function D(e,t,n){if(n<e[R].layoutMap.headerRowCount)return null;var o=e[R].layoutMap.getBody(t,n).message;if(!o)return null;if(!Array.isArray(o))return F(e,o,n);for(var r=[],i=0;i<o.length;i++){var l=F(e,o[i],n);if((0,w.isPromise)(l))r.push(l);else if((0,b.hasMessage)(l))return l}return r.length?new Promise((function(e,t){r.forEach((function(n){n.then((function(t){(0,b.hasMessage)(t)&&e(t)}),t)}))})):null}function A(e,t,n){if(Array.isArray(t))return t.map((function(t){return A(e,t,n)}));if(!w.obj.isObject(t)||"function"==typeof t)return F(e,t,n);var o={},r=t;return c.iconPropKeys.forEach((function(t){if(r[t]){var i=F(e,r[t],n);null!=i?o[t]=i:function(e,t,n){if(null==t)return!1;if(n<e[R].layoutMap.headerRowCount)return!1;var o=U(e,n);return e[R].dataSource.hasField(o,t)}(e,r[t],n)||(o[t]=r[t])}})),o}function F(e,t,n){if(null==t)return null;if(n<e[R].layoutMap.headerRowCount)return null;var o=U(e,n);return e[R].dataSource.getField(o,t)}function H(e,t,n,o,r,i){var l=o.col,a=o.row,s=e[R].gridCanvasHelper,u=function(){var e={fillColor:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor};s.fillCellWithState(n,e)},c=function(){if(n.col===e.frozenColCount-1){var t=n.getRect();s.drawWithClip(n,(function(o){var r=n.row>=e.frozenRowCount?s.theme.borderColor:s.theme.frozenRowsBorderColor,i=s.toBoxArray(s.getColor(r,n.col,n.row,o));i[1]&&(o.lineWidth=1,o.strokeStyle=i[1],o.beginPath(),o.moveTo(t.right-2.5,t.top),o.lineTo(t.right-2.5,t.bottom),o.stroke())}))}!function(e,t,n){var o=n.col,r=n.row,i=e.selection.select,l=e[R].layoutMap,a=n.getRect(),s={},u=l.getRecordIndexByRow(i.row),c=l.getCellId(i.col,i.row);function d(e,t){return e===i.col&&t===i.row||null!=c&&l.getCellId(e,t)===c&&l.getRecordIndexByRow(t)===u}if(d(o,r))s.borderColor=t.theme.highlightBorderColor,s.lineWidth=2,t.border(n,s);else{s.lineWidth=1;var f=e.isFrozenCell(o,r);(null==f?void 0:f.row)&&(s.borderColor=t.theme.frozenRowsBorderColor),t.border(n,s),o>0&&d(o-1,r)?t.drawBorderWithClip(n,(function(e){var n=t.toBoxArray(t.getColor(t.theme.highlightBorderColor,i.col,i.row,e));n[1]&&(e.lineWidth=1,e.strokeStyle=n[1],e.beginPath(),e.moveTo(a.left-.5,a.top),e.lineTo(a.left-.5,a.bottom),e.stroke())})):r>0&&d(o,r-1)&&t.drawBorderWithClip(n,(function(e){var n=t.toBoxArray(t.getColor(t.theme.highlightBorderColor,i.col,i.row,e));n[0]&&(e.lineWidth=1,e.strokeStyle=n[0],e.beginPath(),e.moveTo(a.left,a.top-.5),e.lineTo(a.right,a.top-.5),e.stroke())}))}}(e,s,n)},d={getRecord:function(){return e.getRowRecord(a)},getIcon:function(){return function(e,t,n){if(n<e[R].layoutMap.headerRowCount){var o=e[R].layoutMap.getHeader(t,n).headerIcon;return null==o?null:o}var r=e[R].layoutMap.getBody(t,n).icon;return null==r?null:A(e,r,n)}(e,l,a)},getMessage:function(){return D(e,l,a)},messageHandler:e[R].messageHandler,style:r,drawCellBase:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor;u({bgColor:e}),c()},drawCellBg:u,drawCellBorder:c};return i(t,d,n,e)}function N(e){var t,n=e[R];n.headerEvents&&n.headerEvents.forEach((function(t){return e.unlisten(t)}));var o,r=e[R].headerEvents=[];r.forEach((function(t){return e.unlisten(t)})),(o=n.layout&&(!Array.isArray(n.layout)||n.layout.length>0)?n.layoutMap=new C.MultiLayoutMap(n.layout):n.layoutMap=new C.SimpleHeaderLayoutMap(null!==(t=n.header)&&void 0!==t?t:[])).headerObjects.forEach((function(t){var n=t.headerType.bindGridEvent(e,t.id);if(r.push.apply(r,_(n)),t.style&&t.style instanceof x.BaseStyle){var o=t.style.listen(x.BaseStyle.EVENT_TYPE.CHANGE_STYLE,(function(){e.invalidate()}));r.push(o)}if(t.action){var i=t.action.bindGridEvent(e,t.id);r.push.apply(r,_(i))}})),o.columnObjects.forEach((function(t){if(t.action){var n=t.action.bindGridEvent(e,t.id);r.push.apply(r,_(n))}if(t.columnType){var o=t.columnType.bindGridEvent(e,t.id);r.push.apply(r,_(o))}if(t.style&&t.style instanceof k.BaseStyle){var i=t.style.listen(k.BaseStyle.EVENT_TYPE.CHANGE_STYLE,(function(){e.invalidate()}));r.push(i)}}));for(var i=0;i<o.columnWidths.length;i++){var l=o.columnWidths[i],a=l.width,s=l.minWidth,u=l.maxWidth;a&&("string"==typeof a||a>0)?e.setColWidth(i,a):e.setColWidth(i,null),s&&("string"==typeof s||s>0)?e.setMinColWidth(i,s):e.setMinColWidth(i,null),u&&("string"==typeof u||u>0)?e.setMaxColWidth(i,u):e.setMaxColWidth(i,null)}for(var c=e[R].headerRowHeight,d=0;d<o.headerRowCount;d++){var f=Array.isArray(c)?c[d]:c;f&&f>0?e.setRowHeight(d,f):e.setRowHeight(d,null)}e.colCount=o.colCount,V(e),e.frozenRowCount=o.headerRowCount}function V(e){var t=e[R].layoutMap;e.rowCount=e[R].dataSource.length*t.bodyRowCount+t.headerRowCount}function W(e,t){var n=e[R].dataSourceEventIds;n&&n.forEach((function(t){return e[R].handler.off(t)})),t(e),e[R].dataSourceEventIds=[e[R].handler.on(e[R].dataSource,p.DataSource.EVENT_TYPE.UPDATED_LENGTH,(function(){V(e),e.invalidate()})),e[R].handler.on(e[R].dataSource,p.DataSource.EVENT_TYPE.UPDATED_ORDER,(function(){e.invalidate()}))]}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];W(e,(function(){e[R].records=t;var n=e[R].dataSource=p.CachedDataSource.ofArray(t);e.addDisposable(n)}))}function G(e,t){W(e,(function(){if(t)if(t instanceof p.DataSource)e[R].dataSource=t;else{var n=e[R].dataSource=new p.CachedDataSource(t);e.addDisposable(n)}else e[R].dataSource=p.DataSource.EMPTY;e[R].records=null}))}function U(e,t){return e[R].layoutMap.getRecordIndexByRow(t)}function Y(e){for(var t,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=this[R].layoutMap,i=this.selection.range,l=this.getCellRange(i.start.col,i.start.row).start,a=this.getCellRange(i.end.col,i.end.row).end,s=(0,M.parsePasteRangeBoxValues)(e,{trimOnPaste:this.trimOnPaste}),u=Math.min(Math.max(a.row-l.row+1,s.rowCount),this.rowCount-l.row),c=Math.min(Math.max(a.col-l.col+1,s.colCount),this.colCount-l.col),d=!1,f=[],h=0;h<r.bodyRowCount;h++){var v=[];f.push(v);for(var g=0;g<c;g++){var y=r.getBody(l.col+g,h+r.headerRowCount);v[g]=y,!d&&(null===(t=y.action)||void 0===t?void 0:t.editable)&&(d=!0)}}if(d){for(var p=r.getRecordStartRowByRecordIndex(r.getRecordIndexByRow(l.row)),m=l.row-p,_=[],C=function(e,t,n,o){_.push({col:e.col,row:e.row,record:t,define:n,pasteValue:o})},b=null,k=function(){b&&clearTimeout(b),b=setTimeout((function(){_.length>0&&(n.fireListeners(S.LG_EVENT_TYPE.REJECTED_PASTE_VALUES,{detail:_}),_=[])}),100)},E=C,j={},x=m,O=0,T=0;T<u;T++){for(var I=0,B=function(e){var t=f[x][e],r=t.action,i=t.id,a=t.define;if(!j[i]&&(null==r?void 0:r.editable)){j[i]=!0;var u=l.col+e,c=l.row+T,d=s.getCellValue(I,O);(0,w.then)(n.getRowRecord(c),(function(e){(0,w.then)(L(n,u,c),(function(t){o({grid:n,record:e,col:u,row:c,value:d,oldValue:t})&&r.onPasteCellRangeBox(n,{col:u,row:c},d,{reject:function(){E({col:u,row:c},e,a,d)}})}))}))}++I>=s.colCount&&(I=0)},P=0;P<c;P++)B(P);++x>=r.bodyRowCount&&(x=0,j={}),++O>=s.rowCount&&(O=0)}var D={col:l.col+c-1,row:l.row+u-1};this.selection.range={start:l,end:D},this.invalidateCellRange(this.selection.range),k(),E=function(e,t,n,o){C(e,t,n,o),k()}}}function K(){for(var e,t=this,n=this[R].layoutMap,o=this.selection.range,r=this.getCellRange(o.start.col,o.start.row).start,i=this.getCellRange(o.end.col,o.end.row).end,l=Math.min(i.row-r.row+1,this.rowCount-r.row),a=Math.min(i.col-r.col+1,this.colCount-r.col),s=!1,u=[],c=0;c<n.bodyRowCount;c++){var d=[];u.push(d);for(var f=0;f<a;f++){var h=n.getBody(r.col+f,c+n.headerRowCount);d[f]=h,!s&&(null===(e=h.action)||void 0===e?void 0:e.editable)&&(s=!0)}}if(s){for(var v=n.getRecordStartRowByRecordIndex(n.getRecordIndexByRow(r.row)),g=r.row-v,y={},p=g,m=0;m<l;m++){for(var _=function(e){var n=u[p][e],o=n.action,i=n.id;if(!y[i]&&(null==o?void 0:o.editable)){y[i]=!0;var l=r.col+e,a=r.row+m;(0,w.then)(t.getRowRecord(a),(function(e){(0,w.then)(L(t,l,a),(function(e){o.onDeleteCellRangeBox(t,{col:l,row:a})}))}))}},C=0;C<a;C++)_(C);++p>=n.bodyRowCount&&(p=0,y={})}this.invalidateCellRange(o)}}var X=function(e){d(o,e);var t=h(o);function o(){var e,i,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,o),(e=t.call(this,(0,w.omit)(l,["colCount","rowCount","frozenRowCount"])))[r]=e[R],e.disabled=!1,e.readOnly=!1;var a=e[R];return a.header=l.header||[],a.layout=l.layout||[],a.headerRowHeight=l.headerRowHeight||[],l.dataSource?G(v(e),l.dataSource):z(v(e),l.records),a.allowRangePaste=null!==(i=l.allowRangePaste)&&void 0!==i&&i,N(v(e)),a.sortState={col:-1,row:-1,order:void 0},a.gridCanvasHelper=new j.GridCanvasHelper(v(e)),a.theme=f.of(l.theme),a.messageHandler=new b.MessageHandler(v(e),(function(t,n){return D(v(e),t,n)})),a.tooltipHandler=new T.TooltipHandler(v(e)),e.invalidate(),a.handler.on(n,"resize",(function(){e.updateSize(),e.updateScroll(),e.invalidate()})),e}return m(o,[{key:"dispose",value:function(){var e=this[R];e.messageHandler.dispose(),e.tooltipHandler.dispose(),u(g(o.prototype),"dispose",this).call(this)}},{key:"header",get:function(){return this[R].header},set:function(e){this[R].header=e,N(this)}},{key:"layout",get:function(){return this[R].layout},set:function(e){this[R].layout=e,N(this)}},{key:"headerRowHeight",get:function(){return this[R].headerRowHeight},set:function(e){this[R].headerRowHeight=e||[],N(this)}},{key:"recordRowCount",get:function(){return this[R].layoutMap.bodyRowCount}},{key:"records",get:function(){return this[R].records||null},set:function(e){null!=e&&(z(this,e),V(this),this.invalidate())}},{key:"dataSource",get:function(){return this[R].dataSource},set:function(e){G(this,e),V(this),this.invalidate()}},{key:"theme",get:function(){return this[R].theme},set:function(e){this[R].theme=f.of(e),this.invalidate()}},{key:"allowRangePaste",get:function(){return this[R].allowRangePaste},set:function(e){this[R].allowRangePaste=e}},{key:"font",get:function(){return u(g(o.prototype),"font",this)||this[R].gridCanvasHelper.theme.font},set:function(e){a(g(o.prototype),"font",e,this,!0)}},{key:"underlayBackgroundColor",get:function(){return u(g(o.prototype),"underlayBackgroundColor",this)||this[R].gridCanvasHelper.theme.underlayBackgroundColor},set:function(e){a(g(o.prototype),"underlayBackgroundColor",e,this,!0)}},{key:"sortState",get:function(){return this[R].sortState},set:function(e){var t,n=this.sortState;n.col>=0&&n.row>=0&&(t=this.getHeaderField(n.col,n.row));var o,r=this[R].sortState=null!=e?e:{col:-1,row:-1,order:void 0};r.col>=0&&r.row>=0&&(o=this.getHeaderField(r.col,r.row)),null!=t&&t!==o&&this.setHeaderValue(n.col,n.row,void 0),null!=o&&this.setHeaderValue(r.col,r.row,r.order)}},{key:"headerValues",get:function(){return this[R].headerValues||(this[R].headerValues=new Map)},set:function(e){this[R].headerValues=e||new Map}},{key:"getField",value:function(e,t){return this[R].layoutMap.getBody(e,null!=t?t:this[R].layoutMap.headerRowCount).field}},{key:"getColumnDefine",value:function(e,t){return this[R].layoutMap.getBody(e,null!=t?t:this[R].layoutMap.headerRowCount).define}},{key:"getColumnType",value:function(e,t){return this[R].layoutMap.getBody(e,t).columnType}},{key:"getColumnAction",value:function(e,t){return this[R].layoutMap.getBody(e,t).action}},{key:"getHeaderField",value:function(e,t){return this[R].layoutMap.getHeader(e,t).field}},{key:"getHeaderDefine",value:function(e,t){return this[R].layoutMap.getHeader(e,t).define}},{key:"getRowRecord",value:function(e){return e<this[R].layoutMap.headerRowCount?void 0:this[R].dataSource.get(U(this,e))}},{key:"getRecordIndexByRow",value:function(e){return U(this,e)}},{key:"getRecordStartRowByRecordIndex",value:function(e){return this[R].layoutMap.getRecordStartRowByRecordIndex(e)}},{key:"getColumnIndexByField",value:function(e){var t,n=this.getCellRangeByField(e,0);return null!==(t=null==n?void 0:n.start.col)&&void 0!==t?t:null}},{key:"getCellRangeByField",value:function(e,t){var n=this[R].layoutMap,o=n.columnObjects.find((function(t){return t.field===e}));if(o){var r=n.getBodyLayoutRangeById(o.id),i=n.getRecordStartRowByRecordIndex(t);return{start:{col:r.start.col,row:i+r.start.row},end:{col:r.end.col,row:i+r.end.row}}}return null}},{key:"focusGridCell",value:function(e,t){var n,o=this.selection.range,r=o.start,i=r.col,l=r.row,a=o.end,s=a.col,u=a.row,c=null===(n=this.getCellRangeByField(e,t))||void 0===n?void 0:n.start;null!=c&&(this.focusCell(c.col,c.row),this.selection.select=c,this.invalidateGridRect(i,l,s,u),this.invalidateCell(c.col,c.row))}},{key:"makeVisibleGridCell",value:function(e,t){var n,o,r,i=null===(n=this.getCellRangeByField(e,t))||void 0===n?void 0:n.start;this.makeVisibleCell(null!==(o=null==i?void 0:i.col)&&void 0!==o?o:0,null!==(r=null==i?void 0:i.row)&&void 0!==r?r:this[R].layoutMap.headerRowCount)}},{key:"getGridCanvasHelper",value:function(){return this[R].gridCanvasHelper}},{key:"getCellRange",value:function(e,t){return B(this,e,t)}},{key:"getHeaderCellRange",value:function(e,t){return this.getCellRange(e,t)}},{key:"getCopyCellValue",value:function(e,t,n){var o=B(this,e,t),r=n?Math.max(n.start.col,o.start.col):o.start.col,i=n?Math.max(n.start.row,o.start.row):o.start.row;if(r!==e||i!==t)return"";var l=L(this,e,t);return t<this[R].layoutMap.headerRowCount?this[R].layoutMap.getHeader(e,t).headerType.getCopyCellValue(l,this,{col:e,row:t}):this[R].layoutMap.getBody(e,t).columnType.getCopyCellValue(l,this,{col:e,row:t})}},{key:"onDrawCell",value:function(e,t,n){var o,r,i=this[R].layoutMap;if(t<i.headerRowCount){var l=i.getHeader(e,t);o=l.headerType.onDrawCell,r=l.style,P(this,e,t,n)}else{var a=i.getBody(e,t);o=a.columnType.onDrawCell,r=a.style,P(this,e,t,n)}var s=L(this,e,t);if(!(this.rowCount<=t))return H(this,s,n,{col:e,row:t},r,o)}},{key:"doGetCellValue",value:function(e,t,n){if(t<this[R].layoutMap.headerRowCount)return!1;var o=L(this,e,t);return!(0,w.isPromise)(o)&&(n(o),!0)}},{key:"doChangeValue",value:function(e,t,n){var o=this;if(t<this[R].layoutMap.headerRowCount)return!1;var r=this.getRowRecord(t);if((0,w.isPromise)(r))return!1;var i=L(this,e,t);if((0,w.isPromise)(i))return!1;var l=n(i);if(void 0===l)return!1;var a=this[R].layoutMap.getBody(e,t).field;return this.fireListeners(S.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE,{col:e,row:t,record:r,field:a,value:l,oldValue:i}),(0,w.then)(function(e,t,n,o){if(n<e[R].layoutMap.headerRowCount)return!1;var r=e[R].layoutMap.getBody(t,n).field;if(null==r)return!1;var i=U(e,n);return e[R].dataSource.setField(i,r,o)}(this,e,t,l),(function(n){if(n){var a=o[R].layoutMap.getBody(e,t).field;o.fireListeners(S.LG_EVENT_TYPE.CHANGED_VALUE,{col:e,row:t,record:r,field:a,value:l,oldValue:i})}return n}))}},{key:"doSetPasteValue",value:function(e,t){Y.call(this,e,t)}},{key:"getHeaderValue",value:function(e,t){var n=this.getHeaderField(e,t);return this.headerValues.get(n)}},{key:"setHeaderValue",value:function(e,t,n){var o=this.getHeaderField(e,t),r=this.headerValues.get(o);this.headerValues.set(o,n),this.fireListeners(S.LG_EVENT_TYPE.CHANGED_HEADER_VALUE,{col:e,row:t,field:o,value:n,oldValue:r})}},{key:"getLayoutCellId",value:function(e,t){return this[R].layoutMap.getCellId(e,t)}},{key:"bindEventsInternal",value:function(){var e=this,t=this;t.listen(S.LG_EVENT_TYPE.SELECTED_CELL,(function(t){var n=B(e,t.col,t.row),o=n.start,r=o.col,i=o.row,l=n.end,a=l.col,s=l.row;r===a&&i===s||e.invalidateCellRange(n)})),t.listen(S.LG_EVENT_TYPE.PASTE_CELL,(function(t){if(e[R].allowRangePaste){var n=e.selection.range,o=n.start,r=n.end;if(t.multi||!(0,w.cellEquals)(o,r)){var i=e[R].layoutMap;o.row<i.headerRowCount||(w.event.cancel(t.event),Y.call(e,t.normalizeValue))}}})),t.listen(S.LG_EVENT_TYPE.DELETE_CELL,(function(t){var n=e.selection.range.start,o=e[R].layoutMap;n.row<o.headerRowCount||(w.event.cancel(t.event),K.call(e))}))}},{key:"getMoveLeftColByKeyDownInternal",value:function(e){var t=e.col,n=e.row;return t=B(this,t,n).start.col,u(g(o.prototype),"getMoveLeftColByKeyDownInternal",this).call(this,{col:t,row:n})}},{key:"getMoveRightColByKeyDownInternal",value:function(e){var t=e.col,n=e.row;return t=B(this,t,n).end.col,u(g(o.prototype),"getMoveRightColByKeyDownInternal",this).call(this,{col:t,row:n})}},{key:"getMoveUpRowByKeyDownInternal",value:function(e){var t=e.col,n=e.row;return n=B(this,t,n).start.row,u(g(o.prototype),"getMoveUpRowByKeyDownInternal",this).call(this,{col:t,row:n})}},{key:"getMoveDownRowByKeyDownInternal",value:function(e){var t=e.col,n=e.row;return n=B(this,t,n).end.row,u(g(o.prototype),"getMoveDownRowByKeyDownInternal",this).call(this,{col:t,row:n})}},{key:"getOffsetInvalidateCells",value:function(){return 1}},{key:"getCopyRangeInternal",value:function(e){return{start:this.getCellRange(e.start.col,e.start.row).start,end:this.getCellRange(e.end.col,e.end.row).end}}},{key:"fireListeners",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=u(g(o.prototype),"fireListeners",this)).call.apply(t,[this,e].concat(r))}}],[{key:"EVENT_TYPE",get:function(){return S.LG_EVENT_TYPE}}]),o}(E.DrawGrid);t.ListGrid=X,r=R},"./columns.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.style=t.type=t.action=void 0;var l=i(n("./columns/action.js"));t.action=l;var a=i(n("./columns/style.js"));t.style=a;var s=i(n("./columns/type.js"));t.type=s},"./columns/action.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.InlineMenuEditor=t.InlineInputEditor=t.SmallDialogInputEditor=t.ButtonAction=t.RadioEditor=t.CheckEditor=t.Action=t.Editor=t.BaseAction=t.ACTIONS=void 0;var o=n("./columns/action/Action.js");Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return o.Action}});var r=n("./columns/action/BaseAction.js");Object.defineProperty(t,"BaseAction",{enumerable:!0,get:function(){return r.BaseAction}});var i=n("./columns/action/ButtonAction.js");Object.defineProperty(t,"ButtonAction",{enumerable:!0,get:function(){return i.ButtonAction}});var l=n("./columns/action/CheckEditor.js");Object.defineProperty(t,"CheckEditor",{enumerable:!0,get:function(){return l.CheckEditor}});var a=n("./columns/action/Editor.js");Object.defineProperty(t,"Editor",{enumerable:!0,get:function(){return a.Editor}});var s=n("./columns/action/InlineInputEditor.js");Object.defineProperty(t,"InlineInputEditor",{enumerable:!0,get:function(){return s.InlineInputEditor}});var u=n("./columns/action/InlineMenuEditor.js");Object.defineProperty(t,"InlineMenuEditor",{enumerable:!0,get:function(){return u.InlineMenuEditor}});var c=n("./columns/action/RadioEditor.js");Object.defineProperty(t,"RadioEditor",{enumerable:!0,get:function(){return c.RadioEditor}});var f=n("./columns/action/SmallDialogInputEditor.js");Object.defineProperty(t,"SmallDialogInputEditor",{enumerable:!0,get:function(){return f.SmallDialogInputEditor}});var v=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"disabled",get:function(){return this._disabled}},{key:"readOnly",get:function(){return this._readOnly}}]),n}(l.CheckEditor),g=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"disabled",get:function(){return this._disabled}},{key:"readOnly",get:function(){return this._readOnly}}]),n}(c.RadioEditor),p=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"disabled",get:function(){return this._disabled}},{key:"readOnly",get:function(){return this._readOnly}}]),n}(f.SmallDialogInputEditor);t.ACTIONS={CHECK:new v,INPUT:new p,RADIO:new g},t.of=function e(n){if(n){if("string"==typeof n){var o=n.toUpperCase();return t.ACTIONS[o]||e(null)}return n}}},"./columns/action/Action.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Action=t.AbstractAction=void 0;var r=o("./columns/action/actionBind.js"),i=o("./columns/action/BaseAction.js"),l=o("./internal/utils.js"),a=o("./columns/action/action-utils.js"),s=function(e){d(o,e);var t=h(o);function o(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,o),(e=t.call(this,n))._action=n.action||function(){},e}return m(o,[{key:"editable",get:function(){return!1}},{key:"action",get:function(){return this._action},set:function(e){this._action=e}},{key:"bindGridEvent",value:function(e,t){var o=this,i=this.getState(e),s=function(t){if(!(0,a.isDisabledRecord)(o.disabled,e,t.row)){var n=e.getRowRecord(t.row);o._action(n,(0,l.extend)(t,{grid:e}))}};return[].concat(_((0,r.bindCellClickAction)(e,t,{action:s,mouseOver:function(t){if((0,a.isDisabledRecord)(o.disabled,e,t.row))return!1;i.mouseActiveCell={col:t.col,row:t.row};var n=e.getCellRange(t.col,t.row);return e.invalidateCellRange(n),!0},mouseOut:function(t){delete i.mouseActiveCell;var n=e.getCellRange(t.col,t.row);e.invalidateCellRange(n)},area:function(t){if(!o.area)return!0;var r=t.event,i=r.clientX||r.pageX+n.scrollX,l=r.clientY||r.pageY+n.scrollY,a=e.canvas.getBoundingClientRect(),s=i-a.left,u=l-a.top,c=e.getCellRect(t.col,t.row);return o.area({col:t.col,row:t.row,grid:e,pointInCell:{x:s-c.left+e.scrollLeft,y:u-c.top+e.scrollTop},pointInDrawingCanvas:{x:s,y:u}})}})),_((0,r.bindCellKeyAction)(e,t,{action:s})))}},{key:"onPasteCellRangeBox",value:function(){}},{key:"onDeleteCellRangeBox",value:function(){}}]),o}(i.BaseAction);t.AbstractAction=s;var u=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._area=o.area,e}return m(n,[{key:"area",get:function(){return this._area},set:function(e){this._area=e}},{key:"clone",value:function(){return new n(this)}},{key:"getState",value:function(e){return{}}}]),n}(s);t.Action=u},"./columns/action/BaseAction.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAction=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,e),this._disabled=t.disabled||!1}return m(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this.onChangeDisabledInternal()}},{key:"onChangeDisabledInternal",value:function(){}}]),e}();t.BaseAction=o},"./columns/action/BaseInputEditor.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseInputEditor=void 0;var o=n("./internal/utils.js"),r=n("./columns/action/action-utils.js"),i=n("./core/DG_EVENT_TYPE.js"),l=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),t.call(this,e)}return m(n,[{key:"bindGridEvent",value:function(e,t){var n=this,l=function(t){return!(0,r.isReadOnlyRecord)(n.readOnly,e,t.row)&&!(0,r.isDisabledRecord)(n.disabled,e,t.row)&&(n.onOpenCellInternal(e,t),!0)},a=function(t,o){(0,r.isReadOnlyRecord)(n.readOnly,e,t.row)||(0,r.isDisabledRecord)(n.disabled,e,t.row)||n.onInputCellInternal(e,t,o)};function s(n,o){return e.getLayoutCellId(n,o)===t}return[e.listen(i.DG_EVENT_TYPE.INPUT_CELL,(function(e){s(e.col,e.row)&&a({col:e.col,row:e.row},e.value)})),e.listen(i.DG_EVENT_TYPE.PASTE_CELL,(function(t){if(!t.multi){var n=e.selection.range;(0,o.cellEquals)(n.start,n.end)&&s(t.col,t.row)&&(o.event.cancel(t.event),a({col:t.col,row:t.row},t.normalizeValue))}})),e.listen(i.DG_EVENT_TYPE.DBLCLICK_CELL,(function(e){s(e.col,e.row)&&l({col:e.col,row:e.row})})),e.listen(i.DG_EVENT_TYPE.DBLTAP_CELL,(function(e){s(e.col,e.row)&&(l({col:e.col,row:e.row}),o.event.cancel(e.event))})),e.listen(i.DG_EVENT_TYPE.KEYDOWN,(function(t){if(113===t.keyCode||13===t.keyCode){var n=e.selection.select;s(n.col,n.row)&&l({col:n.col,row:n.row})&&t.stopCellMoving()}})),e.listen(i.DG_EVENT_TYPE.SELECTED_CELL,(function(t){s(t.col,t.row)&&n.onChangeSelectCellInternal(e,{col:t.col,row:t.row},t.selected)})),e.listen(i.DG_EVENT_TYPE.SCROLL,(function(){n.onGridScrollInternal(e)})),e.listen(i.DG_EVENT_TYPE.EDITABLEINPUT_CELL,(function(t){return!!s(t.col,t.row)&&!(0,r.isReadOnlyRecord)(n.readOnly,e,t.row)&&!(0,r.isDisabledRecord)(n.disabled,e,t.row)})),e.listen(i.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,(function(t){if(s(t.col,t.row)&&!(0,r.isReadOnlyRecord)(n.readOnly,e,t.row)&&!(0,r.isDisabledRecord)(n.disabled,e,t.row)){var o=e.getCellRange(t.col,t.row);if(o.start.col!==o.end.col||o.start.row!==o.end.row){var i=t.input,l=e.getCellRect(t.col,t.row),a=e.getCellRangeRect(o);i.style.top="".concat((parseFloat(i.style.top)+(a.top-l.top)).toFixed(),"px"),i.style.left="".concat((parseFloat(i.style.left)+(a.left-l.left)).toFixed(),"px"),i.style.width="".concat(a.width.toFixed(),"px"),i.style.height="".concat(a.height.toFixed(),"px")}n.onSetInputAttrsInternal(e,{col:t.col,row:t.row},t.input)}}))]}},{key:"onPasteCellRangeBox",value:function(e,t,n){var o=this;(0,r.isReadOnlyRecord)(this.readOnly,e,t.row)||(0,r.isDisabledRecord)(this.disabled,e,t.row)||e.doChangeValue(t.col,t.row,(function(){return o.isSupportMultilineValue()?n:n.replace(/\r?\n/g," ")}))}},{key:"onDeleteCellRangeBox",value:function(e,t){(0,r.isReadOnlyRecord)(this.readOnly,e,t.row)||(0,r.isDisabledRecord)(this.disabled,e,t.row)||e.doChangeValue(t.col,t.row,(function(){return""}))}},{key:"isSupportMultilineValue",value:function(){return!1}}]),n}(n("./columns/action/Editor.js").Editor);t.BaseInputEditor=l},"./columns/action/ButtonAction.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonAction=void 0;var o=n("./columns/action/Action.js"),r=n("./internal/symbolManager.js"),i=n("./internal/utils.js"),l=(0,r.getButtonColumnStateId)(),a=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),t.call(this,e)}return m(n,[{key:"area",get:function(){},set:function(e){}},{key:"clone",value:function(){return new n(this)}},{key:"getState",value:function(e){var t=e[l];return t||(t={},i.obj.setReadonly(e,l,t)),t}}]),n}(o.AbstractAction);t.ButtonAction=a},"./columns/action/CheckEditor.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckEditor=void 0;var o=n("./columns/action/actionBind.js"),r=n("./internal/utils.js"),i=n("./columns/action/action-utils.js"),l=n("./core/DG_EVENT_TYPE.js"),a=n("./columns/action/Editor.js"),s=n("./internal/animate.js"),u=(0,n("./internal/symbolManager.js").getCheckColumnStateId)(),c=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"clone",value:function(){return new n(this)}},{key:"bindGridEvent",value:function(e,t){var n=this,a=e[u];a||(a={block:{},elapsed:{}},r.obj.setReadonly(e,u,a));var c=a,d=function(t){var o=e.getCellRange(t.col,t.row),l="".concat(o.start.col,":").concat(o.start.row);if(!((0,i.isReadOnlyRecord)(n.readOnly,e,t.row)||(0,i.isDisabledRecord)(n.disabled,e,t.row)||c.block[l])){var a=e.doChangeValue(t.col,t.row,i.toggleValue);if(a){var u=function(){(0,s.animate)(200,(function(t){1===t?delete c.elapsed[l]:c.elapsed[l]=t,e.invalidateCellRange(o)}))};(0,r.isPromise)(a)?(c.block[l]=!0,a.then((function(){delete c.block[l],u()}))):u()}}};function h(n,o){return e.getLayoutCellId(n,o)===t}return[].concat(_((0,o.bindCellClickAction)(e,t,{action:d,mouseOver:function(t){if((0,i.isDisabledRecord)(n.disabled,e,t.row))return!1;c.mouseActiveCell={col:t.col,row:t.row};var o=e.getCellRange(t.col,t.row);return e.invalidateCellRange(o),!0},mouseOut:function(t){delete c.mouseActiveCell;var n=e.getCellRange(t.col,t.row);e.invalidateCellRange(n)}})),_((0,o.bindCellKeyAction)(e,t,{action:function(t){for(var n=e.selection.range,o=e.selection.select.col,r=n.start.row;r<=n.end.row;r++)h(o,r)&&d({col:o,row:r})}})),[e.listen(l.DG_EVENT_TYPE.PASTE_CELL,(function(t){if(!t.multi){var n=e.selection.range;if((0,r.cellEquals)(n.start,n.end)&&h(t.col,t.row)){r.event.cancel(t.event);var o=t.normalizeValue.trim();e.doGetCellValue(t.col,t.row,(function(n){var l=(0,i.toggleValue)(n);if("".concat(l).trim()===o)d({col:t.col,row:t.row});else if(f(n,o)){var a=e.getRowRecord(t.row);(0,r.isPromise)(a)||e.fireListeners("rejected_paste_values",{detail:[{col:t.col,row:t.row,record:a,define:e.getColumnDefine(t.col,t.row),pasteValue:o}]})}}))}}}))])}},{key:"onPasteCellRangeBox",value:function(e,t,n,o){if(!(0,i.isReadOnlyRecord)(this.readOnly,e,t.row)&&!(0,i.isDisabledRecord)(this.disabled,e,t.row)){var r=n.trim();e.doGetCellValue(t.col,t.row,(function(n){var l=(0,i.toggleValue)(n);"".concat(l).trim()===r?e.doChangeValue(t.col,t.row,i.toggleValue):f(n,r)&&o.reject()}))}}},{key:"onDeleteCellRangeBox",value:function(){}}]),n}(a.Editor);function f(e,t){if((null!=e?"".concat(e).trim():"")===t)return!1;var n=(0,i.toggleValue)(e);return"".concat(n).trim()!==t&&"".concat((0,i.toggleValue)(n)).trim()!==t}t.CheckEditor=c},"./columns/action/Editor.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=void 0;var o=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._readOnly=o.readOnly||!1,e}return m(n,[{key:"editable",get:function(){return!0}},{key:"readOnly",get:function(){return this._readOnly},set:function(e){this._readOnly=e,this.onChangeReadOnlyInternal()}},{key:"onChangeReadOnlyInternal",value:function(){}}]),n}(n("./columns/action/BaseAction.js").BaseAction);t.Editor=o},"./columns/action/InlineInputEditor.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineInputEditor=void 0;var o=n("./columns/action/BaseInputEditor.js"),r=n("./columns/action/internal/InlineInputElement.js"),i=n("./internal/symbolManager.js"),l=n("./internal/utils.js"),a=(0,i.getInlineInputEditorStateId)(),s=null,u=0;function c(e,t,n,o){var i=function(e){var t=e[a];return t||(t={},l.obj.setReadonly(e,a,t)),t}(e);s||(s=new r.InlineInputElement),i.element||(i.element=s,u++,e.addDisposable({dispose:function(){--u||(null==s||s.dispose(),s=null,i.element=null)}})),s.attach(e,n,t.col,t.row,o)}function f(e){s&&s.detach(e)}function v(e){s&&s.doChangeValue()}var g=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._classList=o.classList,e._type=o.type,e}return m(n,[{key:"classList",get:function(){if(this._classList)return Array.isArray(this._classList)?this._classList:[this._classList]},set:function(e){this._classList=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"clone",value:function(){return new n(this)}},{key:"onInputCellInternal",value:function(e,t,n){c(e,t,this,n)}},{key:"onOpenCellInternal",value:function(e,t){var n=this;e.doGetCellValue(t.col,t.row,(function(o){c(e,t,n,o)}))}},{key:"onChangeSelectCellInternal",value:function(e,t,n){v(),f()}},{key:"onGridScrollInternal",value:function(e){v(),f(!0)}},{key:"onChangeDisabledInternal",value:function(){f(!0)}},{key:"onChangeReadOnlyInternal",value:function(){f(!0)}},{key:"onSetInputAttrsInternal",value:function(e,t,n){r.InlineInputElement.setInputAttrs(this,e,n)}}]),n}(o.BaseInputEditor);t.InlineInputEditor=g},"./columns/action/InlineMenuEditor.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineMenuEditor=void 0;var o=n("./internal/utils.js"),r=n("./columns/action/action-utils.js"),i=n("./core/DG_EVENT_TYPE.js"),l=n("./columns/action/Editor.js"),a=n("./columns/action/internal/InlineMenuElement.js"),s=n("./columns/type.js"),u=n("./internal/symbolManager.js"),c=n("./internal/menu-items.js"),f=(0,u.getInlineMenuEditorStateId)(),v=null,g=0;function p(e){v&&v.detach(e)}var _=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._classList=o.classList,e._options=(0,c.normalizeToFn)(o.options),e}return m(n,[{key:"dispose",value:function(){}},{key:"classList",get:function(){if(this._classList)return Array.isArray(this._classList)?this._classList:[this._classList]},set:function(e){this._classList=e}},{key:"options",get:function(){return this._options},set:function(e){this._options=(0,c.normalizeToFn)(e)}},{key:"clone",value:function(){return new n(this)}},{key:"onChangeDisabledInternal",value:function(){p(!0)}},{key:"onChangeReadOnlyInternal",value:function(){p(!0)}},{key:"bindGridEvent",value:function(e,t){var n=this,l=function(t){return!(0,r.isReadOnlyRecord)(n.readOnly,e,t.row)&&!(0,r.isDisabledRecord)(n.disabled,e,t.row)&&(e.doGetCellValue(t.col,t.row,(function(r){var i=e.getRowRecord(t.row);(0,o.isPromise)(i)||function(e,t,n,r,i){var l=function(e){var t=e[f];return t||(t={},o.obj.setReadonly(e,f,t)),t}(e);v||(v=new a.InlineMenuElement),l.element||(l.element=v,g++,e.addDisposable({dispose:function(){--g||(null==v||v.dispose(),v=null,l.element=null)}})),v.attach(e,n,t.col,t.row,r,i)}(e,t,n,r,i)})),!0)};function s(n,o){return e.getLayoutCellId(n,o)===t}return[e.listen(i.DG_EVENT_TYPE.CLICK_CELL,(function(e){s(e.col,e.row)&&l({col:e.col,row:e.row})})),e.listen(i.DG_EVENT_TYPE.KEYDOWN,(function(t){if(113===t.keyCode||13===t.keyCode){var n=e.selection.select;s(n.col,n.row)&&l({col:n.col,row:n.row})&&t.stopCellMoving()}})),e.listen(i.DG_EVENT_TYPE.SELECTED_CELL,(function(e){p()})),e.listen(i.DG_EVENT_TYPE.SCROLL,(function(){p(!0)})),e.listen(i.DG_EVENT_TYPE.MOUSEOVER_CELL,(function(t){s(t.col,t.row)&&((0,r.isReadOnlyRecord)(n.readOnly,e,t.row)||(0,r.isDisabledRecord)(n.disabled,e,t.row)||(e.getElement().style.cursor="pointer"))})),e.listen(i.DG_EVENT_TYPE.MOUSEMOVE_CELL,(function(t){s(t.col,t.row)&&((0,r.isReadOnlyRecord)(n.readOnly,e,t.row)||(0,r.isDisabledRecord)(n.disabled,e,t.row)||e.getElement().style.cursor||(e.getElement().style.cursor="pointer"))})),e.listen(i.DG_EVENT_TYPE.MOUSEOUT_CELL,(function(t){s(t.col,t.row)&&(e.getElement().style.cursor="")})),e.listen(i.DG_EVENT_TYPE.PASTE_CELL,(function(t){if(!t.multi){var i=e.selection.range;if((0,o.cellEquals)(i.start,i.end)&&s(t.col,t.row)&&!(0,r.isReadOnlyRecord)(n.readOnly,e,t.row)&&!(0,r.isDisabledRecord)(n.disabled,e,t.row)){var l=e.getRowRecord(t.row);if(!(0,o.isPromise)(l)){var a=n._pasteDataToOptionValue(t.normalizeValue,e,t,l);a?(o.event.cancel(t.event),(0,o.then)(e.doChangeValue(t.col,t.row,(function(){return a.value})),(function(){var n=e.getCellRange(t.col,t.row);e.invalidateCellRange(n)}))):e.fireListeners("rejected_paste_values",{detail:[{col:t.col,row:t.row,record:l,define:e.getColumnDefine(t.col,t.row),pasteValue:t.normalizeValue}]})}}}}))]}},{key:"onPasteCellRangeBox",value:function(e,t,n,i){if(!(0,r.isReadOnlyRecord)(this.readOnly,e,t.row)&&!(0,r.isDisabledRecord)(this.disabled,e,t.row)){var l=e.getRowRecord(t.row);if(!(0,o.isPromise)(l)){var a=this._pasteDataToOptionValue(n,e,t,l);a?e.doChangeValue(t.col,t.row,(function(){return a.value})):i.reject()}}}},{key:"onDeleteCellRangeBox",value:function(e,t){if(!(0,r.isReadOnlyRecord)(this.readOnly,e,t.row)&&!(0,r.isDisabledRecord)(this.disabled,e,t.row)){var n=e.getRowRecord(t.row);if(!(0,o.isPromise)(n)){var i=this._pasteDataToOptionValue("",e,t,n);i&&e.doChangeValue(t.col,t.row,(function(){return i.value}))}}}},{key:"_pasteDataToOptionValue",value:function(e,t,n,r){var i=this._options(r),l=C(e,i);if(l)return l;var a=t.getColumnType(n.col,n.row);if(function(e){return e instanceof s.MenuColumn||!!Array.isArray(e.options)}(a)){var u=b(e),c=o.array.find(a.options,(function(e){return b(e.label)===u}));if(c)return C(c.value,i)}}}]),n}(l.Editor);function C(e,t){var n=b(e),r=o.array.find(t,(function(e){return b(e.value)===n}));if(r)return r}function b(e){return null==e?"":"".concat(e).trim()}t.InlineMenuEditor=_},"./columns/action/RadioEditor.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RadioEditor=void 0;var o=n("./columns/action/actionBind.js"),r=n("./internal/utils.js"),i=n("./columns/action/action-utils.js"),l=n("./core/DG_EVENT_TYPE.js"),a=n("./columns/action/Editor.js"),s=n("./internal/animate.js"),u=n("./internal/symbolManager.js"),c=n("./columns/utils/index.js"),f=(0,u.getRadioColumnStateId)(),v=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._group=o.group,e._checkAction=o.checkAction,e}return m(n,[{key:"clone",value:function(){return new n(this)}},{key:"group",get:function(){return this._group},set:function(e){this._group=e}},{key:"checkAction",get:function(){return this._checkAction},set:function(e){this._checkAction=e}},{key:"bindGridEvent",value:function(e,t){var n=this,a=e[f];a||(a={block:{},elapsed:{}},r.obj.setReadonly(e,f,a));var s=a,u=function(t){n._action(e,t)};return[].concat(_((0,o.bindCellClickAction)(e,t,{action:u,mouseOver:function(t){if((0,i.isDisabledRecord)(n.disabled,e,t.row))return!1;s.mouseActiveCell={col:t.col,row:t.row};var o=e.getCellRange(t.col,t.row);return e.invalidateCellRange(o),!0},mouseOut:function(t){delete s.mouseActiveCell;var n=e.getCellRange(t.col,t.row);e.invalidateCellRange(n)}})),_((0,o.bindCellKeyAction)(e,t,{action:u})),[e.listen(l.DG_EVENT_TYPE.PASTE_CELL,(function(n){if(!n.multi){var o=e.selection.range;if((0,r.cellEquals)(o.start,o.end)&&(i=n.col,l=n.row,e.getLayoutCellId(i,l)===t)){var i,l;r.event.cancel(n.event);var a=n.normalizeValue.trim();if(p(a)){var s=e.getRowRecord(n.row);(0,r.isPromise)(s)||e.fireListeners("rejected_paste_values",{detail:[{col:n.col,row:n.row,record:s,define:e.getColumnDefine(n.col,n.row),pasteValue:a}]})}else(0,c.toBoolean)(a)&&u({col:n.col,row:n.row})}}}))])}},{key:"onPasteCellRangeBox",value:function(e,t,n,o){if(!(0,i.isReadOnlyRecord)(this.readOnly,e,t.row)&&!(0,i.isDisabledRecord)(this.disabled,e,t.row)){var r=n.trim();p(r)?o.reject():(0,c.toBoolean)(r)&&this._action(e,{col:t.col,row:t.row})}}},{key:"onDeleteCellRangeBox",value:function(){}},{key:"_action",value:function(e,t){var n=this,o=e[f],l=e.getCellRange(t.col,t.row),a="".concat(l.start.col,":").concat(l.start.row);(0,i.isReadOnlyRecord)(this.readOnly,e,t.row)||(0,i.isDisabledRecord)(this.disabled,e,t.row)||o.block[a]||e.doGetCellValue(t.col,t.row,(function(o){if(!(0,c.toBoolean)(o))if(n._checkAction){var l=e.getRowRecord(t.row);n._checkAction(l,(0,r.extend)(t,{grid:e}))}else if(n._group){var a=e[f];n._group({grid:e,col:t.col,row:t.row}).forEach((function(o){var r=o.col,l=o.row,s=e.getCellRange(r,l),u="".concat(s.start.col,":").concat(s.start.row);(0,i.isReadOnlyRecord)(n.readOnly,e,t.row)||(0,i.isDisabledRecord)(n.disabled,e,t.row)||a.block[u]||g(e,r,l,r===t.col&&l===t.row)}))}else for(var s=e.getField(t.col,t.row),u=e.getRecordStartRowByRecordIndex(e.getRecordIndexByRow(t.row)),d=e.dataSource.dataSource,h=function(e){for(var t=[],n=e.rowCount,o=e.recordRowCount,r=e.frozenRowCount;r<n;r+=o){var i=e.getRowRecord(r);t.push({row:r,record:i})}return t}(e),v=function(n){var o=d.get(n),l=h.find((function(e){return e.record===o}));l?g(e,t.col,l.row,l.row===u):(0,r.then)(d.getField(n,s),(function(e){(0,c.toBoolean)(e)&&d.setField(n,s,(0,i.toggleValue)(e))}))},y=0;y<d.length;y++)v(y)}))}}]),n}(a.Editor);function g(e,t,n,o){e.doGetCellValue(t,n,(function(l){if((0,c.toBoolean)(l)!==o){var a=e[f],u=e.getCellRange(t,n),d="".concat(u.start.col,":").concat(u.start.row),h=e.doChangeValue(t,n,i.toggleValue);if(h){var v=function(){(0,s.animate)(200,(function(t){1===t?delete a.elapsed[d]:a.elapsed[d]=t,e.invalidateCellRange(u)}))};(0,r.isPromise)(h)?(a.block[d]=!0,h.then((function(){delete a.block[d],v()}))):v()}}}))}function p(e){return(0,i.toggleValue)((0,i.toggleValue)(e))!==e}t.RadioEditor=v},"./columns/action/SmallDialogInputEditor.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SmallDialogInputEditor=void 0;var o=n("./columns/action/BaseInputEditor.js"),r=n("./columns/action/internal/SmallDialogInputElement.js"),i=n("./internal/symbolManager.js"),l=n("./internal/utils.js"),a=(0,i.getSmallDialogInputEditorStateId)(),s=null,u=0;function c(e,t,n,o){var i=function(e){var t=e[a];return t||(t={},l.obj.setReadonly(e,a,t)),t}(e);s||(s=new r.SmallDialogInputElement),i.element||(i.element=s,u++,e.addDisposable({dispose:function(){--u||(null==s||s.dispose(),s=null,i.element=null)}})),s.attach(e,n,t.col,t.row,o)}function f(e){s&&s.detach(e)}var v=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._helperText=o.helperText,e._inputValidator=o.inputValidator,e._validator=o.validator,e._classList=o.classList,e._type=o.type,e}return m(n,[{key:"dispose",value:function(){}},{key:"classList",get:function(){if(this._classList)return Array.isArray(this._classList)?this._classList:[this._classList]},set:function(e){this._classList=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"helperText",get:function(){return this._helperText}},{key:"inputValidator",get:function(){return this._inputValidator}},{key:"validator",get:function(){return this._validator}},{key:"clone",value:function(){return new n(this)}},{key:"onInputCellInternal",value:function(e,t,n){c(e,t,this,n)}},{key:"onOpenCellInternal",value:function(e,t){var n=this;e.doGetCellValue(t.col,t.row,(function(o){c(e,t,n,o)}))}},{key:"onChangeSelectCellInternal",value:function(e,t,n){f()}},{key:"onGridScrollInternal",value:function(e){f(!0)}},{key:"onChangeDisabledInternal",value:function(){f(!0)}},{key:"onChangeReadOnlyInternal",value:function(){f(!0)}},{key:"onSetInputAttrsInternal",value:function(e,t,n){r.SmallDialogInputElement.setInputAttrs(this,e,n)}}]),n}(o.BaseInputEditor);t.SmallDialogInputEditor=v},"./columns/action/action-utils.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toggleValue=t.isReadOnlyRecord=t.isDisabledRecord=void 0;var o=n("./internal/utils.js");function r(e,t,n){if("function"==typeof e){var r=t.getRowRecord(n);return!!(0,o.isPromise)(r)||!!e(r)}return!!e}t.isDisabledRecord=function(e,t,n){return!!t.disabled||r(e,t,n)},t.isReadOnlyRecord=function(e,t,n){return!!t.readOnly||r(e,t,n)},t.toggleValue=function(e){if("number"==typeof e)return 0===e?1:0;if("string"==typeof e){if("false"===e)return"true";if("off"===e)return"on";if(/^0+$/.exec(e))return e.replace(/^(0*)0$/,"$11");if("true"===e)return"false";if("on"===e)return"off";if(/^0*1$/.exec(e))return e.replace(/^(0*)1$/,"$10")}return!e}},"./columns/action/actionBind.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.bindCellKeyAction=t.bindCellClickAction=void 0;var o=n("./internal/utils.js"),r=n("./core/DG_EVENT_TYPE.js");t.bindCellClickAction=function(e,t,n){var i=n.action,l=n.mouseOver,a=n.mouseOut,s=n.area;function u(n,o){return e.getLayoutCellId(n,o)===t}var c=null,d=null;function f(t){d=t,l&&!l({col:t.col,row:t.row})||(e.getElement().style.cursor="pointer")}function h(t){a&&a({col:t.col,row:t.row}),d=null,e.getElement().style.cursor=""}var v=[e.listen(r.DG_EVENT_TYPE.CLICK_CELL,(function(t){u(t.col,t.row)&&((0,o.isPromise)(e.getRowRecord(t.row))||s&&!s(t)||i({col:t.col,row:t.row}))})),e.listen(r.DG_EVENT_TYPE.MOUSEOVER_CELL,(function(t){u(t.col,t.row)&&((0,o.isPromise)(e.getRowRecord(t.row))||(c=t,s&&!s(t)||f(t)))})),e.listen(r.DG_EVENT_TYPE.MOUSEOUT_CELL,(function(e){c&&c.col===e.col&&c.row===e.row&&(d||h(e))}))];return s&&v.push(e.listen(r.DG_EVENT_TYPE.MOUSEMOVE_CELL,(function(e){if(c&&c.col===e.col&&c.row===e.row){var t=s(e);if(d){if(t)return;h(e)}else{if(!t)return;f(e)}}}))),v},t.bindCellKeyAction=function(e,t,n){var i=n.action,l=n.acceptKeys,a=void 0===l?[]:l;return a=[].concat(_(a),[13,32]),[e.listen(r.DG_EVENT_TYPE.KEYDOWN,(function(n){var r;if(-1!==a.indexOf(n.keyCode)&&(!(null===(r=e.keyboardOptions)||void 0===r?void 0:r.moveCellOnEnter)||13!==n.keyCode)){var l,s,u=e.selection.select;l=u.col,s=u.row,e.getLayoutCellId(l,s)===t&&((0,o.isPromise)(e.getRowRecord(u.row))||(i({col:u.col,row:u.row}),o.event.cancel(n.event)))}}))]}},"./columns/action/internal/InlineInputElement.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineInputElement=void 0;var o=n("./internal/EventHandler.js"),r=n("./internal/dom.js"),i=n("./internal/utils.js"),l=n("./columns/action/internal/input-value-handler.js");function a(e,t,n){var o,r=e.classList,i=e.type;r&&(o=n.classList).add.apply(o,_(r)),n.type=i||""}var s=function(){function e(){y(this,e),this._handler=new o.EventHandler,this._input=(n("../src/js/columns/action/internal/InlineInputElement.css"),(0,r.createElement)("input",{classList:"cheetah-grid__inline-input"})),this._bindInputEvents()}return m(e,[{key:"dispose",value:function(){var e,t=this._input;this.detach(),this._handler.dispose(),delete this._input,this._beforePropEditor=null,null===(e=t.parentElement)||void 0===e||e.removeChild(t)}},{key:"attach",value:function(e,t,n,o,r){var i=this,s=this._input,u=this._handler;if(this._beforePropEditor){var c,d=this._beforePropEditor.classList;d&&(c=s.classList).remove.apply(c,_(d))}s.style.font=e.font||"16px sans-serif";var f=e.getAttachCellsArea(e.getCellRange(n,o)),h=f.element,v=f.rect;s.style.top="".concat(v.top.toFixed(),"px"),s.style.left="".concat(v.left.toFixed(),"px"),s.style.width="".concat(v.width.toFixed(),"px"),s.style.height="".concat(v.height.toFixed(),"px"),h.appendChild(s),a(t,0,s),(0,l.setInputValue)(s,r),this._activeData={grid:e,col:n,row:o,editor:t},this._beforePropEditor=t,u.tryWithOffEvents(s,"blur",(function(){!function(){s.focus();var e=s.value.length;try{if(void 0!==s.selectionStart)return s.selectionStart=e,void(s.selectionEnd=e)}catch(e){}if(document.selection){var t=s.createTextRange();t.collapse(),t.moveEnd("character",e),t.moveStart("character",e),t.select()}}()})),this._attaching=!0,setTimeout((function(){delete i._attaching}))}},{key:"detach",value:function(e){if(this._isActive()){var t=this._activeData,n=t.grid,o=t.col,r=t.row,i=this._input;this._handler.tryWithOffEvents(i,"blur",(function(){var e;null===(e=i.parentElement)||void 0===e||e.removeChild(i)}));var l=n.getCellRange(o,r);n.invalidateCellRange(l),e&&n.focus()}this._activeData=null}},{key:"doChangeValue",value:function(){if(this._isActive()){var e=this._input.value,t=this._activeData,n=t.grid,o=t.col,r=t.row;n.doChangeValue(o,r,(function(){return e}))}}},{key:"_isActive",value:function(){var e=this._input;return!(!e||!e.parentElement||!this._activeData)}},{key:"_bindInputEvents",value:function(){var e=this,t=this._handler,n=this._input,o=function(e){return e.stopPropagation()};t.on(n,"click",o),t.on(n,"mousedown",o),t.on(n,"touchstart",o),t.on(n,"dblclick",o),t.on(n,"compositionstart",(function(e){n.classList.add("composition")})),t.on(n,"compositionend",(function(e){n.classList.remove("composition")})),t.on(n,"keydown",(function(t){if(!n.classList.contains("composition")){var o=i.event.getKeyCode(t);13===o?e._onKeydownEnter(t):9===o&&e._onKeydownTab(t)}})),t.on(n,"blur",(function(t){e.doChangeValue(),e.detach()}))}},{key:"_onKeydownEnter",value:function(e){var t;if(this._isActive()&&!this._attaching){var n=this._activeData.grid;this.doChangeValue(),this.detach(!0),i.event.cancel(e),(null===(t=n.keyboardOptions)||void 0===t?void 0:t.moveCellOnEnter)&&n.onKeyDownMove(e)}}},{key:"_onKeydownTab",value:function(e){var t;if(this._isActive()){var n=this._activeData.grid;(null===(t=n.keyboardOptions)||void 0===t?void 0:t.moveCellOnTab)&&(this.doChangeValue(),this.detach(!0),n.onKeyDownMove(e))}}}],[{key:"setInputAttrs",value:function(e,t,n){a(e,0,n)}}]),e}();t.InlineInputElement=s},"./columns/action/internal/InlineMenuElement.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineMenuElement=void 0;var r=o("./internal/dom.js"),i=o("./internal/EventHandler.js"),l=o("./internal/utils.js"),a="cheetah-grid__inline-menu",s="".concat(a,"__menu-item"),u="".concat(a,"--hidden"),c="".concat(a,"--shown"),d="".concat(s,"--empty");function f(e){for(var t=e;t&&!t.classList.contains(s);)if(!(t=t.parentElement)||t.classList.contains(a))return null;return t}function h(e,t,n){n.style.top="".concat(t.top.toFixed(),"px"),n.style.left="".concat(t.left.toFixed(),"px"),n.style.width="".concat(t.width.toFixed(),"px"),n.style.lineHeight="".concat(t.height.toFixed(),"px"),e.appendChild(n)}var v=function(){function e(){var t=this;y(this,e);var n,l=this._handler=new i.EventHandler;this._menu=(o("../src/js/columns/action/internal/InlineMenuElement.css"),(0,r.createElement)("ul",{classList:a})),this._bindMenuEvents();var s=this._deregisterBodyClickListener=function(){return l.off(n)};this._registerBodyClickListener=function(){s(),n=l.on(document.body,"click",t._onBodyClick.bind(t),{capture:!0})}}return m(e,[{key:"dispose",value:function(){var e,t=this._menu;this.detach(),this._handler.dispose(),delete this._menu,this._beforePropEditor=null,null===(e=t.parentElement)||void 0===e||e.removeChild(t)}},{key:"attach",value:function(e,t,o,i,l,a){var f=this._menu;if(this._beforePropEditor){var v,g=this._beforePropEditor.classList;g&&(v=f.classList).remove.apply(v,_(g))}var y=t.options(a);(function(e,t,o,i,l,a,f){var v=t.classList;f.classList.remove(c),f.classList.add(u),(0,r.empty)(f),f.style.font=e.font||"16px sans-serif";var g=null,y=null;a.forEach((function(e,t){var n=function(e,t){var n,o=e.classList,i=e.label,l=e.value,a=e.html,u=(0,r.createElement)("li",{classList:s});if(u.tabIndex=0,u.dataset.valueindex="".concat(t),o&&(n=u.classList).add.apply(n,_(Array.isArray(o)?o:[o])),i){var c=(0,r.createElement)("span",{text:i});u.appendChild(c)}else a&&(0,r.appendHtml)(u,a);return""!==l&&null!=l||u.classList.add(d),u}(e,t);f.appendChild(n),e.value===l&&(y=n,n.dataset.select="select"),n.classList.contains(d)&&(g=n)}));var p,m=y||g||f.children[0];v&&(p=f.classList).add.apply(p,_(v));var C=Array.prototype.slice.call(f.children,0),b=C.indexOf(m),w=e.getAttachCellsArea(e.getCellRange(o,i)),k=w.element,E=w.rect;E.width++,h(k,E,f);for(var j=0,x=0;x<b;x++)j+=C[x].offsetHeight;E.offsetTop(-j),f.style.transformOrigin="center ".concat(j+Math.ceil(C[b].offsetHeight/2),"px 0px"),h(k,E,f);var S,O=f.style.transform;try{f.style.transform="none",S=f.getBoundingClientRect()}finally{f.style.transform=O}var T=S.top,I=T,M=n.innerHeight;S.bottom>M-20&&(I-=S.bottom-M+20),I<20&&(I=20),I!==T&&(E.offsetTop(-(T-I)),f.style.transformOrigin="center",h(k,E,f)),m&&m.focus(),f.classList.remove(u),f.classList.add(c)})(e,t,o,i,l,y,f),this._activeData={grid:e,col:o,row:i,editor:t,options:y},this._beforePropEditor=t,this._registerBodyClickListener()}},{key:"detach",value:function(e){if(this._isActive()){var t=this._activeData,n=t.grid,o=t.col,i=t.row;(a=this._menu).classList.remove(c),a.classList.add(u),(0,r.disableFocus)(a);var l=n.getCellRange(o,i);n.invalidateCellRange(l),e&&n.focus()}var a;this._activeData=null,this._deregisterBodyClickListener()}},{key:"_doChangeValue",value:function(e){if(this._isActive()){var t=this._activeData,n=t.grid,o=t.col,r=t.row,i=t.options[Number(e)];if(i){var l=i.value;n.doChangeValue(o,r,(function(){return l}))}}}},{key:"_isActive",value:function(){var e=this._menu;return!(!e||!e.parentElement||!this._activeData)}},{key:"_bindMenuEvents",value:function(){var e=this,t=this._handler,n=this._menu,o=function(e){return e.stopPropagation()};t.on(n,"mousedown",o),t.on(n,"touchstart",o),t.on(n,"dblclick",o),t.on(n,"click",(function(t){t.stopPropagation();var n=f(t.target);if(n){var o=n.dataset.valueindex;e._doChangeValue(o||""),e.detach(!0)}})),t.on(n,"keydown",(function(t){var o=f(t.target);if(o){var i=l.event.getKeyCode(t);if(13===i)e._onKeydownEnter(n,o,t);else if(27===i)e.detach(!0),l.event.cancel(t);else if(38===i){var a=(0,r.findPrevSiblingFocusable)(o);a&&(a.focus(),l.event.cancel(t))}else if(40===i){var s=(0,r.findNextSiblingFocusable)(o);s&&(s.focus(),l.event.cancel(t))}else 9===i&&e._onKeydownTab(n,o,t)}}))}},{key:"_onBodyClick",value:function(e){var t=e.target;if(t&&!this._menu.contains(t)){if(this._isActive()&&this._activeData.grid.getElement().contains(t))return;this.detach()}}},{key:"_onKeydownEnter",value:function(e,t,n){var o,r=this._isActive()?this._activeData.grid:null,i=t.dataset.valueindex;this._doChangeValue(i||""),this.detach(!0),l.event.cancel(n),r&&(null===(o=r.keyboardOptions)||void 0===o?void 0:o.moveCellOnEnter)&&r.onKeyDownMove(n)}},{key:"_onKeydownTab",value:function(e,t,n){var o;if(this._isActive()){var i=this._activeData.grid;if(null===(o=i.keyboardOptions)||void 0===o?void 0:o.moveCellOnTab){var a=t.dataset.valueindex;return this._doChangeValue(a||""),this.detach(!0),void i.onKeyDownMove(n)}}if(n.shiftKey){if(!(0,r.findPrevSiblingFocusable)(t)){var u=e.querySelectorAll(".".concat(s)),c=u[u.length-1];(0,r.isFocusable)(c)||(c=(0,r.findPrevSiblingFocusable)(c)),c&&(c.focus(),l.event.cancel(n))}}else if(!(0,r.findNextSiblingFocusable)(t)){var d=e.querySelector(".".concat(s));(0,r.isFocusable)(d)||(d=(0,r.findNextSiblingFocusable)(d)),d&&(d.focus(),l.event.cancel(n))}}}]),e}();t.InlineMenuElement=v},"./columns/action/internal/SmallDialogInputElement.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SmallDialogInputElement=void 0;var o=n("./internal/utils.js"),r=n("./internal/EventHandler.js"),i=n("./internal/dom.js"),l=n("./columns/action/internal/input-value-handler.js"),a="cheetah-grid__small-dialog-input",s="".concat(a,"__input"),u="".concat(a,"--hidden"),c="".concat(a,"--shown");function d(e,t){t.tryWithOffEvents(e,"blur",(function(){!function(){e.focus();var t=e.value.length;try{if(void 0!==e.selectionStart)return e.selectionStart=t,void(e.selectionEnd=t)}catch(e){}if(document.selection){var n=e.createTextRange();n.collapse(),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}()}))}function f(e,t,n){var o=e.type;n.type=o||""}var h=function(){function e(){y(this,e),this._handler=new r.EventHandler,this._dialog=function(){n("../src/js/columns/action/internal/SmallDialogInputElement.css");var e=(0,i.createElement)("div",{classList:[a,u]}),t=(0,i.createElement)("input",{classList:s});return t.readOnly=!0,t.tabIndex=-1,e.appendChild(t),e}(),this._input=this._dialog.querySelector(".".concat(s)),this._bindDialogEvents()}return m(e,[{key:"dispose",value:function(){var e=this._dialog;this.detach(),this._handler.dispose(),delete this._dialog,delete this._input,this._beforePropEditor=null,e.parentElement&&e.parentElement.removeChild(e)}},{key:"attach",value:function(e,t,n,r,i){var a=this,s=this._handler,h=this._dialog,v=this._input;this._beforePropEditor&&function(e,t,n,o){var r,i=o.classList;i&&(r=t.classList).remove.apply(r,_(i)),delete t.dataset.helperText,n.type=""}(0,h,v,this._beforePropEditor),delete h.dataset.errorMessage,h.classList.remove(c),h.classList.add(u),v.readOnly=!0,v.tabIndex=0;var g=e.getAttachCellsArea(e.getCellRange(n,r)),y=g.element,p=g.rect;h.style.top="".concat(p.top.toFixed(),"px"),h.style.left="".concat(p.left.toFixed(),"px"),h.style.width="".concat(p.width.toFixed(),"px"),v.style.height="".concat(p.height.toFixed(),"px"),y.appendChild(h),(0,l.setInputValue)(v,i),v.style.font=e.font||"16px sans-serif";var m={grid:e,col:n,row:r,editor:t};this._onInputValue(v,m),o.browser.IE?setTimeout((function(){return d(v,s)})):d(v,s),h.classList.add(c),h.classList.remove(u),v.readOnly=!1,function(e,t,n,o){var r,i=o.classList,l=o.helperText;i&&(r=t.classList).add.apply(r,_(i)),l&&"function"!=typeof l&&(t.dataset.helperText=l),f(o,0,n)}(0,h,v,t),this._activeData=m,this._beforePropEditor=t,this._attaching=!0,setTimeout((function(){delete a._attaching}))}},{key:"detach",value:function(e){if(this._isActive()){var t=this._dialog,n=this._input;t.classList.remove(c),t.classList.add(u),n.readOnly=!0,n.tabIndex=-1;var o=this._activeData,r=o.grid,i=o.col,l=o.row,a=r.getCellRange(i,l);r.invalidateCellRange(a),e&&r.focus()}this._activeData=null,this._beforeValue=null}},{key:"_doChangeValue",value:function(){var e=this;if(!this._isActive())return!1;var t=this._input,n=t.value;return(0,o.then)(this._validate(n),(function(o){if(o&&n===t.value){var r=e._activeData,i=r.grid,l=r.col,a=r.row;return i.doChangeValue(l,a,(function(){return n})),!0}return!1}))}},{key:"_isActive",value:function(){var e=this._dialog;return!(!e||!e.parentElement||!this._activeData)}},{key:"_bindDialogEvents",value:function(){var e=this,t=this._handler,n=this._dialog,r=this._input,i=function(e){return e.stopPropagation()};t.on(n,"click",i),t.on(n,"dblclick",i),t.on(n,"mousedown",i),t.on(n,"touchstart",i),t.on(r,"compositionstart",(function(e){r.classList.add("composition")})),t.on(r,"compositionend",(function(t){r.classList.remove("composition"),e._onInputValue(r)}));var l=function(t){r.classList.contains("composition")||e._onInputValue(r)};t.on(r,"keyup",l),t.on(r,"keypress",l),t.on(r,"keydown",(function(t){if(!r.classList.contains("composition")){var n=o.event.getKeyCode(t);27===n?(e.detach(!0),o.event.cancel(t)):13===n?e._onKeydownEnter(t):e._onInputValue(r)}}))}},{key:"_onKeydownEnter",value:function(e){var t=this;if(!this._attaching){var n=this._input,r=n.value;(0,o.then)(this._doChangeValue(),(function(o){var i;if(o&&r===n.value){var l=t._isActive()?t._activeData.grid:null;t.detach(!0),(null===(i=null==l?void 0:l.keyboardOptions)||void 0===i?void 0:i.moveCellOnEnter)&&l.onKeyDownMove(e)}})),o.event.cancel(e)}}},{key:"_onInputValue",value:function(e,t){var n=this._beforeValue,o=e.value;n!==o&&this._onInputValueChange(o,t),this._beforeValue=o}},{key:"_onInputValueChange",value:function(e,t){t=t||this._activeData;var n=this._dialog,o=t,r=o.grid,i=o.col,l=o.row,a=o.editor;if("function"==typeof a.helperText){var s=a.helperText(e,{grid:r,col:i,row:l});s?n.dataset.helperText=s:delete n.dataset.helperText}"errorMessage"in n.dataset&&this._validate(e,!0)}},{key:"_validate",value:function(e,t){var n=this._dialog,r=this._input,i=this._activeData,l=i.grid,a=i.col,s=i.row,u=i.editor,c="";return u.inputValidator&&(c=u.inputValidator(e,{grid:l,col:a,row:s})),(0,o.then)(c,(function(i){return i||!u.validator||t||(i=u.validator(e,{grid:l,col:a,row:s})),(0,o.then)(i,(function(t){return t&&e===r.value?n.dataset.errorMessage=t:delete n.dataset.errorMessage,!t}))}))}}],[{key:"setInputAttrs",value:function(e,t,n){f(e,0,n)}}]),e}();t.SmallDialogInputElement=h},"./columns/action/internal/input-value-handler.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setInputValue=void 0;var o=n("./internal/EventHandler.js");t.setInputValue=function(e,t){if("number"===e.type&&"-"===t){e.type="";var n=new o.EventHandler,r=function(){n&&(n.dispose(),n=null)};n.once(e,"input",(function(t){e.type="number",r()})),n.once(e,"blur",(function(e){r()}))}e.value=null!=t?t:""}},"./columns/indicator/handlers.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDrawIndicator=void 0;var o=n("./columns/indicator/triangle.js");t.getDrawIndicator=function(e){return"triangle"===e.style?o.drawTriangleIndicator:null}},"./columns/indicator/triangle.js":function(e,t,n){var o;Object.defineProperty(t,"__esModule",{value:!0}),t.drawTriangleIndicator=void 0;var r=(s(o={},0,{themeColor:function(e){return e.theme.indicators.topLeftColor},themeSize:function(e){return e.theme.indicators.topLeftSize},drawPath:function(e,t,n){var o=t.left+1,r=t.top+1;e.moveTo(o,r),e.lineTo(o+n,r),e.lineTo(o,r+n)}}),s(o,1,{themeColor:function(e){return e.theme.indicators.topRightColor},themeSize:function(e){return e.theme.indicators.topRightSize},drawPath:function(e,t,n){var o=t.right-2,r=t.top+1;e.moveTo(o,r),e.lineTo(o-n,r),e.lineTo(o,r+n)}}),s(o,2,{themeColor:function(e){return e.theme.indicators.bottomRightColor},themeSize:function(e){return e.theme.indicators.bottomRightSize},drawPath:function(e,t,n){var o=t.right-2,r=t.bottom-2;e.moveTo(o,r),e.lineTo(o-n,r),e.lineTo(o,r-n)}}),s(o,3,{themeColor:function(e){return e.theme.indicators.bottomLeftColor},themeSize:function(e){return e.theme.indicators.bottomLeftSize},drawPath:function(e,t,n){var o=t.left+1,r=t.bottom-2;e.moveTo(o,r),e.lineTo(o+n,r),e.lineTo(o,r-n)}}),o);t.drawTriangleIndicator=function(e,t,n,o){var i=r[n];i&&o.drawBorderWithClip(e,(function(n){var r=e.getRect(),l=t.color||o.getColor(i.themeColor(o),e.col,e.row,n),a=t.size&&Number(t.size)||i.themeSize(o)||r.height/6;n.fillStyle=l,n.beginPath(),i.drawPath(n,r,a),n.closePath(),n.fill()}))}},"./columns/message/BaseMessage.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMessage=void 0;var o=function(){function e(t){y(this,e),this._messageElement=null,this._grid=t}return m(e,[{key:"dispose",value:function(){this.detachMessageElement(),this._messageElement&&this._messageElement.dispose(),this._messageElement=null}},{key:"_getMessageElement",value:function(){return this._messageElement||(this._messageElement=this.createMessageElementInternal())}},{key:"attachMessageElement",value:function(e,t,n){this._getMessageElement().attach(this._grid,e,t,n)}},{key:"moveMessageElement",value:function(e,t){this._getMessageElement().move(this._grid,e,t)}},{key:"detachMessageElement",value:function(){this._getMessageElement()._detach()}},{key:"drawCellMessage",value:function(e,t,n,o,r,i){this.drawCellMessageInternal(e,t,n,o,r,i)}}]),e}();t.BaseMessage=o},"./columns/message/ErrorMessage.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessage=void 0;var l=i(n("./columns/message/messageUtils.js")),a=n("./columns/message/BaseMessage.js"),s=n("./columns/message/internal/ErrorMessageElement.js"),u=n("./internal/utils.js"),c=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"createMessageElementInternal",value:function(){return new s.ErrorMessageElement}},{key:"drawCellMessageInternal",value:function(e,t,n,o,r,i){var a=n.bgColor,s=t.getSelection().select;(0,u.cellInRange)(r.getCellRange(t.col,t.row),s.col,s.row)&&r.hasFocusGrid()||o.drawBorderWithClip(t,(function(e){l.drawExclamationMarkBox(t,{bgColor:o.getColor(o.theme.messages.errorBgColor,t.col,t.row,e)||"#ff8a80",color:a,boxWidth:o.theme.messages.boxWidth,markHeight:o.theme.messages.markHeight},o)}))}}]),n}(a.BaseMessage);t.ErrorMessage=c},"./columns/message/InfoMessage.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InfoMessage=void 0;var l=i(n("./columns/message/messageUtils.js")),a=n("./columns/message/BaseMessage.js"),s=n("./columns/message/internal/MessageElement.js"),u=n("./internal/utils.js"),c=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"createMessageElementInternal",value:function(){return new s.MessageElement}},{key:"drawCellMessageInternal",value:function(e,t,n,o,r,i){var a=n.bgColor,s=t.getSelection().select;(0,u.cellInRange)(r.getCellRange(t.col,t.row),s.col,s.row)&&r.hasFocusGrid()||o.drawBorderWithClip(t,(function(e){l.drawInformationMarkBox(t,{bgColor:o.getColor(o.theme.messages.infoBgColor,t.col,t.row,e)||"#e0e0e0",color:a,boxWidth:o.theme.messages.boxWidth,markHeight:o.theme.messages.markHeight},o)}))}}]),n}(a.BaseMessage);t.InfoMessage=c},"./columns/message/MessageHandler.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=t.hasMessage=void 0;var o=n("./columns/message/ErrorMessage.js"),r=n("./columns/message/InfoMessage.js"),i=n("./list-grid/LG_EVENT_TYPE.js"),l=n("./columns/message/WarningMessage.js"),a=n("./internal/utils.js"),s={type:"error",message:null},u={error:function(e){return new o.ErrorMessage(e)},info:function(e){return new r.InfoMessage(e)},warning:function(e){return new l.WarningMessage(e)}};function c(e){if(!e||(0,a.isPromise)(e))return s;if("string"==typeof e)return{type:"error",message:e,original:e};var t=e.type||"error";return t&&t in u?{type:t.toLowerCase(),message:e.message,original:e}:{type:"error",message:"".concat(e),original:e}}function d(e){return!!c(e).message}t.hasMessage=d;var f=function(){function e(t,n){y(this,e),this._attachInfo=null,this._grid=t,this._messageInstances={},this._bindGridEvent(t,n)}return m(e,[{key:"dispose",value:function(){var e,t=this._messageInstances;for(var n in t)null===(e=t[n])||void 0===e||e.dispose();delete this._messageInstances,delete this._attachInfo}},{key:"drawCellMessage",value:function(e,t,n,o,r,i){d(e)&&this._getMessageInstanceOfMessage(e).drawCellMessage(c(e),t,n,o,r,i)}},{key:"_attach",value:function(e,t,n){var o=this._attachInfo,r=this._getMessageInstanceOfMessage(n);o&&o.instance!==r&&o.instance.detachMessageElement(),r.attachMessageElement(e,t,c(n)),this._attachInfo={col:e,row:t,instance:r}}},{key:"_move",value:function(e,t){var n=this._attachInfo;n&&n.col===e&&n.row===t&&n.instance.moveMessageElement(e,t)}},{key:"_detach",value:function(){var e=this._attachInfo;e&&(e.instance.detachMessageElement(),this._attachInfo=null)}},{key:"_bindGridEvent",value:function(e,t){var n=this,o=function(o){var r=function(e){d(e)?n._attach(o.col,o.row,e):n._detach()},i=t(o.col,o.row);if((0,a.isPromise)(i))return n._detach(),void i.then((function(t){var n=e.selection.select;n.col===o.col&&n.row===o.row&&r(t)}));r(i)};e.listen(i.LG_EVENT_TYPE.SELECTED_CELL,(function(e){e.selected&&(e.before.col===e.col&&e.before.row===e.row||o(e))})),e.listen(i.LG_EVENT_TYPE.SCROLL,(function(){var t=e.selection.select;n._move(t.col,t.row)})),e.listen(i.LG_EVENT_TYPE.CHANGED_VALUE,(function(t){if(e.hasFocusGrid()){var n=e.selection.select;n.col===t.col&&n.row===t.row&&o(t)}})),e.listen(i.LG_EVENT_TYPE.FOCUS_GRID,(function(t){var n=e.selection.select;o(n)})),e.listen(i.LG_EVENT_TYPE.BLUR_GRID,(function(e){n._detach()}))}},{key:"_getMessageInstanceOfMessage",value:function(e){var t=this._messageInstances,n=c(e).type;return t[n]||(t[n]=u[n](this._grid))}}]),e}();t.MessageHandler=f},"./columns/message/WarningMessage.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WarningMessage=void 0;var l=i(n("./columns/message/messageUtils.js")),a=n("./columns/message/BaseMessage.js"),s=n("./columns/message/internal/WarningMessageElement.js"),u=n("./internal/utils.js"),c=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"createMessageElementInternal",value:function(){return new s.WarningMessageElement}},{key:"drawCellMessageInternal",value:function(e,t,n,o,r,i){var a=n.bgColor,s=t.getSelection().select;(0,u.cellInRange)(r.getCellRange(t.col,t.row),s.col,s.row)&&r.hasFocusGrid()||o.drawBorderWithClip(t,(function(e){l.drawExclamationMarkBox(t,{bgColor:o.getColor(o.theme.messages.warnBgColor,t.col,t.row,e)||"#ff9e80",color:a,boxWidth:o.theme.messages.boxWidth,markHeight:o.theme.messages.markHeight},o)}))}}]),n}(a.BaseMessage);t.WarningMessage=c},"./columns/message/internal/ErrorMessageElement.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessageElement=void 0;var o=n("./columns/message/internal/MessageElement.js"),r="cheetah-grid__error-message-element",i="".concat(r,"__message"),l=function(e){d(o,e);var t=h(o);function o(){var e;return y(this,o),e=t.call(this),n("../src/js/columns/message/internal/ErrorMessageElement.css"),e._rootElement.classList.add(r),e._messageElement.classList.add(i),e}return o}(o.MessageElement);t.ErrorMessageElement=l},"./columns/message/internal/MessageElement.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageElement=void 0;var o=n("./internal/EventHandler.js"),r=n("./internal/dom.js"),i="cheetah-grid__message-element",l="".concat(i,"__message"),a="".concat(i,"--hidden"),s="".concat(i,"--shown"),u="--cheetah-grid-message-element-left-diff",c=function(){function e(){y(this,e),this._handler=new o.EventHandler;var t=this._rootElement=function(){n("../src/js/columns/message/internal/MessageElement.css");var e=(0,r.createElement)("div",{classList:[i,a]}),t=(0,r.createElement)("span",{classList:[l]});return e.appendChild(t),e}();this._messageElement=t.querySelector(".".concat(l))}return m(e,[{key:"dispose",value:function(){this.detach(),this._handler.dispose(),delete this._rootElement,delete this._messageElement}},{key:"attach",value:function(e,t,n,o){var r=this._rootElement,i=this._messageElement;r.classList.remove(s),r.classList.add(a),this._attachCell(e,t,n)?(r.classList.add(s),r.classList.remove(a),i.textContent=o.message,this._adjustStyle(e,t,n)):this._detach()}},{key:"move",value:function(e,t,n){var o=this._rootElement;this._attachCell(e,t,n)?(o.classList.add(s),o.classList.remove(a)):this._detach()}},{key:"detach",value:function(){this._detach()}},{key:"_detach",value:function(){var e=this._rootElement;e.parentElement&&(e.parentElement.removeChild(e),e.classList.remove(s),e.classList.add(a))}},{key:"_attachCell",value:function(e,t,n){var o=this._rootElement,r=e.getAttachCellsArea(e.getCellRange(t,n)),i=r.element,l=r.rect,a=l.bottom,s=l.left,u=l.width,c=e.frozenRowCount,d=e.frozenColCount;if(n>=c&&c>0){if(a<e.getAttachCellsArea(e.getCellRange(t,c-1)).rect.bottom)return!1}else if(a<0)return!1;if(t>=d&&d>0){if(s<e.getAttachCellsArea(e.getCellRange(d-1,n)).rect.right)return!1}else if(s<0)return!1;var f=i.offsetHeight,h=i.offsetWidth;return!(f<a||h<s||(o.style.top="".concat(a.toFixed(),"px"),o.style.left="".concat(s.toFixed(),"px"),o.style.width="".concat(u.toFixed(),"px"),o.parentElement!==i&&i.appendChild(o),0))}},{key:"_adjustStyle",value:function(e,t,n){var o=this._rootElement,r=e.getElement(),i=o.getBoundingClientRect(),l=r.getBoundingClientRect(),a=i.left;if(l.right<i.right&&(a-=i.right-l.right),a<l.left&&(a=l.left),a!==i.left){var s=i.left-a,c=e.getAttachCellsArea(e.getCellRange(t,n)).rect;o.style.left="".concat((c.left-s).toFixed(),"px");var d="".concat(s.toFixed(),"px");o.style.setProperty(u,d)}else o.style.removeProperty(u)}}]),e}();t.MessageElement=c},"./columns/message/internal/WarningMessageElement.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WarningMessageElement=void 0;var o=n("./columns/message/internal/MessageElement.js"),r="cheetah-grid__warning-message-element",i="".concat(r,"__message"),l=function(e){d(o,e);var t=h(o);function o(){var e;return y(this,o),e=t.call(this),n("../src/js/columns/message/internal/WarningMessageElement.css"),e._rootElement.classList.add(r),e._messageElement.classList.add(i),e}return o}(o.MessageElement);t.WarningMessageElement=l},"./columns/message/messageUtils.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.drawInformationMarkBox=t.drawExclamationMarkBox=void 0;var o=n("./internal/Rect.js");t.drawExclamationMarkBox=function(e,t,n){var r=t.bgColor,i=t.color,l=t.boxWidth,a=t.markHeight,s=e.getContext(),u=e.getRect();s.fillStyle=r;var c=u.copy();c.left=c.right-(Number(l)||24),s.fillRect(c.left,c.top,c.width,c.height-1);var d=i,f=Number(a)||20,h=f/5,v=c.left+(c.width-h)/2,g=c.top+(c.height-f)/2;n.fillRectWithState(new o.Rect(v,g,h,f/5*3),e,{fillColor:d}),n.fillRectWithState(new o.Rect(v,g+f/5*4,h,f/5),e,{fillColor:d})},t.drawInformationMarkBox=function(e,t,n){var r=t.bgColor,i=t.color,l=t.boxWidth,a=t.markHeight,s=e.getContext(),u=e.getRect();s.fillStyle=r;var c=u.copy();c.left=c.right-(Number(l)||24),s.fillRect(c.left,c.top,c.width,c.height-1);var d=i,f=Number(a)||20,h=f/5,v=c.left+(c.width-h)/2,g=c.top+(c.height-f)/2;n.fillRectWithState(new o.Rect(v,g,h,f/5),e,{fillColor:d}),n.fillRectWithState(new o.Rect(v,g+f/5*2,h,f/5*3),e,{fillColor:d})}},"./columns/style.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.TreeStyle=t.MenuStyle=t.MultilineTextStyle=t.PercentCompleteBarStyle=t.IconStyle=t.ImageStyle=t.ButtonStyle=t.RadioStyle=t.CheckStyle=t.NumberStyle=t.Style=t.BaseStyle=t.EVENT_TYPE=void 0;var o=n("./columns/style/BaseStyle.js");Object.defineProperty(t,"BaseStyle",{enumerable:!0,get:function(){return o.BaseStyle}});var r=n("./columns/style/ButtonStyle.js");Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return r.ButtonStyle}});var i=n("./columns/style/CheckStyle.js");Object.defineProperty(t,"CheckStyle",{enumerable:!0,get:function(){return i.CheckStyle}});var l=n("./columns/style/IconStyle.js");Object.defineProperty(t,"IconStyle",{enumerable:!0,get:function(){return l.IconStyle}});var a=n("./columns/style/ImageStyle.js");Object.defineProperty(t,"ImageStyle",{enumerable:!0,get:function(){return a.ImageStyle}});var s=n("./columns/style/MenuStyle.js");Object.defineProperty(t,"MenuStyle",{enumerable:!0,get:function(){return s.MenuStyle}});var u=n("./columns/style/MultilineTextStyle.js");Object.defineProperty(t,"MultilineTextStyle",{enumerable:!0,get:function(){return u.MultilineTextStyle}});var c=n("./columns/style/NumberStyle.js");Object.defineProperty(t,"NumberStyle",{enumerable:!0,get:function(){return c.NumberStyle}});var d=n("./columns/style/PercentCompleteBarStyle.js");Object.defineProperty(t,"PercentCompleteBarStyle",{enumerable:!0,get:function(){return d.PercentCompleteBarStyle}});var f=n("./columns/style/RadioStyle.js");Object.defineProperty(t,"RadioStyle",{enumerable:!0,get:function(){return f.RadioStyle}});var h=n("./columns/style/Style.js");Object.defineProperty(t,"Style",{enumerable:!0,get:function(){return h.Style}});var v=n("./columns/style/TreeStyle.js");Object.defineProperty(t,"TreeStyle",{enumerable:!0,get:function(){return v.TreeStyle}});var g=o.BaseStyle.EVENT_TYPE;t.EVENT_TYPE=g,t.of=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.Style;return t?t instanceof o.BaseStyle?t:"function"==typeof t?e(t(n),n,r):n&&t in n?e(n[t],n,r):new r(t):r.DEFAULT}},"./columns/style/BaseStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStyle=void 0;var o,r=n("./core/EventTarget.js"),i={CHANGE_STYLE:"change_style"},l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o.bgColor,i=o.visibility,l=o.indicatorTopLeft,u=o.indicatorTopRight,c=o.indicatorBottomRight,d=o.indicatorBottomLeft;return y(this,n),(e=t.call(this))._bgColor=r,e._visibility=s(i,void 0),e._indicatorTopLeft=a(l),e._indicatorTopRight=a(u),e._indicatorBottomRight=a(c),e._indicatorBottomLeft=a(d),e}return m(n,[{key:"bgColor",get:function(){return this._bgColor},set:function(e){this._bgColor=e,this.doChangeStyle()}},{key:"visibility",get:function(){return this._visibility},set:function(e){var t=s(e,this._visibility);this._visibility!==t&&(this._visibility=t,this.doChangeStyle())}},{key:"indicatorTopLeft",get:function(){return this._indicatorTopLeft},set:function(e){this._indicatorTopLeft=a(e),this.doChangeStyle()}},{key:"indicatorTopRight",get:function(){return this._indicatorTopRight},set:function(e){this._indicatorTopRight=a(e),this.doChangeStyle()}},{key:"indicatorBottomRight",get:function(){return this._indicatorBottomRight},set:function(e){this._indicatorBottomRight=a(e),this.doChangeStyle()}},{key:"indicatorBottomLeft",get:function(){return this._indicatorBottomLeft},set:function(e){this._indicatorBottomLeft=a(e),this.doChangeStyle()}},{key:"doChangeStyle",value:function(){this.fireListeners(i.CHANGE_STYLE)}},{key:"clone",value:function(){return new n(this)}}],[{key:"EVENT_TYPE",get:function(){return i}},{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.EventTarget);function a(e){return"string"==typeof e?{style:e}:e}function s(e,t){return e&&"visible"!==e&&"hidden"!==e?t:e}t.BaseStyle=l},"./columns/style/BranchGraphStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BranchGraphStyle=void 0;var o,r=n("./columns/style/BaseStyle.js"),i=function(e,t){switch(t%3){case 0:return"#979797";case 1:return"#008fb5";case 2:return"#f1c109"}return"#979797"},l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._branchColors=o.branchColors||i,e._margin=o.margin||4,e._circleSize=o.circleSize||16,e._branchLineWidth=o.branchLineWidth||4,e._mergeStyle="straight"===o.mergeStyle?"straight":"bezier",e}return m(n,[{key:"branchColors",get:function(){return this._branchColors},set:function(e){this._branchColors=e,this.doChangeStyle()}},{key:"margin",get:function(){return this._margin},set:function(e){this._margin=e,this.doChangeStyle()}},{key:"circleSize",get:function(){return this._circleSize},set:function(e){this._circleSize=e,this.doChangeStyle()}},{key:"branchLineWidth",get:function(){return this._branchLineWidth},set:function(e){this._branchLineWidth=e,this.doChangeStyle()}},{key:"mergeStyle",get:function(){return this._mergeStyle},set:function(e){this._mergeStyle=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.BaseStyle);t.BranchGraphStyle=l},"./columns/style/ButtonStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStyle=void 0;var o,r=n("./columns/style/Style.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,n),e=t.call(this,(0,i.defaults)(o,{textAlign:"center"}));var r=o.buttonBgColor;return e._buttonBgColor=r,e}return m(n,[{key:"buttonBgColor",get:function(){return this._buttonBgColor},set:function(e){this._buttonBgColor=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.Style);t.ButtonStyle=l},"./columns/style/CheckStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckStyle=void 0;var o,r=n("./columns/style/StdBaseStyle.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,n),e=t.call(this,(0,i.defaults)(o,{textAlign:"center"}));var r=o.uncheckBgColor,l=o.checkBgColor,a=o.borderColor;return e._uncheckBgColor=r,e._checkBgColor=l,e._borderColor=a,e}return m(n,[{key:"uncheckBgColor",get:function(){return this._uncheckBgColor},set:function(e){this._uncheckBgColor=e,this.doChangeStyle()}},{key:"checkBgColor",get:function(){return this._checkBgColor},set:function(e){this._checkBgColor=e,this.doChangeStyle()}},{key:"borderColor",get:function(){return this._borderColor},set:function(e){this._borderColor=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.StdBaseStyle);t.CheckStyle=l},"./columns/style/IconStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IconStyle=void 0;var o,r=n("./columns/style/Style.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),t.call(this,(0,i.defaults)(e,{textAlign:"center"}))}return m(n,[{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.Style);t.IconStyle=l},"./columns/style/ImageStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImageStyle=void 0;var o,r=n("./columns/style/StdBaseStyle.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,(0,i.defaults)(o,{textAlign:"center"})))._imageSizing=o.imageSizing,e._margin=o.margin||4,e}return m(n,[{key:"imageSizing",get:function(){return this._imageSizing},set:function(e){this._imageSizing=e,this.doChangeStyle()}},{key:"margin",get:function(){return this._margin},set:function(e){this._margin=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.StdBaseStyle);t.ImageStyle=l},"./columns/style/MenuStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,n),e=t.call(this,o);var r=o.appearance;return e._appearance=r,e}return m(n,[{key:"appearance",get:function(){return this._appearance||"menulist-button"},set:function(e){this._appearance=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./columns/style/Style.js").Style);t.MenuStyle=r},"./columns/style/MultilineTextStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextStyle=void 0;var o,r=n("./columns/style/Style.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,(0,i.defaults)(o,{textBaseline:"top"})))._lineHeight=o.lineHeight||"1em",e._autoWrapText=o.autoWrapText||!1,e._lineClamp=o.lineClamp,e}return m(n,[{key:"clone",value:function(){return new n(this)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight=e,this.doChangeStyle()}},{key:"lineClamp",get:function(){return this._lineClamp},set:function(e){this._lineClamp=e,this.doChangeStyle()}},{key:"autoWrapText",get:function(){return this._autoWrapText},set:function(e){this._autoWrapText=e,this.doChangeStyle()}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.Style);t.MultilineTextStyle=l},"./columns/style/NumberStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberStyle=void 0;var o,r=n("./columns/style/Style.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),t.call(this,(0,i.defaults)(e,{textAlign:"right"}))}return m(n,[{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.Style);t.NumberStyle=l},"./columns/style/PercentCompleteBarStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PercentCompleteBarStyle=void 0;var o,r=n("./columns/style/Style.js"),i=function(e){return e>80?"#20a8d8":e>50?"#4dbd74":e>20?"#ffc107":"#f86c6b"},l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._barColor=o.barColor||i,e._barBgColor=o.barBgColor||"#f0f3f5",e._barHeight=o.barHeight||3,e}return m(n,[{key:"barColor",get:function(){return this._barColor},set:function(e){this._barColor=e,this.doChangeStyle()}},{key:"barBgColor",get:function(){return this._barBgColor},set:function(e){this._barBgColor=e,this.doChangeStyle()}},{key:"barHeight",get:function(){return this._barHeight},set:function(e){this._barHeight=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.Style);t.PercentCompleteBarStyle=l},"./columns/style/RadioStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RadioStyle=void 0;var o,r=n("./columns/style/StdBaseStyle.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,n),e=t.call(this,(0,i.defaults)(o,{textAlign:"center"}));var r=o.checkColor,l=o.uncheckBorderColor,a=o.checkBorderColor,s=o.uncheckBgColor,u=o.checkBgColor;return e._checkColor=r,e._uncheckBorderColor=l,e._checkBorderColor=a,e._uncheckBgColor=s,e._checkBgColor=u,e}return m(n,[{key:"checkColor",get:function(){return this._checkColor},set:function(e){this._checkColor=e,this.doChangeStyle()}},{key:"uncheckBorderColor",get:function(){return this._uncheckBorderColor},set:function(e){this._uncheckBorderColor=e,this.doChangeStyle()}},{key:"checkBorderColor",get:function(){return this._checkBorderColor},set:function(e){this._checkBorderColor=e,this.doChangeStyle()}},{key:"uncheckBgColor",get:function(){return this._uncheckBgColor},set:function(e){this._uncheckBgColor=e,this.doChangeStyle()}},{key:"checkBgColor",get:function(){return this._checkBgColor},set:function(e){this._checkBgColor=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.StdBaseStyle);t.RadioStyle=l},"./columns/style/StdBaseStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StdBaseStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._textAlign=o.textAlign||"left",e._textBaseline=o.textBaseline||"middle",e._padding=o.padding,e}return m(n,[{key:"textAlign",get:function(){return this._textAlign},set:function(e){this._textAlign=e,this.doChangeStyle()}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline=e,this.doChangeStyle()}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./columns/style/BaseStyle.js").BaseStyle);t.StdBaseStyle=r},"./columns/style/Style.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Style=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._color=o.color,e._font=o.font,e._textOverflow=o.textOverflow||"clip",e}return m(n,[{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.doChangeStyle()}},{key:"font",get:function(){return this._font},set:function(e){this._font=e,this.doChangeStyle()}},{key:"textOverflow",get:function(){return this._textOverflow},set:function(e){this._textOverflow=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./columns/style/StdBaseStyle.js").StdBaseStyle);t.Style=r},"./columns/style/TreeStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TreeStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._lineStyle=o.lineStyle,e._lineColor=o.lineColor,e._lineWidth=o.lineWidth,e._treeIcon=o.treeIcon,e}return m(n,[{key:"clone",value:function(){return new n(this)}},{key:"lineStyle",get:function(){return this._lineStyle},set:function(e){this._lineStyle=e,this.doChangeStyle()}},{key:"lineColor",get:function(){return this._lineColor},set:function(e){this._lineColor=e,this.doChangeStyle()}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(e){this._lineWidth=e,this.doChangeStyle()}},{key:"treeIcon",get:function(){return this._treeIcon},set:function(e){this._treeIcon=e,this.doChangeStyle()}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./columns/style/Style.js").Style);t.TreeStyle=r},"./columns/type.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.TreeColumn=t.MultilineTextColumn=t.MenuColumn=t.BranchGraphColumn=t.IconColumn=t.PercentCompleteBarColumn=t.ImageColumn=t.ButtonColumn=t.RadioColumn=t.CheckColumn=t.NumberColumn=t.Column=void 0;var o=n("./columns/type/BranchGraphColumn.js");Object.defineProperty(t,"BranchGraphColumn",{enumerable:!0,get:function(){return o.BranchGraphColumn}});var r=n("./columns/type/ButtonColumn.js");Object.defineProperty(t,"ButtonColumn",{enumerable:!0,get:function(){return r.ButtonColumn}});var i=n("./columns/type/CheckColumn.js");Object.defineProperty(t,"CheckColumn",{enumerable:!0,get:function(){return i.CheckColumn}});var l=n("./columns/type/Column.js");Object.defineProperty(t,"Column",{enumerable:!0,get:function(){return l.Column}});var a=n("./columns/type/IconColumn.js");Object.defineProperty(t,"IconColumn",{enumerable:!0,get:function(){return a.IconColumn}});var s=n("./columns/type/ImageColumn.js");Object.defineProperty(t,"ImageColumn",{enumerable:!0,get:function(){return s.ImageColumn}});var u=n("./columns/type/MenuColumn.js");Object.defineProperty(t,"MenuColumn",{enumerable:!0,get:function(){return u.MenuColumn}});var c=n("./columns/type/MultilineTextColumn.js");Object.defineProperty(t,"MultilineTextColumn",{enumerable:!0,get:function(){return c.MultilineTextColumn}});var d=n("./columns/type/NumberColumn.js");Object.defineProperty(t,"NumberColumn",{enumerable:!0,get:function(){return d.NumberColumn}});var f=n("./columns/type/PercentCompleteBarColumn.js");Object.defineProperty(t,"PercentCompleteBarColumn",{enumerable:!0,get:function(){return f.PercentCompleteBarColumn}});var h=n("./columns/type/RadioColumn.js");Object.defineProperty(t,"RadioColumn",{enumerable:!0,get:function(){return h.RadioColumn}});var v=n("./columns/type/TreeColumn.js");Object.defineProperty(t,"TreeColumn",{enumerable:!0,get:function(){return v.TreeColumn}});var g={DEFAULT:new l.Column,NUMBER:new d.NumberColumn,CHECK:new i.CheckColumn,RADIO:new h.RadioColumn,BUTTON:new r.ButtonColumn,IMAGE:new s.ImageColumn,MULTILINETEXT:new c.MultilineTextColumn};t.of=function e(t){if(t){if("string"==typeof t){var n=t.toUpperCase();return g[n]||e(null)}return t}return g.DEFAULT}},"./columns/type/BaseColumn.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseColumn=void 0;var l=i(n("./columns/style.js")),a=n("./internal/utils.js"),s=n("./columns/style/BaseStyle.js"),u=n("./internal/animate.js"),c=n("./internal/symbolManager.js"),d=n("./columns/indicator/handlers.js"),f=a.obj.setReadonly,h=(0,c.getColumnFadeinStateId)();function v(e){var t=e[h];return t||f(e,h,t={cells:{}}),t}function g(e,t,n,o,r,i){return function(l){var a=v(e),s="".concat(n,":").concat(t);1===l?delete a.cells[s]:a.cells[s]={opacity:l},i(),r();var u=a.cells[s];if(u){var c=o.getContext();c.globalAlpha=1-u.opacity;try{i()}finally{c.globalAlpha=1}}}}var p=function(){function e(t){y(this,e),this.onDrawCell=this.onDrawCell.bind(this),this._fadeinWhenCallbackInPromise=null==t?void 0:t.fadeinWhenCallbackInPromise}return m(e,[{key:"fadeinWhenCallbackInPromise",get:function(){return this._fadeinWhenCallbackInPromise}},{key:"StyleClass",get:function(){return s.BaseStyle}},{key:"onDrawCell",value:function(e,t,n,o){var r,i=this,s=t.style,c=t.getRecord,d=t.drawCellBase,f=o.getGridCanvasHelper();d();var y,p=c();if((0,a.isPromise)(p))y=p;else if((0,a.isPromise)(e))y=e;else{var m=t.getMessage();(0,a.isPromise)(m)&&(y=m)}if(y){var _=Date.now();return Promise.all([p,e,y.then((function(){return e})).then((function(){return t.getMessage()}))]).then((function(e){var r=e[0],a=e[1],c=e[2];if(n.toCurrentContext().getDrawRect()){var h=Date.now()-_,y=function(){var e=n.toCurrentContext();if(e.getDrawRect()){var u=l.of(s,r,i.StyleClass);i.drawInternal(i.convertInternal(a),e,u,f,o,t),i.drawMessageInternal(c,e,u,f,o,t),i.drawIndicatorsInternal(e,u,f,o,t)}};if(function(e,t){return null!=e.fadeinWhenCallbackInPromise?e.fadeinWhenCallbackInPromise:!!t.configure("fadeinWhenCallbackInPromise")}(i,o)){var p=n.col,m=n.row;h<80?function(e,t,n,o,r,i){var l=v(e);l.activeFadeins?l.activeFadeins.push(g(e,t,n,o,r,i)):r()}(o,p,m,n,y,d):function(e,t,n,o,r,i){var l=v(e),a=[g(e,t,n,o,r,i)];l.activeFadeins=a,(0,u.animate)(500,(function(e){a.forEach((function(t){return t(e)})),1===e&&delete l.activeFadeins}))}(o,p,m,n,y,d)}else y()}}))}var C=l.of(s,p,this.StyleClass);this.drawInternal(this.convertInternal(e),n,C,f,o,t),this.drawMessageInternal(t.getMessage(),n,C,f,o,t),this.drawIndicatorsInternal(n,C,f,o,t);var b=n.col,w=n.row,k="".concat(b,":").concat(w),E=null===(r=o[h])||void 0===r?void 0:r.cells[k];if(E){var j=n.getContext();j.globalAlpha=1-E.opacity;try{d()}finally{j.globalAlpha=1}}}},{key:"convertInternal",value:function(e){return null!=e?e:""}},{key:"drawMessageInternal",value:function(e,t,n,o,r,i){i.messageHandler.drawCellMessage(e,t,n,o,r,i)}},{key:"drawIndicatorsInternal",value:function(e,t,n,o,r){for(var i,l=0,a=[[t.indicatorTopLeft,0],[t.indicatorTopRight,1],[t.indicatorBottomRight,2],[t.indicatorBottomLeft,3]];l<a.length;l++){var s=a[l],u=s[0],c=s[1];u&&(null===(i=(0,d.getDrawIndicator)(u))||void 0===i||i(e,u,c,n,o,r))}}},{key:"bindGridEvent",value:function(e,t){return[]}},{key:"getCopyCellValue",value:function(e,t,n){return e}}]),e}();t.BaseColumn=p},"./columns/type/BranchGraphColumn.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BranchGraphColumn=void 0;var o=n("./internal/utils.js"),r=n("./columns/type/BaseColumn.js"),i=n("./columns/style/BranchGraphStyle.js"),l=(0,n("./internal/symbolManager.js").getBranchGraphColumnStateId)(),a=function e(t){var n=t.fromIndex,o=t.toIndex,r=t.colorIndex,i=t.point;y(this,e),this.fromIndex=n,this.toIndex=o,this.colorIndex=r,this.point=i},s=function(){function e(t){var n=t.index,o=t.commit,r=void 0!==o&&o,i=t.lines,l=void 0===i?[]:i,a=t.tag;y(this,e),this.index=n,this.commit=r,this.lines=l,this.tag=a}return m(e,null,[{key:"mergeLines",value:function(e){var t=e.filter((function(e){return null!=e.fromIndex&&null!=e.toIndex})),n=e.filter((function(e){return null!=e.fromIndex&&null==e.toIndex})),o=e.filter((function(e){return null==e.fromIndex&&null!=e.toIndex}));return n.forEach((function(e){for(var n=0;n<o.length;n++){var r=o[n];if(!r.point&&e.colorIndex===r.colorIndex){e.toIndex=r.toIndex,o.splice(n,1);break}}t.push(e)})),t.concat(o)}},{key:"merge",value:function(t,n){return t?new e({index:t.index,commit:t.commit||n.commit,lines:e.mergeLines(t.lines.concat(n.lines)),tag:t.tag||n.tag}):n}}]),e}();function c(e,t){for(var n=_(e).reverse(),o=0;o<n.length;o++){var r=n[o][t];if(r){r.lines=s.mergeLines(r.lines.concat([new a({toIndex:t,colorIndex:t})]));for(var i=0;i<o;i++)n[i][t]=new s({index:t,lines:[new a({fromIndex:t,toIndex:t,colorIndex:t})]});return!0}}return!1}function f(e,t,n){var r={branches:[],timeline:[]};return function(e,t,n){for(var r,i=e.dataSource,l=[],a=function(e){var n=i.getField(e,t);if((0,o.isPromise)(n)){var a=l.length;l.push(void 0),r=r?r.then((function(){return n})).then((function(e){l[a]=e})):n.then((function(e){l[a]=e}))}else l.push(n)},s=0;s<i.length;s++)a(s);r?r.then((function(){return n(l)})):n(l)}(t,n,(function(t){"top"!==e&&(t=_(t).reverse()),t.forEach((function(e){!function(e,t){var n=e.timeline,r=[];(Array.isArray(t)?t:[t]).forEach((function(t){if(t){var n;if("branch"===t.command){var i=o.obj.isObject(t.branch)?t.branch.from:null,l=o.obj.isObject(t.branch)?t.branch.to:t.branch;n=function(e,t,n){var o=e.timeline,r=e.branches,i=null!=t?r.indexOf(t):-1,l=r.indexOf(n);if(l<0&&(l=r.length,r.push(n)),i<0)return new s({index:l});var u=function(){for(var e=o.length-1;e>=0;e--){var t=o[e][i];if(t&&t.commit)return e}return-1}();if(-1===u)return null;var c,d=u+1,f=new s({index:l,lines:[new a({fromIndex:i,colorIndex:l})]}),h=null;if(d<o.length){var v=o[d];c=v[l]=s.merge(v[l],f)}else c=f,h=f;var g=o[u][i];return g.lines=s.mergeLines(g.lines.concat([new a({toIndex:l,colorIndex:l,point:c})])),h}(e,i,l)}else if("commit"===t.command){var u=t.branch;n=function(e,t){var n=e.timeline,o=e.branches.indexOf(t);if(o<0)return null;var r=new s({index:o,commit:!0});return c(n,o)&&(r.lines=s.mergeLines(r.lines.concat([new a({fromIndex:o,colorIndex:o})]))),r}(e,u)}else if("merge"===t.command){var d=t.branch,f=d.from,h=d.to;n=function(e,t,n){var o=e.timeline,r=e.branches,i=r.indexOf(t),l=r.indexOf(n);if(l<0||i<0)return new s({index:l,commit:!0});var u=new s({index:l,commit:!0,lines:[new a({fromIndex:i,colorIndex:i}),new a({fromIndex:l,colorIndex:l})]}),d=_(o),f=d.pop();return f&&(f[i]=s.merge(f[i],new s({index:l,lines:[new a({toIndex:l,colorIndex:i})]}))),c(d,i)&&f&&(f[i].lines=s.mergeLines(f[i].lines.concat([new a({fromIndex:i,colorIndex:i})]))),c(o,l),u}(e,f,h)}else if("tag"===t.command){var v=t.branch,g=t.tag;n=function(e,t,n){var o=e.branches,r=o.indexOf(t);return r<0&&(r=o.length,o.push(t)),new s({index:r,tag:n})}(e,v,g)}n&&n.index>-1&&(r[n.index]=s.merge(r[n.index],n))}})),n.push(r)}(r,e)}))})),r}var v=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._start=o.start||"bottom",e._cache=null!=o.cache&&o.cache,e}return m(n,[{key:"StyleClass",get:function(){return i.BranchGraphStyle}},{key:"clearCache",value:function(e){delete e[l]}},{key:"onDrawCell",value:function(e,t,o,r){if(this._cache){var i=r[l]||(r[l]=new Map),a=o.col,s=o.row,c=r.getField(a,s);i.has(c)||i.set(c,f(this._start,r,c))}return u(g(n.prototype),"onDrawCell",this).call(this,e,t,o,r)}},{key:"clone",value:function(){return new n(this)}},{key:"start",get:function(){return this._start}},{key:"cache",get:function(){return this._cache}},{key:"drawInternal",value:function(e,t,n,r,i,a){var s,u,c=a.drawCellBase,d=t.col,h=t.row,v=i.getField(d,h),g=null!==(u=this._cache?null===(s=i[l])||void 0===s?void 0:s.get(v):null)&&void 0!==u?u:f(this._start,i,v),y=g.timeline,p=g.branches,m="top"!==this._start?{upLineIndexKey:"toIndex",downLineIndexKey:"fromIndex"}:{upLineIndexKey:"fromIndex",downLineIndexKey:"toIndex"},_=m.upLineIndexKey,C=m.downLineIndexKey,b="top"!==this._start?y[y.length-(h-i.frozenRowCount)-1]:y[h-i.frozenRowCount],w=n.branchColors,k=n.branchLineWidth,E=n.circleSize,j=n.mergeStyle,x=n.margin,S=n.bgColor,O=n.visibility;if(S&&c({bgColor:S}),"hidden"!==O){var T=t.getRect(),I=E/2,M=T.width-2*x;r.drawWithClip(t,(function(e){e.textAlign="left",e.textBaseline="middle";var t=function(e,t,n,o,r,i){var l=Math.max(n/r.length+1,5);i.forEach((function(t){t.forEach((function(t,r){if(!(r<=0)&&t.tag){var i=e.measureText(t.tag).width;l*r+2*o+4+i>n&&(l=Math.max((n-2*o-4-i)/r,5))}}))}));var a=[],s=t;return r.forEach((function(){a.push(Math.ceil(s+o)),s+=l})),a}(e,T.left+x,M,I,p,y),n=T.top+T.height/2;b.map((function(e,t){return e?e.lines.map((function(e){return{colorIndex:e.colorIndex,upLineIndex:e[_],downLineIndex:e[C],pointIndex:t}})):[]})).reduce((function(e,t){return e.concat(t)}),[]).sort((function(e,t){return t.colorIndex-e.colorIndex})).forEach((function(r){var l=t[r.pointIndex];!function(e,t,n,r,i,l,a,s,u){var c=s.branchXPoints,d=s.branchColors,f=s.branchLineWidth,h=s.mergeStyle,v=u.col,g=u.row,y=u.branches;if(null!=i||null!=l){if(t.strokeStyle=(0,o.getOrApply)(d,y[a],a),t.lineWidth=f,t.lineCap="round",t.beginPath(),null!=i){var p=c[i],m=e.getCellRelativeRect(v,g-1),_=m.top+m.height/2;t.moveTo(p,_),"bezier"===h?t.bezierCurveTo(p,(r+_)/2,n,(r+_)/2,n,r):t.lineTo(n,r)}else t.moveTo(n,r);if(null!=l){var C=c[l],b=e.getCellRelativeRect(v,g+1),w=b.top+b.height/2;"bezier"===h?t.bezierCurveTo(n,(r+w)/2,C,(r+w)/2,C,w):t.lineTo(C,w)}t.stroke()}}(i,e,l,n,r.upLineIndex,r.downLineIndex,r.colorIndex,{margin:x,branchXPoints:t,branchLineWidth:k,branchColors:w,mergeStyle:j},{width:M,col:d,row:h,branches:p})})),b.forEach((function(r,i){if(r&&r.commit){var l=t[i];e.fillStyle=(0,o.getOrApply)(w,p[i],i),e.beginPath(),e.arc(l,n,I,0,2*Math.PI,!0),e.fill(),e.closePath()}})),b.forEach((function(r,i){r&&r.tag&&(e.fillStyle=(0,o.getOrApply)(w,p[i],i),e.fillText(r.tag,t[i]+I+4,n))}))}))}}}]),n}(r.BaseColumn);t.BranchGraphColumn=v},"./columns/type/ButtonColumn.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonColumn=void 0;var l=i(n("./columns/type/columnUtils.js")),a=n("./columns/style/ButtonStyle.js"),s=n("./columns/type/Column.js"),c=n("./internal/utils.js"),f=(0,n("./internal/symbolManager.js").getButtonColumnStateId)(),v=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._caption=o.caption,e}return m(n,[{key:"StyleClass",get:function(){return a.ButtonStyle}},{key:"caption",get:function(){return this._caption}},{key:"withCaption",value:function(e){var t=this.clone();return t._caption=e,t}},{key:"clone",value:function(){return new n(this)}},{key:"convertInternal",value:function(e){return this._caption||u(g(n.prototype),"convertInternal",this).call(this,e)}},{key:"getCopyCellValue",value:function(e){return this._caption||e}},{key:"drawInternal",value:function(e,t,n,o,r,i){var a=i.drawCellBase,s=i.getIcon,u=n.textAlign,d=n.textBaseline,h=n.bgColor,v=n.color,g=n.buttonBgColor,y=n.font,p=n.padding,m=n.textOverflow,_=n.visibility;if(h&&a({bgColor:h}),"hidden"!==_){var C=null!=e?String(e):"";o.testFontLoad(y,C,t);var b=t.col,w=t.row,k=r.getCellRange(b,w),E=!1,j=r[f];if(j)if(j.mouseActiveCell&&(0,c.cellInRange)(k,j.mouseActiveCell.col,j.mouseActiveCell.row))E=!0;else{var x=t.getSelection().select;(0,c.cellInRange)(k,x.col,x.row)&&(E=!0)}l.loadIcons(s(),t,o,(function(e,t){o.button(C,t,{textAlign:u,textBaseline:d,bgColor:g,color:v,font:y,padding:p,shadow:E?{color:"rgba(0, 0, 0, 0.48)",blur:6,offsetY:3}:{},textOverflow:m,icons:e})}))}}}]),n}(s.Column);t.ButtonColumn=v},"./columns/type/CheckColumn.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckColumn=void 0;var o=n("./columns/type/BaseColumn.js"),r=n("./columns/style/CheckStyle.js"),i=n("./internal/symbolManager.js"),l=n("./columns/utils/index.js"),a=(0,i.getCheckColumnStateId)(),s=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return r.CheckStyle}},{key:"clone",value:function(){return new n(this)}},{key:"convertInternal",value:function(e){return(0,l.toBoolean)(e)}},{key:"drawInternal",value:function(e,t,n,o,r,i){var l,s=i.drawCellBase,u=n.textAlign,c=n.textBaseline,d=n.padding,f=n.borderColor,h=n.checkBgColor,v=n.uncheckBgColor,g=n.bgColor,y=n.visibility;if(g&&s({bgColor:g}),"hidden"!==y){var p=t.col,m=t.row,_=r.getCellRange(p,m),C="".concat(_.start.col,":").concat(_.start.row),b=null===(l=r[a])||void 0===l?void 0:l.elapsed[C],w={textAlign:u,textBaseline:c,borderColor:f,checkBgColor:h,uncheckBgColor:v,padding:d};null!=b&&(w.animElapsedTime=b),o.checkbox(e,t,w)}}}]),n}(o.BaseColumn);t.CheckColumn=s},"./columns/type/Column.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Column=void 0;var l=i(n("./columns/type/columnUtils.js")),a=n("./columns/type/BaseColumn.js"),s=n("./columns/style/Style.js"),u=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return s.Style}},{key:"clone",value:function(){return new n(this)}},{key:"drawInternal",value:function(e,t,n,o,r,i){var a=i.drawCellBase,s=i.getIcon,u=n.textAlign,c=n.textBaseline,d=n.color,f=n.font,h=n.bgColor,v=n.padding,g=n.textOverflow,y=n.visibility;if(h&&a({bgColor:h}),"hidden"!==y){var p=null!=e?String(e):"";o.testFontLoad(f,p,t),l.loadIcons(s(),t,o,(function(e,t){o.text(p,t,{textAlign:u,textBaseline:c,color:d,font:f,padding:v,textOverflow:g,icons:e})}))}}}]),n}(a.BaseColumn);t.Column=u},"./columns/type/IconColumn.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IconColumn=void 0;var l=i(n("./internal/icons.js")),a=n("./columns/type/Column.js"),s=n("./columns/style/IconStyle.js"),c=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._tagName=o.tagName||"i",e._className=o.className,e._content=o.content,e._name=o.name,e._iconWidth=o.iconWidth,e}return m(n,[{key:"StyleClass",get:function(){return s.IconStyle}},{key:"clone",value:function(){return new n(this)}},{key:"tagName",get:function(){return this._tagName}},{key:"className",get:function(){return this._className}},{key:"content",get:function(){return this._content}},{key:"name",get:function(){return this._name}},{key:"iconWidth",get:function(){return this._iconWidth}},{key:"drawInternal",value:function(e,t,o,r,i,a){var s=Number(e);if(isNaN(s))a.getIcon=function(){return null};else{var c={};l.iconPropKeys.forEach((function(e){c[e]=o[e]})),c.className=this._className,c.tagName=this._tagName,this._content&&(c.content=this._content),c.name=this._name,this._iconWidth&&(c.width=this._iconWidth),a.getIcon=function(){return function(e,t){t===1/0&&(t=0);for(var n=[],o=0;o<t;o++)n.push(e);return n}(c,s)}}u(g(n.prototype),"drawInternal",this).call(this,"",t,o,r,i,a)}}]),n}(a.Column);t.IconColumn=c},"./columns/type/ImageColumn.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImageColumn=void 0;var o=n("./columns/type/BaseColumn.js"),r=n("./columns/style/ImageStyle.js"),i=n("./internal/Rect.js"),l=n("./internal/canvases.js"),a=n("./internal/imgs.js"),s=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return r.ImageStyle}},{key:"onDrawCell",value:function(e,t,o,r){return u(g(n.prototype),"onDrawCell",this).call(this,(i=e,(0,a.getCacheOrLoad)("ImageColumn",50,i)),t,o,r);var i}},{key:"clone",value:function(){return new n(this)}},{key:"drawInternal",value:function(e,t,n,o,r,a){var s=a.drawCellBase,u=n.textAlign,c=n.textBaseline,d=n.padding,f=n.margin,h=n.bgColor,v=n.visibility;h&&s({bgColor:h}),"hidden"!==v&&e&&o.drawWithClip(t,(function(r){r.textAlign=u,r.textBaseline=c;var a=t.getRect();if(d){var s=o.toBoxPixelArray(d,t,void 0),h=a.left+s[3],v=a.top+s[0],g=a.width-s[1]-s[3],y=a.height-s[0]-s[2];a=new i.Rect(h,v,g,y)}if("keep-aspect-ratio"===n.imageSizing){var p=function(e,t,n,o){var r=e,i=t;return r>n&&(i=(r=n)*t/e),i>o&&(r=(i=o)*e/t),{width:r,height:i}}(e.width,e.height,a.width-2*f,a.height-2*f),m=p.width,_=p.height,C=(0,l.calcStartPosition)(r,a,m,_,{offset:f});r.drawImage(e,0,0,e.width,e.height,C.x,C.y,m,_)}else r.drawImage(e,0,0,e.width,e.height,a.left+f,a.top+f,a.width-2*f,a.height-2*f)}))}}]),n}(o.BaseColumn);t.ImageColumn=s},"./columns/type/MenuColumn.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuColumn=void 0;var l=i(n("./columns/type/columnUtils.js")),a=n("./columns/type/BaseColumn.js"),s=n("./columns/style/MenuStyle.js"),c=n("./internal/menu-items.js"),f=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._options=(0,c.normalize)(o.options),e}return m(n,[{key:"StyleClass",get:function(){return s.MenuStyle}},{key:"clone",value:function(){return new n(this)}},{key:"options",get:function(){return this._options}},{key:"withOptions",value:function(e){var t=this.clone();return t._options=(0,c.normalize)(e),t}},{key:"drawInternal",value:function(e,t,n,o,r,i){var a=i.drawCellBase,s=i.getIcon,u=n.textAlign,c=n.textBaseline,d=n.font,f=n.bgColor,h=n.padding,v=n.textOverflow,g=n.appearance,y=n.visibility,p=n.color;if(f&&a({bgColor:f}),"hidden"!==y){var m=this._convertInternal(e),_=null!=m?String(m):"";o.testFontLoad(d,_,t),l.loadIcons(s(),t,o,(function(t,n){var r=o.toBoxPixelArray(h||0,n,d),i=r.slice(0);i[1]+=26;var l=r.slice(0);l[1]+=8,null!=p||null!=e&&""!==e||(p="rgba(0, 0, 0, .38)"),o.text(_,n,{textAlign:u,textBaseline:c,color:p,font:d,padding:i,textOverflow:v,icons:t}),"menulist-button"===g?o.text("",n,{textAlign:"right",textBaseline:c,color:p,font:d,icons:[{path:"M0 2 5 7 10 2z",width:10,color:"rgba(0, 0, 0, .54)"}],padding:l}):"none"!==g&&console.warn("unsupported appearance:".concat(g))}))}}},{key:"convertInternal",value:function(e){return e}},{key:"_convertInternal",value:function(e){for(var t=this._options,o=0;o<t.length;o++){var r=t[o];if(r.value===e){e=r.label;break}}return u(g(n.prototype),"convertInternal",this).call(this,e)}},{key:"getCopyCellValue",value:function(e){return this._convertInternal(e)}}]),n}(a.BaseColumn);t.MenuColumn=f},"./columns/type/MultilineTextColumn.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextColumn=void 0;var l=i(n("./columns/type/columnUtils.js")),a=n("./columns/type/BaseColumn.js"),s=n("./columns/style/MultilineTextStyle.js"),u=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),t.call(this,e)}return m(n,[{key:"StyleClass",get:function(){return s.MultilineTextStyle}},{key:"clone",value:function(){return new n(this)}},{key:"drawInternal",value:function(e,t,n,o,r,i){var a=i.drawCellBase,s=i.getIcon,u=n.textAlign,c=n.textBaseline,d=n.color,f=n.font,h=n.bgColor,v=n.padding,g=n.lineHeight,y=n.autoWrapText,p=n.lineClamp,m=n.textOverflow,_=n.visibility;if(h&&a({bgColor:h}),"hidden"!==_){var C=null!=e?String(e):"",b=C.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");o.testFontLoad(f,C,t),l.loadIcons(s(),t,o,(function(e,t){o.multilineText(b,t,{textAlign:u,textBaseline:c,color:d,font:f,padding:v,lineHeight:g,autoWrapText:y,lineClamp:p,textOverflow:m,icons:e})}))}}}]),n}(a.BaseColumn);t.MultilineTextColumn=u},"./columns/type/NumberColumn.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberColumn=void 0;var o,r=n("./columns/type/Column.js"),i=n("./columns/style/NumberStyle.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._format=o.format,e}return m(n,[{key:"StyleClass",get:function(){return i.NumberStyle}},{key:"clone",value:function(){return new n(this)}},{key:"format",get:function(){return this._format}},{key:"withFormat",value:function(e){var t=this.clone();return t._format=e,t}},{key:"convertInternal",value:function(e){var t=Number(e);if(isNaN(t)){var o=u(g(n.prototype),"convertInternal",this).call(this,e);return null!=o?String(o):""}return(this._format||n.defaultFormat).format(t)}}],[{key:"defaultFormat",get:function(){return o||(o=new Intl.NumberFormat)},set:function(e){o=e}},{key:"defaultFotmat",get:function(){return this.defaultFormat},set:function(e){this.defaultFormat=e}}]),n}(r.Column);t.NumberColumn=l},"./columns/type/PercentCompleteBarColumn.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PercentCompleteBarColumn=void 0;var o=n("./internal/utils.js"),r=n("./columns/type/Column.js"),i=n("./columns/style/PercentCompleteBarStyle.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._min=o.min||0,e._max=o.max||e._min+100,e._formatter=o.formatter||function(e){return e},e}return m(n,[{key:"StyleClass",get:function(){return i.PercentCompleteBarStyle}},{key:"clone",value:function(){return new n(this)}},{key:"min",get:function(){return this.min}},{key:"max",get:function(){return this.max}},{key:"formatter",get:function(){return this.formatter}},{key:"drawInternal",value:function(e,t,r,i,l,a){u(g(n.prototype),"drawInternal",this).call(this,this._formatter(e),t,r,i,l,a);var s=r.barColor,c=r.barBgColor,d=r.barHeight;if("hidden"!==r.visibility){var f=null!=e?String(e):"";o.str.endsWith(f,"%")&&(f=f.slice(0,-1));var h=Number(f);if(!isNaN(h)){var v=h<this._min?0:h>this._max?1:(h-this._min)/(this._max-this._min);i.drawWithClip(t,(function(e){var n=t.getRect(),r=n.width-4-1,i=n.bottom-2-d-1,l=n.left+2;e.fillStyle=(0,o.getOrApply)(c,100*v)||"#f0f3f5",e.beginPath(),e.rect(l,i,r,d),e.fill();var a=Math.min(r*v,r);e.fillStyle=(0,o.getOrApply)(s,100*v)||"#20a8d8",e.beginPath(),e.rect(l,i,a,d),e.fill()}))}}}}]),n}(r.Column);t.PercentCompleteBarColumn=l},"./columns/type/RadioColumn.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RadioColumn=void 0;var o=n("./columns/type/BaseColumn.js"),r=n("./columns/style/RadioStyle.js"),i=n("./internal/symbolManager.js"),l=n("./columns/utils/index.js"),a=(0,i.getRadioColumnStateId)(),s=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return r.RadioStyle}},{key:"clone",value:function(){return new n(this)}},{key:"convertInternal",value:function(e){return(0,l.toBoolean)(e)}},{key:"drawInternal",value:function(e,t,n,o,r,i){var l,s=i.drawCellBase,u=n.textAlign,c=n.textBaseline,d=n.padding,f=n.checkColor,h=n.uncheckBorderColor,v=n.checkBorderColor,g=n.uncheckBgColor,y=n.checkBgColor,p=n.bgColor,m=n.visibility;if(p&&s({bgColor:p}),"hidden"!==m){var _=t.col,C=t.row,b=r.getCellRange(_,C),w="".concat(b.start.col,":").concat(b.start.row),k=null===(l=r[a])||void 0===l?void 0:l.elapsed[w],E={textAlign:u,textBaseline:c,checkColor:f,uncheckBorderColor:h,checkBorderColor:v,uncheckBgColor:g,checkBgColor:y,padding:d};null!=k&&(E.animElapsedTime=k),o.radioButton(e,t,E)}}}]),n}(o.BaseColumn);t.RadioColumn=s},"./columns/type/TreeColumn.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeInfoAt=t.TreeColumn=void 0;var l=i(n("./element/inlines.js")),a=i(n("./columns/type/columnUtils.js")),s=n("./columns/type/Column.js"),c=n("./internal/Rect.js"),f=n("./columns/style/TreeStyle.js"),v=n("./internal/canvases.js"),p=n("./internal/symbolManager.js"),_=n("./internal/utils.js"),C=(0,p.getTreeColumnStateId)(),w=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._cache=null!=o.cache&&o.cache,e}return m(n,[{key:"StyleClass",get:function(){return f.TreeStyle}},{key:"clearCache",value:function(e){var t=e;t[C]&&delete t[C].cache}},{key:"drawnIconActionArea",get:function(){return function(e){var t=e.grid[C];return!!(null==t?void 0:t.drawnIcons)&&t.drawnIcons.area(e)}}},{key:"onDrawCell",value:function(e,t,o,r){var i=r[C]||(r[C]={});if(this._cache&&!i.cache){var l=i.cache||(i.cache=new Map),a=o.col,s=o.row,c=r.getField(a,s);l.has(c)||l.set(c,new E(r,c))}return u(g(n.prototype),"onDrawCell",this).call(this,e,t,o,r)}},{key:"clone",value:function(){return new n(this)}},{key:"cache",get:function(){return this._cache}},{key:"getCopyCellValue",value:function(e){return j(e).caption}},{key:"drawInternal",value:function(e,t,n,o,r,i){var s,u,d=i.drawCellBase,f=i.getIcon,h=n.textAlign,g=n.textBaseline,y=n.bgColor,p=n.padding,m=n.color,_=n.font,b=n.textOverflow;y&&d({bgColor:y});var w=r[C]||(r[C]={});w.drawnIcons&&w.drawnIcons.delete(t);var k=t.col,j=t.row,x=r.getField(k,j),O=(null!==(u=this._cache?null===(s=w.cache)||void 0===s?void 0:s.get(x):null)&&void 0!==u?u:new E(r,x)).getInfo(e,j);o.testFontLoad(_,O.caption,t),a.loadIcons(f(),t,o,(function(e,t){var r=t.getRect(),i=o.toBoxPixelArray(p||0,t,_),a=O.path.length;o.drawWithClip(t,(function(s){var u,d=(0,v.getFontSize)(s,_),f=d.width,y=r.top+i[0],p=r.left+i[3],C=r.height-i[0]-i[2],E=null!=g?g:s.textBaseline||"middle";u="bottom"===E||"alphabetic"===E||"ideographic"===E?y+C-d.height/2:"middle"===g?y+C/2:y+d.height/2;var x=n.treeIcon||o.getStyleProperty(o.theme.tree.treeIcon,k,j,s),T="none"===x?null:"chevron_right"===x||"expand_more"===x?{name:x,width:d.width}:x,I=null;if(T){s.save();try{var M=p+f*(a-1)+f/2,R=l.iconOf(T).width({ctx:s});I=new c.Rect(M-R/2,u-R/2,R,R)}finally{s.restore()}(w.drawnIcons||(w.drawnIcons=new S)).set(t,I)}if("none"!==(n.lineStyle||o.theme.tree.lineStyle)){var B=n.lineWidth||o.theme.tree.lineWidth,P=n.lineColor||o.getColor(o.theme.tree.lineColor,k,j,s);s.save();try{s.strokeStyle=P,s.lineWidth=B,s.lineCap="round",I&&(s.beginPath(),s.rect(0,0,s.canvas.width,s.canvas.height),s.rect(I.right,I.top,-I.width,I.height),s.clip()),O.getLines().forEach((function(e,t){var n=p+f*t,o=n+f/2,i=n+f;0!==e&&(s.beginPath(),1===e?(s.moveTo(o,r.top),s.lineTo(o,r.bottom)):2===e?(s.moveTo(o,r.top),s.lineTo(o,u),s.lineTo(i,u)):3===e?(s.moveTo(i,u),s.lineTo(o,u),s.lineTo(o,r.bottom)):4===e?(s.moveTo(o,r.top),s.lineTo(o,r.bottom),s.moveTo(o,u),s.lineTo(i,u)):5===e?(s.moveTo(n,u),s.lineTo(i,u)):6===e?(s.moveTo(n,u),s.lineTo(i,u),s.moveTo(o,u),s.lineTo(o,r.bottom)):7===e&&(s.moveTo(o,u),s.lineTo(i,u)),s.stroke())}))}finally{s.restore()}}if(T){var L=f*(a-1),D=f,A=i.slice(0);A[3]+=L,A[1]=r.width-D-A[3],o.text("",t,{textAlign:"center",textBaseline:g,color:m,font:_,icons:[T],padding:A})}var F=i.slice(0);F[3]+=a*f,o.text(O.caption,t,{textAlign:h,textBaseline:g,color:m,font:_,padding:F,textOverflow:b,icons:e})}))}))}}]),n}(s.Column);function k(e,t,n,o){var r=t.getField(o+1,n);if(!r||(0,_.isPromise)(r))return!1;var i=x(r);return e.path.length===i.length&&i.every((function(t,n){return t===e.path[n]}))}t.TreeColumn=w,t.getTreeNodeInfoAt=function(e){var t=e.grid,n=e.col,o=e.row,r=t.getField(n,o);if(!r)return{hasChildren:!1,nodeType:"leaf"};var i=t.dataSource,l=t.getRecordIndexByRow(o),a=j(i.getField(l,r)),s=k(a,i,r,l);return{nodeType:s?"branch":a.nodeType||"leaf",hasChildren:s}};var E=function(){function e(t,n){y(this,e),this._cache={},this._grid=t,this._field=n}return m(e,[{key:"getInfo",value:function(e,t){var n=this._field,o=this._grid,r=this._cache,i=o.getRecordIndexByRow(t),l=o.dataSource,a=j(e),s=k(a,l,n,i);return{caption:a.caption,path:a.path,getLines:function(){var e,t=[],o=a.path.slice(0,-1),r=o.map((function(e,r){t.push(e);var a=r===o.length-1;return function(e){var t=u(i,e.length);if(null!=t)return t;for(var o=function(e){for(var t=function(t){var o=l.getField(t,n);if((0,_.isPromise)(o))return{v:{end:t,has:!1}};var r=x(o);if(!r.length)return{v:{end:t,has:!1}};if(e.every((function(e,t){return e===r[t]}))){if(e.length<r.length){var i=u(t,e.length);return null!=i?{v:{end:t,has:i}}:"continue"}return{v:{end:t,has:!0}}}return{v:{end:t,has:!1}}},o=i+1;o<l.length;o++){var r=t(o);if("continue"!==r&&"object"===b(r))return r.v}return{end:l.length,has:!1}}(e),r=i;r<o.end;r++)c(r,e.length,o.has);return o.has}(t)?a?4:1:a?2:0}));return e=s?o.length>0?6:3:o.length>0?5:7,r.concat(e)}};function u(e,t){return(r[e]||(r[e]={hasNextSiblings:[]})).hasNextSiblings[t]}function c(e,t,n){(r[e]||(r[e]={hasNextSiblings:[]})).hasNextSiblings[t]=n}}}]),e}();function j(e){var t,n;if(null!=e){if(Array.isArray(e))return j({path:e});if(Array.isArray(e.path))return{caption:String(null!==(n=null!==(t=e.caption)&&void 0!==t?t:e.path[e.path.length-1])&&void 0!==n?n:""),path:e.path,nodeType:e.nodeType};if("function"==typeof e.path)return j(Object.assign(Object.assign({},e),{path:e.path()}))}return{caption:String(null!=e?e:""),path:[e]}}function x(e){return j(e).path.slice(0,-1)}var S=function(){function e(){y(this,e),this._drawnIcons=new Map}return m(e,[{key:"set",value:function(e,t){this._drawnIcons.set("".concat(e.col,":").concat(e.row),t)}},{key:"delete",value:function(e){this._drawnIcons.delete("".concat(e.col,":").concat(e.row))}},{key:"area",value:function(e){var t=e.col,n=e.row,o=e.pointInDrawingCanvas,r="".concat(t,":").concat(n),i=this._drawnIcons.get(r);return!!i&&i.left<=o.x&&o.x<=i.right&&i.top<=o.y&&o.y<=i.bottom}}]),e}()},"./columns/type/columnUtils.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.loadIcons=void 0;var l=i(n("./internal/icons.js")),a=n("./internal/utils.js");t.loadIcons=function e(t,n,o,r){var i=void 0;if(t)if((0,a.isPromise)(t))t.then((function(t){e(t,n.toCurrentContext(),o,r)}));else{var s=l.toNormalizeArray(t);s.forEach((function(e){e.font&&e.content&&o.testFontLoad(e.font,e.content,n)})),i=s}r(i,n)}},"./columns/utils/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toBoolean=void 0,t.toBoolean=function(e){if("string"==typeof e){if("false"===e)return!1;if("off"===e)return!1;if(/^0+$/.exec(e))return!1}return Boolean(e)}},"./core.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_TYPE=t.DrawGrid=void 0;var o=n("./core/DrawGrid.js");Object.defineProperty(t,"DrawGrid",{enumerable:!0,get:function(){return o.DrawGrid}});var r=n("./core/DG_EVENT_TYPE.js");Object.defineProperty(t,"EVENT_TYPE",{enumerable:!0,get:function(){return r.DG_EVENT_TYPE}})},"./core/DG_EVENT_TYPE.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DG_EVENT_TYPE=void 0,t.DG_EVENT_TYPE={CLICK_CELL:"click_cell",DBLCLICK_CELL:"dblclick_cell",DBLTAP_CELL:"dbltap_cell",MOUSEDOWN_CELL:"mousedown_cell",MOUSEUP_CELL:"mouseup_cell",SELECTED_CELL:"selected_cell",KEYDOWN:"keydown",MOUSEMOVE_CELL:"mousemove_cell",MOUSEENTER_CELL:"mouseenter_cell",MOUSELEAVE_CELL:"mouseleave_cell",MOUSEOVER_CELL:"mouseover_cell",MOUSEOUT_CELL:"mouseout_cell",TOUCHSTART_CELL:"touchstart_cell",CONTEXTMENU_CELL:"contextmenu_cell",INPUT_CELL:"input_cell",PASTE_CELL:"paste_cell",DELETE_CELL:"delete_cell",EDITABLEINPUT_CELL:"editableinput_cell",MODIFY_STATUS_EDITABLEINPUT_CELL:"modify_status_editableinput_cell",RESIZE_COLUMN:"resize_column",SCROLL:"scroll",FOCUS_GRID:"focus_grid",BLUR_GRID:"blur_grid"}},"./core/DrawGrid.js":function(e,t,o){var r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DrawGrid=void 0;var a=l(o("./internal/calc.js")),s=l(o("./internal/hiDPI.js")),c=l(o("./internal/style.js")),f=o("./internal/utils.js"),p=o("./internal/paste-utils.js"),_=o("./core/DG_EVENT_TYPE.js"),C=o("./internal/EventHandler.js"),b=o("./core/EventTarget.js"),w=o("./internal/NumberMap.js"),k=o("./internal/Rect.js"),E=o("./internal/Scrollable.js"),j=o("./internal/canvases.js"),x=o("./internal/symbolManager.js"),S=f.event,O=S.isTouchEvent,T=S.getMouseButtons,I=S.getKeyCode,M=S.cancel,R=(0,x.getProtectedSymbol)();function B(e){navigator.vibrate&&O(e)&&navigator.vibrate(50)}function P(e){var t=this,n=this.getTargetRowAtInternal(e);if(null!=n)return n;var o=Math.min(Math.ceil(e/this[R].defaultRowHeight),this.rowCount-1),r=ne.call(this,0,o);return e>=r?function(n,o){for(var r=o-te.call(t,n),i=t[R].rowCount,l=n;l<i;l++){var a=r+te.call(t,l);if(r<=e&&e<a)return{top:r,row:l};r=a}return null}(o,r):function(n,o){for(var r=o,i=n;i>=0;i--){var l=r-te.call(t,i);if(l<=e&&e<r)return{top:l,row:i};r=l}return null}(o,r)}function L(e,t){for(var n=0,o=e[R].colCount,r=0;r<o;r++){var i=n+Q(e,r);if(i>t)return{left:n,col:r};n=i}return null}function D(e,t){if(!e[R].frozenRowCount)return null;for(var n=e[R].scroll.top,o=e[R].frozenRowCount,r=0;r<o;r++){var i=n+te.call(e,r);if(i>t)return{top:n,row:r};n=i}return null}function A(e,t){if(!e[R].frozenColCount)return null;for(var n=e[R].scroll.left,o=e[R].frozenColCount,r=0;r<o;r++){var i=n+Q(e,r);if(i>t)return{left:n,col:r};n=i}return null}function F(e){if(!e[R].frozenRowCount)return null;for(var t=e[R].scroll.top,n=0,o=e[R].frozenRowCount,r=0;r<o;r++)n+=te.call(e,r);return new k.Rect(e[R].scroll.left,t,e[R].canvas.width,n)}function H(e){if(!e[R].frozenColCount)return null;for(var t=e[R].scroll.left,n=0,o=e[R].frozenColCount,r=0;r<o;r++)n+=Q(e,r);return new k.Rect(t,e[R].scroll.top,n,e[R].canvas.height)}function N(e,t,n,o,r,i,l,a,s,u,c){var d=this,h=new k.Rect(n-a.left,i-a.top,o,l),v=k.Rect.bounds(Math.max(n,u)-a.left,Math.max(i,s)-a.top,h.right,h.bottom);if(v.height>0&&v.width>0){e.save();try{var g=function(e,t,n){return e[R].drawCells[n]?e[R].drawCells[n][t]:null}(this,t,r);g&&g.cancel();var y=new be(t,r,e,h,v,!!g,this[R].selection,c),p=this.onDrawCell(t,r,y);if((0,f.isPromise)(p)){!function(e,t,n,o){e[R].drawCells[n]||(e[R].drawCells[n]={}),e[R].drawCells[n][t]=o}(this,t,r,y);var m=t;y._delayMode(this,(function(){!function(e,t,n){e[R].drawCells[n]&&(delete e[R].drawCells[n][t],0===Object.keys(e[R].drawCells[n]).length&&delete e[R].drawCells[n])}(d,m,r)})),p.then((function(){y.terminate()}))}}finally{e.restore()}}}function V(e,t,n,o,r,i,l,a,s,u,c){var d=e[R].colCount,f=function(n,o){if(n>=d-1&&e[R].canvas.width>o-s.left){var r=o-s.left;t.save(),t.beginPath(),t.fillStyle=e.underlayBackgroundColor||"#F6F6F6",t.rect(r,l-s.top,e[R].canvas.width-r,a),t.fill(),t.restore()}},h=0;if(n){for(var v=n.left,g=e[R].frozenColCount,y=n.col;y<g;y++){var p=Q(e,y);if(N.call(e,t,y,v,p,i,l,a,s,u,0,c),r<=(v+=p))return void f(y,v)}h=v}for(var m=o.left,_=o.col;_<d;_++){var C=Q(e,_);if(N.call(e,t,_,m,C,i,l,a,s,u,h,c),r<=(m+=C))return void f(_,m)}f(d-1,m)}function W(){return this._getInitContext()}function z(e,t){var n=ce(e),o=e[R].rowCount,r=W.call(e),i=P.call(e,Math.max(n.top,t.top))||{top:ne.call(e,0,o-1),row:o},l=L(e,Math.max(n.left,t.left))||{left:ee(e,0,e[R].colCount-1),col:e[R].colCount},a=Math.min(n.bottom,t.bottom),s=Math.min(n.right,t.right),u=D(e,Math.max(n.top,t.top)),c=A(e,Math.max(n.left,t.left)),d=new _e,f=function(t,i){if(t>=o-1&&e[R].canvas.height>i-n.top){var l=i-n.top;r.save(),r.beginPath(),r.fillStyle=e.underlayBackgroundColor||"#F6F6F6",r.rect(0,l,e[R].canvas.width,e[R].canvas.height-l),r.fill(),r.restore()}},h=0;if(u){for(var v=u.top,g=e[R].frozenRowCount,y=u.row;y<g;y++){var p=te.call(e,y);if(V(e,r,c,l,s,y,v,p,n,0,d),a<=(v+=p))return f(y,v),void d.draw(r)}h=v}for(var m=i.top,_=i.row;_<o;_++){var C=te.call(e,_);if(V(e,r,c,l,s,_,m,C,n,h,d),a<=(m+=C))return f(_,m),void d.draw(r)}f(o-1,m),d.draw(r)}function G(e,t){return Math.round(a.toPx(t,e[R].calcWidthContext))}function U(e,t,n){var o=X(e,t);return Math.max(Y(o,n),0)}function Y(e,t){return e?e.min&&e.min>t?e.min:e.max&&e.max<t?e.max:t:t}function K(e,t){return e[R].colWidthsMap.get(t)||e.defaultColWidth}function X(e,t){var n=e[R].colWidthsLimit[t];if(!n)return null;var o={};return n.min&&(o.min=G(e,n.min),o.minDef=n.min),n.max&&(o.max=G(e,n.max),o.maxDef=n.max),o}function q(e){return Boolean(e&&"string"==typeof e&&"auto"===e.toLowerCase())}function $(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e[R].calcWidthContext.full,o=0,r=[],i=0,l=[],a=0;a<e[R].colCount;a++){var s=K(e,a),u=X(e,a);if(q(s))u&&(l.push(u),u.min&&(o+=u.min)),i++;else{var c=s;if(u){var d=G(e,c),f=Y(u,d);d!==f&&(c="".concat(f,"px")),o+=f}r.push(c)}if(t&&o>n)return"0px"}if(l.length&&r.length){var h=(n-G(e,"calc(".concat(r.map((function(e){return"number"==typeof e?"".concat(e,"px"):e})).join(" + "),")")))/i;if(l.forEach((function(e){e.min&&h<e.min?(r.push(e.minDef),i--):e.max&&e.max<h&&(r.push(e.maxDef),i--)})),t&&i<=0)return"".concat(h,"px")}if(r.length){var v=[],g=0;return r.forEach((function(e){"number"==typeof e?g+=e:v.push(e)})),v.push("".concat(g,"px")),"calc((100% - (".concat(v.join(" + "),")) / ").concat(i,")")}return"".concat(100/i,"%")}function Z(e,t){return q(t)?G(e,$(e)):G(e,t)}function Q(e,t){return U(e,t,Z(e,K(e,t)))}function J(e,t,n){null!=n?e[R].colWidthsMap.put(t,n):e[R].colWidthsMap.remove(t)}function ee(e,t,n){var o=Z(e,e.defaultColWidth),r=o*(n-t+1);e[R].colWidthsMap.each(t,n,(function(t,n){r+=U(e,n,Z(e,t))-o}));for(var i=t;i<=n;i++)if(!e[R].colWidthsMap.has(i)){var l=U(e,i,o);l!==o&&(r+=l-o)}return r}function te(e){var t=this.getRowHeightInternal(e);return null!=t?t:this[R].rowHeightsMap.get(e)||this[R].defaultRowHeight}function ne(e,t){var n=this,o=this.getRowsHeightInternal(e,t);if(null!=o)return o;var r=t-e+1,i=this[R].defaultRowHeight*r;return this[R].rowHeightsMap.each(e,t,(function(e){i+=e-n[R].defaultRowHeight})),i}function oe(e){var t=this,n=this.getScrollHeightInternal(e);if(null!=n)return n;var o=this[R].defaultRowHeight*this[R].rowCount;return this[R].rowHeightsMap.each(0,this[R].rowCount-1,(function(e){o+=e-t[R].defaultRowHeight})),o}function re(e){var t,n,o,r=I(e),i=e.shiftKey?this.selection.focus:this.selection.select,l=e.ctrlKey||e.metaKey;if(37===r){if(e.altKey)return;if(l)h(this,null,"W",e.shiftKey);else if(!g.call(this,"W",e.shiftKey))return;M(e)}else if(38===r){if(e.altKey)return;if(l)h(this,"N",null,e.shiftKey);else if(!v.call(this,"N",e.shiftKey))return;M(e)}else if(39===r){if(e.altKey)return;if(l)h(this,null,"E",e.shiftKey);else if(!g.call(this,"E",e.shiftKey))return;M(e)}else if(40===r){if(e.altKey)return;if(l)h(this,"S",null,e.shiftKey);else if(!v.call(this,"S",e.shiftKey))return;M(e)}else if(36===r){if(e.altKey)return;h(this,l?"N":null,"W",e.shiftKey),M(e)}else if(35===r){if(e.altKey)return;h(this,l?"S":null,"E",e.shiftKey),M(e)}else if((null===(t=this.keyboardOptions)||void 0===t?void 0:t.moveCellOnTab)&&9===r){if(e.altKey||l)return;var a=null;if("function"==typeof this.keyboardOptions.moveCellOnTab&&(a=this.keyboardOptions.moveCellOnTab({cell:i,grid:this,event:e})),a)ie.call(this,a.col,a.row,!1);else if(e.shiftKey){if(!g.call(this,"W",!1)){var s=this.getMoveUpRowByKeyDownInternal(i);if(0>s)return;ie.call(this,this.colCount-1,s,!1)}}else if(!g.call(this,"E",!1)){var u=this.getMoveDownRowByKeyDownInternal(i);if(this.rowCount<=u)return;ie.call(this,0,u,!1)}M(e)}else if((null===(n=this.keyboardOptions)||void 0===n?void 0:n.moveCellOnEnter)&&13===r){if(e.altKey||l)return;var c=null;if("function"==typeof this.keyboardOptions.moveCellOnEnter&&(c=this.keyboardOptions.moveCellOnEnter({cell:i,grid:this,event:e})),c)ie.call(this,c.col,c.row,!1);else if(e.shiftKey){if(!v.call(this,"N",!1)){var d=this.getMoveLeftColByKeyDownInternal(i);if(0>d)return;ie.call(this,d,this.rowCount-1,!1)}}else if(!v.call(this,"S",!1)){var f=this.getMoveRightColByKeyDownInternal(i);if(this.colCount<=f)return;ie.call(this,f,Math.min(this.frozenRowCount,this.rowCount-1),!1)}M(e)}else if((null===(o=this.keyboardOptions)||void 0===o?void 0:o.selectAllOnCtrlA)&&65===r){if(e.altKey||e.shiftKey)return;if(!l)return;this.selection.range={start:{col:0,row:0},end:{col:this.colCount-1,row:this.rowCount-1}},this.invalidate(),M(e)}function h(e,t,n,o){var r="S"===t?e.rowCount-1:"N"===t?0:i.row,l="E"===n?e.colCount-1:"W"===n?0:i.col;ie.call(e,l,r,o)}function v(e,t){var n,o=i.col;if("S"===e){if(n=this.getMoveDownRowByKeyDownInternal(i),this.rowCount<=n)return this.makeVisibleCell(o,this.rowCount-1),!1}else if((n=this.getMoveUpRowByKeyDownInternal(i))<0)return this.makeVisibleCell(o,0),!1;return ie.call(this,o,n,t),!0}function g(e,t){var n,o=i.row;if("E"===e){if(n=this.getMoveRightColByKeyDownInternal(i),this.colCount<=n)return this.makeVisibleCell(this.colCount-1,o),!1}else if((n=this.getMoveLeftColByKeyDownInternal(i))<0)return this.makeVisibleCell(0,o),!1;return ie.call(this,n,o,t),!0}}function ie(e,t,n){var o=this.getOffsetInvalidateCells();function r(e){return o>0&&(e.start.col-=o,e.start.row-=o,e.end.col+=o,e.end.row+=o),e}var i=r(this.selection.range),l=this.getCellRangeRect(i);this.selection._setFocusCell(e,t,n),this.makeVisibleCell(e,t),this.focusCell(e,t);var a=r(this.selection.range),s=this.getCellRangeRect(a);s.intersection(l)?z(this,k.Rect.max(s,l)):(z(this,l),z(this,s))}function le(){var e=this[R].focusControl,t=this[R].selection.select,n=t.col,o=t.row,r=this.fireListeners(_.DG_EVENT_TYPE.EDITABLEINPUT_CELL,{col:n,row:o}),i=f.array.findIndex(r,(function(e){return!!e}))>=0;e.editMode=i,i&&(e.storeInputStatus(),e.setDefaultInputStatus(),this.fireListeners(_.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,{col:n,row:o,input:e.input}))}function ae(e,t){var o,r=(o=O(t)?t.changedTouches[0]:t).clientX||o.pageX+n.scrollX,i=o.clientY||o.pageY+n.scrollY,l=e[R].canvas.getBoundingClientRect();return l.right<=r||l.bottom<=i?null:{x:r-l.left+e[R].scroll.left,y:i-l.top+e[R].scroll.top}}function se(){var e=this,t=e[R],n=t.handler,o=t.element,r=t.scrollable,i=function(t){var n=ae(e,t);if(!n)return{};var o=e.getCellAt(n.x,n.y);return o.col<0||o.row<0?{abstractPos:n,cell:o}:{abstractPos:n,cell:o,eventArgs:{col:o.col,row:o.row,event:t}}},l=function(t){if(e[R].disableColumnResize)return!1;var n=e[R].colWidthsLimit[t];return!(n&&n.min&&n.max)||n.max!==n.min};n.on(o,"mousedown",(function(t){var n=i(t),o=n.abstractPos,r=n.eventArgs;if(o){if(r){var a=e.fireListeners(_.DG_EVENT_TYPE.MOUSEDOWN_CELL,r);if(f.array.findIndex(a,(function(e){return!e}))>=0)return}if(1===T(t)||0===t.buttons){var s=ue(e,o.x,o.y);s>=0&&l(s)?e[R].columnResizer.start(s,t):e[R].cellSelector.start(t)}}})),n.on(o,"mouseup",(function(t){if(e.hasListeners(_.DG_EVENT_TYPE.MOUSEUP_CELL)){var n=i(t).eventArgs;n&&e.fireListeners(_.DG_EVENT_TYPE.MOUSEUP_CELL,n)}}));var a=null,s=null,u=null;function c(){u&&(null!=u.timeoutId&&clearTimeout(u.timeoutId),u.timeoutId=setTimeout((function(){u=null}),350))}function d(e){s&&(clearTimeout(s),s=null)}n.on(o,"touchstart",(function(t){null!=(null==u?void 0:u.timeoutId)&&clearTimeout(u.timeoutId),u={};var n=i(t).eventArgs;if(n&&e.fireListeners(_.DG_EVENT_TYPE.TOUCHSTART_CELL,n),a){if(n&&n.col===a.col&&n.row===a.row&&e.fireListeners(_.DG_EVENT_TYPE.DBLTAP_CELL,n),a=null,t.defaultPrevented)return}else a=n,setTimeout((function(){a=null}),350);t.targetTouches.length>1||(s=setTimeout((function(){s=null;var n=ae(e,t);if(n){var o=ue(e,n.x,n.y,15);o>=0&&l(o)?e[R].columnResizer.start(o,t):e[R].cellSelector.start(t)}}),500))})),n.on(o,"touchcancel",(function(e){d(),c()})),n.on(o,"touchmove",d),n.on(o,"touchend",(function(t){c(),s&&(clearTimeout(s),e[R].cellSelector.select(t),s=null)}));var h=!1,v=null,g=null;function y(t,n){e.fireListeners(_.DG_EVENT_TYPE.MOUSEENTER_CELL,Object.assign(Object.assign({},n),{col:t.col,row:t.row})),v=t}function m(t){var n=v;return v=null,n&&e.fireListeners(_.DG_EVENT_TYPE.MOUSELEAVE_CELL,Object.assign(Object.assign({},t),{col:n.col,row:n.row})),n||void 0}function C(t,n){e.fireListeners(_.DG_EVENT_TYPE.MOUSEOVER_CELL,Object.assign(Object.assign({},n),{col:t.col,row:t.row})),g=t}function b(t){var n=g;return g=null,n&&e.fireListeners(_.DG_EVENT_TYPE.MOUSEOUT_CELL,Object.assign(Object.assign({},t),{col:n.col,row:n.row})),n||void 0}var w=r.getElement();n.on(w,"mouseover",(function(e){h=!0})),n.on(w,"mouseout",(function(e){h=!1,b({event:e})})),n.on(o,"mouseleave",(function(e){m({event:e})})),n.on(o,"mousemove",(function(t){if(!u){var n=i(t),r=n.abstractPos,a=n.eventArgs;if(a){var s=v;if(s)if(e.fireListeners(_.DG_EVENT_TYPE.MOUSEMOVE_CELL,a),s.col!==a.col||s.row!==a.row){var c={col:a.col,row:a.row},d=b({related:c,event:t});y(c,{related:m({related:c,event:t}),event:t}),h&&C(c,{related:d,event:t})}else h&&!g&&C({col:a.col,row:a.row},{event:t});else{var f={col:a.col,row:a.row};y(f,{event:t}),h&&C(f,{event:t}),e.fireListeners(_.DG_EVENT_TYPE.MOUSEMOVE_CELL,a)}}else b({event:t}),m({event:t});if(!e[R].columnResizer.moving(t)&&!e[R].cellSelector.moving(t)){var p=o.style;if(r){var w=ue(e,r.x,r.y);w>=0&&l(w)?p.cursor="col-resize":"col-resize"===p.cursor&&(p.cursor="")}else"col-resize"===p.cursor&&(p.cursor="")}}})),n.on(o,"click",(function(t){if(!e[R].columnResizer.lastMoving(t)&&!e[R].cellSelector.lastMoving(t)&&e.hasListeners(_.DG_EVENT_TYPE.CLICK_CELL)){var n=i(t).eventArgs;n&&e.fireListeners(_.DG_EVENT_TYPE.CLICK_CELL,n)}})),n.on(o,"contextmenu",(function(t){if(e.hasListeners(_.DG_EVENT_TYPE.CONTEXTMENU_CELL)){var n=i(t).eventArgs;n&&e.fireListeners(_.DG_EVENT_TYPE.CONTEXTMENU_CELL,n)}})),n.on(o,"dblclick",(function(t){if(e.hasListeners(_.DG_EVENT_TYPE.DBLCLICK_CELL)){var n=i(t).eventArgs;n&&e.fireListeners(_.DG_EVENT_TYPE.DBLCLICK_CELL,n)}})),e[R].focusControl.onKeyDown((function(t){e.fireListeners(_.DG_EVENT_TYPE.KEYDOWN,t)})),e[R].selection.listen(_.DG_EVENT_TYPE.SELECTED_CELL,(function(t){e.fireListeners(_.DG_EVENT_TYPE.SELECTED_CELL,t,t.selected)})),r.onScroll((function(t){!function(e){var t=e[R].scroll.left,n=e[R].scroll.top,o=e[R].scrollable.scrollLeft-t,r=e[R].scrollable.scrollTop-n;e[R].scroll={left:e[R].scrollable.scrollLeft,top:e[R].scrollable.scrollTop};var i=e[R].selection.focus,l=e.isFrozenCell(i.col,i.row);l&&((null==l?void 0:l.col)&&o||(null==l?void 0:l.row)&&r)&&e.setFocusCursor(i.col,i.row);var a=ce(e);if(Math.abs(o)>=a.width||Math.abs(r)>=a.height)z(e,a);else{if(e[R].context.drawImage(e[R].canvas,-o,-r),0!==o){var s=a.copy();if(o<0){if(s.width=-o,e[R].frozenColCount>0){var u=H(e);s.width+=u.width}}else o>0&&(s.left=s.right-o);z(e,s),o>0&&e[R].frozenColCount>0&&z(e,H(e))}if(0!==r){var c=a.copy();if(r<0){if(c.height=-r,e[R].frozenRowCount>0){var d=F(e);c.height+=d.height}}else r>0&&(c.top=c.bottom-r);z(e,c),r>0&&e[R].frozenRowCount>0&&z(e,F(e))}}}(e),e.fireListeners(_.DG_EVENT_TYPE.SCROLL,{event:t})})),e[R].focusControl.onKeyDownMove((function(t){re.call(e,t)})),e.listen("copydata",(function(t){for(var n=e.getCopyRangeInternal(t),o=[],r=n.start.row;r<=n.end.row;r++){for(var i="",l=n.start.col;l<=n.end.col;l++){var a=e.getCopyCellValue(l,r,n),s=void 0;"string"==typeof a?s=a:null==a||"undefined"!=typeof Promise&&a instanceof Promise?s="":(s="".concat(a),/^\[object .*\]$/.exec(s)&&(s="")),i+=/[\t\n]/.test(s)?'"'.concat(s.replace(/"/g,'""'),'"'):s,l<n.end.col&&(i+="\t")}o.push(i)}return o.join("\n")})),e[R].focusControl.onCopy((function(t){return f.array.find(e.fireListeners("copydata",e[R].selection.range),(function(e){return null!=e}))})),e[R].focusControl.onPaste((function(t){var n=t.value,o=t.event,r=e.trimOnPaste,i=(0,p.normalizePasteValue)(n),l=e[R].selection.select,a=l.col,s=l.row,u=/[\r\n\u2028\u2029\t]/.test(i),c=null,d={col:a,row:s,value:n,normalizeValue:r?i.trim():i,multi:u,get rangeBoxValues(){return null!=c?c:c=(0,p.parsePasteRangeBoxValues)(i,{trimOnPaste:r})},event:o};e.fireListeners(_.DG_EVENT_TYPE.PASTE_CELL,d)})),e[R].focusControl.onInput((function(t){var n=e[R].selection.select,o=n.col,r=n.row;e.fireListeners(_.DG_EVENT_TYPE.INPUT_CELL,{col:o,row:r,value:t})})),e[R].focusControl.onDelete((function(t){var n=e[R].selection.select,o=n.col,r=n.row;e.fireListeners(_.DG_EVENT_TYPE.DELETE_CELL,{col:o,row:r,event:t})})),e[R].focusControl.onFocus((function(t){e.fireListeners(_.DG_EVENT_TYPE.FOCUS_GRID,t),e[R].focusedGrid=!0;var n=e[R].selection.select,o=n.col,r=n.row;e.invalidateCell(o,r)})),e[R].focusControl.onBlur((function(t){e.fireListeners(_.DG_EVENT_TYPE.BLUR_GRID,t),e[R].focusedGrid=!1;var n=e[R].selection.select,o=n.col,r=n.row;e.invalidateCell(o,r)}))}function ue(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(e[R].frozenRowCount<=0)return-1;if(!F(e).inPoint(t,n))return-1;var r=e.getCellAt(t,n),i=e.getCellRect(r.col,r.row);return t<i.left+o?r.col-1:i.right-o<t?r.col:-1}function ce(e){var t=e[R],n=t.scroll,o=n.left,r=n.top,i=t.canvas,l=i.width,a=i.height;return new k.Rect(o,r,l,a)}function de(e,t){var n=t.copy(),o=ce(e);return n.offsetLeft(-o.left),n.offsetTop(-o.top),n}var fe=function(){function e(t){y(this,e),this._grid=t,this._handler=new C.EventHandler,this._events={},this._started=!1,this._moved=!1}return m(e,[{key:"moving",value:function(e){return!!this._started}},{key:"lastMoving",value:function(e){if(this.moving(e))return!0;var t=this._mouseEndPoint;if(!t)return!1;var n=ae(this._grid,e);return null!=n&&n.x===t.x&&n.y===t.y}},{key:"_bindMoveAndUp",value:function(e){var t=this,n=this._events,o=this._handler;O(e)?(n.touchmove=o.on(document.body,"touchmove",(function(e){return t._mouseMove(e)}),{passive:!1}),n.touchend=o.on(document.body,"touchend",(function(e){return t._mouseUp(e)})),n.touchcancel=o.on(document.body,"touchcancel",(function(e){return t._mouseUp(e)}))):(n.mousemove=o.on(document.body,"mousemove",(function(e){return t._mouseMove(e)})),n.mouseup=o.on(document.body,"mouseup",(function(e){return t._mouseUp(e)}))),this._started=!0,this._moved=!1}},{key:"_mouseMove",value:function(e){O(e)||1===T(e)?(this._moved=this._moveInternal(e)||this._moved,M(e)):this._mouseUp(e)}},{key:"_moveInternal",value:function(e){return!1}},{key:"_mouseUp",value:function(e){var t=this,n=this._events,o=this._handler;o.off(n.mousemove),o.off(n.touchmove),o.off(n.mouseup),o.off(n.touchend),o.off(n.touchcancel),this._started=!1,this._upInternal(e),this._moved&&(this._mouseEndPoint=ae(this._grid,e),setTimeout((function(){t._mouseEndPoint=null}),10))}},{key:"_upInternal",value:function(e){}},{key:"dispose",value:function(){this._handler.dispose()}}]),e}(),he=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"start",value:function(e){var t=this._getTargetCell(e);t&&(ie.call(this._grid,t.col,t.row,e.shiftKey),this._bindMoveAndUp(e),this._cell=t,M(e),B(e))}},{key:"select",value:function(e){var t=this._getTargetCell(e);t&&(ie.call(this._grid,t.col,t.row,e.shiftKey),this._cell=t)}},{key:"_moveInternal",value:function(e){var t=this._getTargetCell(e);if(!t)return!1;var n=this._cell,o=n.col,r=n.row,i=t.col,l=t.row;if(o===i&&r===l)return!1;var a=this._grid;ie.call(a,i,l,!0);var s=i<o&&0<i?i-1:o<i&&i+1<a.colCount?i+1:i,u=l<r&&0<l?l-1:r<l&&l+1<a.rowCount?l+1:l;return s===i&&u===l||a.makeVisibleCell(s,u),this._cell=t,!0}},{key:"_getTargetCell",value:function(e){var t=this._grid,n=ae(t,e);if(!n)return null;var o=t.getCellAt(n.x,n.y);return o.col<0||o.row<0?null:o}}]),n}(fe),ve=function(e){d(n,e);var t=h(n);function n(e){var o;return y(this,n),(o=t.call(this,e))._x=-1,o._preX=-1,o._invalidateAbsoluteLeft=-1,o._targetCol=-1,o}return m(n,[{key:"start",value:function(e,t){var n;n=O(t)?t.changedTouches[0].pageX:t.pageX,this._x=n,this._preX=0,this._bindMoveAndUp(t),this._targetCol=e,this._invalidateAbsoluteLeft=ee(this._grid,0,e-1),M(t),B(t)}},{key:"_moveInternal",value:function(e){var t=(O(e)?e.changedTouches[0].pageX:e.pageX)-this._x,n=t-this._preX;this._preX=t;var o=this._grid.getColWidth(this._targetCol),r=U(this._grid,this._targetCol,o+n);r<10&&n<0&&(r=10),function(e){for(var t=null,n=0;n<e[R].colCount;n++)q(K(e,n))&&J(e,n,t||(t=$(e,!1)))}(this._grid),J(this._grid,this._targetCol,r);var i=ce(this._grid);return i.left=this._invalidateAbsoluteLeft,z(this._grid,i),this._grid.fireListeners(_.DG_EVENT_TYPE.RESIZE_COLUMN,{col:this._targetCol}),!0}},{key:"_upInternal",value:function(e){var t=this._grid;t.updateScroll()&&t.invalidate()}}]),n}(fe);function ge(e,t){var n=e.type;e.type="",e.value=t,n&&(e.type=n)}var ye=["style","readonly"],pe=function(e){d(o,e);var t=h(o);function o(e,r,i,l){var a;y(this,o),(a=t.call(this))._grid=e,a._scrollable=i;var s,u=a._handler=new C.EventHandler,c=a._input=document.createElement("input");c.classList.add("grid-focus-control"),c.readOnly=!0,r.appendChild(c),u.on(c,"compositionstart",(function(t){c.classList.add("composition"),c.style.font=e.font||"16px sans-serif",a._isComposition=!0,a._compositionEnd&&(clearTimeout(a._compositionEnd),delete a._compositionEnd),e.focus()}));var d=function(e){s=c.value,a._isComposition||(""!==s&&ge(c,""),e||(s=""))},h=function(){a._isComposition=!1,c.classList.remove("composition"),c.style.font="";var e=c.value;d(!1),c.readOnly||a.fireListeners("input",e),a._compositionEnd&&(clearTimeout(a._compositionEnd),delete a._compositionEnd)};return u.on(c,"compositionend",(function(e){a._compositionEnd=setTimeout(h,1)})),l.listen("before_hook",(function(){a._compositionEnd&&h()})),u.on(c,"keypress",(function(e){if(!a._isComposition){if(!c.readOnly&&e.key&&1===e.key.length)if(e.ctrlKey||e.metaKey)"c"===e.key||e.key;else{if(" "===e.key)return;a.fireListeners("input",e.key),M(e)}d(!0)}})),u.on(c,"keydown",(function(e){var t;if(a._isComposition)a._compositionEnd&&(h(),M(e));else{var n=I(e),o=!1,r={keyCode:n,event:e,stopCellMoving:function(){o=!0}};a.fireListeners("keydown",r),!c.readOnly&&s&&a.fireListeners("input",s),o||a.fireKeyDownMove(n,e),!(null===(t=a._grid.keyboardOptions)||void 0===t?void 0:t.deleteCellValueOnDel)||46!==n&&8!==n||a.fireListeners("delete",e),d(!0)}})),u.on(c,"keyup",(function(e){a._isComposition&&a._compositionEnd&&h(),d(!0)})),u.on(c,"input",(function(e){" "!==e.data&&"　"!==e.data||a.fireListeners("input",e.data),d(!0)})),f.browser.IE&&u.on(document,"keydown",(function(e){if(e.target===c){var t=I(e);67===t&&e.ctrlKey?(ge(c,"dummy"),c.select(),setTimeout((function(){ge(c,"")}),100)):86===t&&e.ctrlKey&&c.readOnly&&(c.readOnly=!1,setTimeout((function(){c.readOnly=!0,ge(c,"")}),10))}})),f.browser.Edge&&u.once(document,"keydown",(function(t){var n;if((0,f.isDescendantElement)(r,t.target)){var o=document.createElement("input");e.getElement().appendChild(o),o.focus(),c.focus(),null===(n=o.parentElement)||void 0===n||n.removeChild(o)}})),u.on(document,"paste",(function(e){if((0,f.isDescendantElement)(r,e.target)){var t=void 0;if(f.browser.IE)t=n.clipboardData.getData("Text");else{var o=e.clipboardData;o.items?t=o.getData("text/plain"):-1!==Array.prototype.indexOf.call(o.types,"text/plain")&&(t=o.getData("Text"))}null!=t&&t.length&&a.fireListeners("paste",{value:t,event:e})}})),u.on(document,"copy",(function(e){if(!a._isComposition&&(0,f.isDescendantElement)(r,e.target)){ge(c,"");var t=f.array.find(a.fireListeners("copy"),(function(e){return null!=e}));null!=t&&(M(e),f.browser.IE?n.clipboardData.setData("Text",t):e.clipboardData.setData("text/plain",t))}})),u.on(c,"focus",(function(e){a.fireListeners("focus",e)})),u.on(c,"blur",(function(e){a.fireListeners("blur",e)})),a}return m(o,[{key:"fireKeyDownMove",value:function(e,t){var n,o,r,i=this._keyDownMoveCallback;i&&(this._isComposition||(37===e||38===e||39===e||40===e||36===e||35===e||(null===(n=this._grid.keyboardOptions)||void 0===n?void 0:n.moveCellOnTab)&&9===e||(null===(o=this._grid.keyboardOptions)||void 0===o?void 0:o.moveCellOnEnter)&&13===e||(null===(r=this._grid.keyboardOptions)||void 0===r?void 0:r.selectAllOnCtrlA)&&65===e&&(t.ctrlKey||t.metaKey))&&i(t))}},{key:"onKeyDownMove",value:function(e){this._keyDownMoveCallback=e}},{key:"onKeyDown",value:function(e){return this.listen("keydown",e)}},{key:"onInput",value:function(e){return this.listen("input",e)}},{key:"onDelete",value:function(e){return this.listen("delete",e)}},{key:"onCopy",value:function(e){return this.listen("copy",e)}},{key:"onPaste",value:function(e){return this.listen("paste",e)}},{key:"onFocus",value:function(e){return this.listen("focus",e)}},{key:"onBlur",value:function(e){return this.listen("blur",e)}},{key:"focus",value:function(){this._input.focus()}},{key:"setFocusRect",value:function(e){var t=this._input,n=this._scrollable.calcTop(e.top);t.style.top="".concat((n-c.getScrollBarSize()).toFixed(),"px"),t.style.left="".concat(e.left.toFixed(),"px"),t.style.width="".concat(e.width.toFixed(),"px"),t.style.height="".concat(e.height.toFixed(),"px")}},{key:"editMode",get:function(){return!this._input.readOnly},set:function(e){this._input.readOnly=!e}},{key:"resetInputStatus",value:function(){var e,t=this._input;if(t.classList.contains("grid-focus-control--stored-status")){for(var n=t.classList.contains("composition"),o=t.attributes,r=[],i=0,l=o.length;i<l;i++){var a=o[i];ye.indexOf(a.name)>=0||(null===(e=this._inputStatus)||void 0===e?void 0:e.hasOwnProperty(a.nodeName))||r.push(a.name)}for(var s in r.forEach((function(e){t.removeAttribute(e)})),this._inputStatus)t.setAttribute(s,this._inputStatus[s]);n?(t.classList.add("composition"),t.style.font=this._grid.font||"16px sans-serif"):t.classList.remove("composition"),t.classList.remove("grid-focus-control--stored-status")}}},{key:"storeInputStatus",value:function(){var e=this._input;if(!e.classList.contains("grid-focus-control--stored-status")){for(var t=this._inputStatus={},n=e.attributes,o=0,r=n.length;o<r;o++){var i=n[o];ye.indexOf(i.name)>=0||(t[i.name]=i.value)}e.classList.add("grid-focus-control--stored-status")}}},{key:"setDefaultInputStatus",value:function(){}},{key:"input",get:function(){return this._input}},{key:"dispose",value:function(){u(g(o.prototype),"dispose",this).call(this),this._handler.dispose()}}]),o}(b.EventTarget),me=function(e){d(n,e);var t=h(n);function n(e){var o;return y(this,n),(o=t.call(this))._grid=e,o._sel={col:0,row:0},o._focus={col:0,row:0},o._start={col:0,row:0},o._end={col:0,row:0},o}return m(n,[{key:"range",get:function(){var e=this._start,t=this._end;return{start:{col:Math.min(e.col,t.col),row:Math.min(e.row,t.row)},end:{col:Math.max(e.col,t.col),row:Math.max(e.row,t.row)}}},set:function(e){var t=this;this._callBeforeHooks();var n=Math.min(e.start.col,e.end.col),o=Math.min(e.start.row,e.end.row),r=Math.max(e.start.col,e.end.col),i=Math.max(e.start.row,e.end.row);this._wrapFireSelectedEvent((function(){t._sel={col:n,row:o},t._focus={col:n,row:o},t._start={col:n,row:o},t._end={col:r,row:i},le.call(t._grid)}))}},{key:"focus",get:function(){var e=this._focus;return{col:e.col,row:e.row}}},{key:"select",get:function(){var e=this._sel;return{col:e.col,row:e.row}},set:function(e){var t=this;this._callBeforeHooks(),this._wrapFireSelectedEvent((function(){var n=e.col,o=void 0===n?0:n,r=e.row,i=void 0===r?0:r;t._setSelectCell(o,i),t._setFocusCell(o,i,!0,!0),le.call(t._grid)}))}},{key:"_setSelectCell",value:function(e,t){var n=this;this._wrapFireSelectedEvent((function(){n._sel={col:e,row:t},n._start={col:e,row:t}}))}},{key:"_setFocusCell",value:function(e,t,n,o){var r=this;o||this._callBeforeHooks(),this._wrapFireSelectedEvent((function(){n||r._setSelectCell(e,t),r._focus={col:e,row:t},r._end={col:e,row:t}}))}},{key:"_wrapFireSelectedEvent",value:function(e){if(this._isWrapped)e();else{this._isWrapped=!0;try{var t={col:this._sel.col,row:this._sel.row,selected:!1,after:null};e();var n={col:this._sel.col,row:this._sel.row,selected:!0,before:{col:t.col,row:t.row}};t.after={col:n.col,row:n.row},this.fireListeners(_.DG_EVENT_TYPE.SELECTED_CELL,t),this.fireListeners(_.DG_EVENT_TYPE.SELECTED_CELL,n)}finally{this._isWrapped=!1}}}},{key:"_updateGridRange",value:function(){for(var e=this._grid,t=e.rowCount,n=e.colCount,o=[this._sel,this._focus,this._start,this._end],r=!1,i=0;i<o.length;i++)if(n<=o[i].col||t<=o[i].row){r=!0;break}return!!r&&(this._wrapFireSelectedEvent((function(){o.forEach((function(e){e.col=Math.min(n-1,e.col),e.row=Math.min(t-1,e.row)}))})),!0)}},{key:"_callBeforeHooks",value:function(){this.fireListeners("before_hook")}}]),n}(b.EventTarget),_e=function(){function e(){y(this,e),this._layers={}}return m(e,[{key:"addDraw",value:function(e,t){(this._layers[e]||(this._layers[e]=new Ce(e))).addDraw(t)}},{key:"draw",value:function(e){var t=[];for(var n in this._layers)t.push(this._layers[n]);t.sort((function(e,t){return e.level-t.level})),t.forEach((function(t){return t.draw(e)}))}}]),e}(),Ce=function(){function e(t){y(this,e),this._level=t,this._list=[]}return m(e,[{key:"level",get:function(){return this._level}},{key:"addDraw",value:function(e){this._list.push(e)}},{key:"draw",value:function(e){this._list.forEach((function(t){e.save();try{t(e)}finally{e.restore()}}))}}]),e}(),be=function(){function e(t,n,o,r,i,l,a,s){y(this,e),this._rectFilter=null,this._col=t,this._row=n,this._mode=0,this._ctx=o,this._rect=r,this._drawRect=i,this._drawing=l,this._selection=a,this._drawLayers=s,this._childContexts=[]}return m(e,[{key:"drawing",get:function(){return 0!==this._mode||this._drawing}},{key:"row",get:function(){return this._row}},{key:"col",get:function(){return this._col}},{key:"cancel",value:function(){this._cancel=!0,this._childContexts.forEach((function(e){e.cancel()}))}},{key:"getSelection",value:function(){return{select:this._selection.select,range:this._selection.range}}},{key:"getContext",value:function(){return 0===this._mode?this._ctx:W.call(this._grid)}},{key:"getRect",value:function(){var e=this._rectFilter;return e?e(this._getRectInternal()):this._getRectInternal()}},{key:"setRectFilter",value:function(e){this._rectFilter=e}},{key:"getDrawRect",value:function(){if(this._cancel)return null;if(0===this._mode)return this._drawRect;if(this._isOutOfRange())return null;var e=this._grid.getCellRect(this._col,this._row);return this._toRelativeDrawRect(e)}},{key:"_isOutOfRange",value:function(){var e=this._grid,t=e.colCount,n=e.rowCount;return t<=this._col||n<=this._row}},{key:"toCurrentContext",value:function(){if(0===this._mode)return this;var t=this._grid.getCellRect(this._col,this._row),n=de(this._grid,t),o=this._isOutOfRange()?null:this._toRelativeDrawRect(t),r=new e(this._col,this._row,this.getContext(),n,o,this.drawing,this._selection,this._drawLayers);return r.toCurrentContext=this.toCurrentContext.bind(this),this._childContexts.push(r),this._cancel&&r.cancel(),r._rectFilter=this._rectFilter,r}},{key:"addLayerDraw",value:function(e,t){this._drawLayers.addDraw(e,t)}},{key:"_toRelativeDrawRect",value:function(e){var t=ce(this._grid),n=e.copy();if(!n.intersection(t))return null;var o=this._grid,r=o.isFrozenCell(this._col,this._row);if(o.frozenColCount>=0&&(!r||!r.col)){var i=o.getCellRect(o.frozenColCount-1,this._row);n=k.Rect.bounds(Math.max(n.left,i.right),n.top,n.right,n.bottom)}if(o.frozenRowCount>=0&&(!r||!r.row)){var l=o.getCellRect(this._col,o.frozenRowCount-1);n=k.Rect.bounds(n.left,Math.max(n.top,l.bottom),n.right,n.bottom)}return n.intersection(t)?(n.offsetLeft(-t.left),n.offsetTop(-t.top),n):null}},{key:"_delayMode",value:function(e,t){this._mode=1,this._ctx=null,this._rect=null,this._drawRect=null,this._grid=e,this._onTerminate=t}},{key:"terminate",value:function(){var e;0!==this._mode&&(null===(e=this._onTerminate)||void 0===e||e.call(this))}},{key:"_getRectInternal",value:function(){return 0===this._mode||this._rect?this._rect:this._grid.getCellRelativeRect(this._col,this._row)}}]),e}(),we=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,n),e=t.call(this);var r,i=o.rowCount,l=void 0===i?10:i,a=o.colCount,u=void 0===a?10:a,d=o.frozenColCount,f=void 0===d?0:d,h=o.frozenRowCount,g=void 0===h?0:h,p=o.defaultRowHeight,m=void 0===p?40:p,_=o.defaultColWidth,b=void 0===_?80:_,k=o.font,x=o.underlayBackgroundColor,S=o.keyboardOptions,O=o.parentElement,T=o.disableColumnResize,I=o.trimOnPaste,M=e[R]={};return c.initDocument(),M.element=((r=document.createElement("div")).classList.add("cheetah-grid"),r),M.scrollable=new E.Scrollable,M.handler=new C.EventHandler,M.selection=new me(v(e)),M.focusControl=new pe(v(e),M.scrollable.getElement(),M.scrollable,M.selection),M.canvas=s.transform(document.createElement("canvas")),M.context=M.canvas.getContext("2d",{alpha:!1}),M.rowCount=l,M.colCount=u,M.frozenColCount=f,M.frozenRowCount=g,M.defaultRowHeight=m,M.defaultColWidth=b,M.font=k,M.underlayBackgroundColor=x,M.keyboardOptions=S,M.disableColumnResize=T,M.trimOnPaste=null!=I&&I,M.rowHeightsMap=new w.NumberMap,M.colWidthsMap=new w.NumberMap,M.colWidthsLimit={},M.calcWidthContext={_:M,get full(){return this._.canvas.width},get em(){return(0,j.getFontSize)(this._.context,this._.font).width}},M.columnResizer=new ve(v(e)),M.cellSelector=new he(v(e)),M.drawCells={},M.cellTextOverflows={},M.focusedGrid=!1,M.element.appendChild(M.canvas),M.element.appendChild(M.scrollable.getElement()),M.scroll={left:0,top:0},e.updateScroll(),O?(O.appendChild(M.element),e.updateSize()):e.updateSize(),se.call(v(e)),e.bindEventsInternal(),e}return m(n,[{key:"getElement",value:function(){return this[R].element}},{key:"canvas",get:function(){return this[R].canvas}},{key:"focus",value:function(){var e=this[R].selection.select,t=e.col,n=e.row;this.focusCell(t,n)}},{key:"hasFocusGrid",value:function(){return this[R].focusedGrid}},{key:"selection",get:function(){return this[R].selection}},{key:"rowCount",get:function(){return this[R].rowCount},set:function(e){if(this[R].rowCount=e,this.updateScroll(),this[R].selection._updateGridRange()){var t=this[R].selection.focus,n=t.col,o=t.row;this.makeVisibleCell(n,o),this.setFocusCursor(n,o)}}},{key:"colCount",get:function(){return this[R].colCount},set:function(e){if(this[R].colCount=e,this.updateScroll(),this[R].selection._updateGridRange()){var t=this[R].selection.focus,n=t.col,o=t.row;this.makeVisibleCell(n,o),this.setFocusCursor(n,o)}}},{key:"frozenColCount",get:function(){return this[R].frozenColCount},set:function(e){this[R].frozenColCount=e}},{key:"frozenRowCount",get:function(){return this[R].frozenRowCount},set:function(e){this[R].frozenRowCount=e}},{key:"defaultRowHeight",get:function(){return this[R].defaultRowHeight},set:function(e){this[R].defaultRowHeight=e}},{key:"defaultColWidth",get:function(){return this[R].defaultColWidth},set:function(e){this[R].defaultColWidth=e}},{key:"font",get:function(){return this[R].font},set:function(e){this[R].font=e}},{key:"underlayBackgroundColor",get:function(){return this[R].underlayBackgroundColor},set:function(e){this[R].underlayBackgroundColor=e}},{key:"trimOnPaste",get:function(){return this[R].trimOnPaste},set:function(e){this[R].trimOnPaste=e}},{key:"keyboardOptions",get:function(){var e;return null!==(e=this[R].keyboardOptions)&&void 0!==e?e:null},set:function(e){this[R].keyboardOptions=null!=e?e:void 0}},{key:"configure",value:function(e,t){var n=this[R].config||(this[R].config={});return null!=t&&(n[e]=t),n[e]}},{key:"updateSize",value:function(){var e=this[R].canvas;e.style.width="",e.style.height="";var t=Math.floor(e.offsetWidth||e.parentElement.offsetWidth-c.getScrollBarSize()),n=Math.floor(e.offsetHeight||e.parentElement.offsetHeight-c.getScrollBarSize());e.width=t,e.height=n,e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px");var o=this[R].selection.focus;this[R].focusControl.setFocusRect(this.getCellRect(o.col,o.row))}},{key:"updateScroll",value:function(){var e=this[R].scrollable,t=oe.call(this),n=ee(this,0,this[R].colCount-1);if(t===e.scrollHeight&&n===e.scrollWidth)return!1;e.setScrollSize(n,t),this[R].scroll={left:e.scrollLeft,top:e.scrollTop};var o=this[R].selection.focus;return this[R].focusControl.setFocusRect(this.getCellRect(o.col,o.row)),!0}},{key:"getRowHeight",value:function(e){return te.call(this,e)}},{key:"setRowHeight",value:function(e,t){!function(e,t,n){null!=n?e[R].rowHeightsMap.put(t,n):e[R].rowHeightsMap.remove(t)}(this,e,t)}},{key:"getColWidth",value:function(e){return Q(this,e)}},{key:"setColWidth",value:function(e,t){J(this,e,t)}},{key:"getMaxColWidth",value:function(e){var t=this[R].colWidthsLimit[e];return t&&t.max||void 0}},{key:"setMaxColWidth",value:function(e,t){var n=this[R].colWidthsLimit[e]||(this[R].colWidthsLimit[e]={});null!=t?n.max=t:delete n.max}},{key:"getMinColWidth",value:function(e){var t=this[R].colWidthsLimit[e];return t&&t.min||void 0}},{key:"setMinColWidth",value:function(e,t){var n=this[R].colWidthsLimit[e]||(this[R].colWidthsLimit[e]={});null!=t?n.min=t:delete n.min}},{key:"getCellRect",value:function(e,t){var n=this.isFrozenCell(e,t),o=ee(this,0,e-1),r=Q(this,e);n&&n.col&&(o+=this[R].scroll.left);var i=ne.call(this,0,t-1),l=te.call(this,t);return n&&n.row&&(i+=this[R].scroll.top),new k.Rect(o,i,r,l)}},{key:"getCellRelativeRect",value:function(e,t){return de(this,this.getCellRect(e,t))}},{key:"getCellsRect",value:function(e,t,n,o){var r=this.isFrozenCell(e,t),i=this.isFrozenCell(n,o),l=ee(this,0,e-1),a=ee(this,e,n);if(r&&r.col){var s=this[R].scroll.left;l+=s,i&&i.col||(a-=s,a=Math.max(a,ee(this,e,this.frozenColCount-1)))}var u=ne.call(this,0,t-1),c=ne.call(this,t,o);if(r&&r.row){var d=this[R].scroll.top;u+=d,i&&i.row||(c-=d,c=Math.max(c,ee(this,t,this.frozenRowCount-1)))}return new k.Rect(l,u,a,c)}},{key:"getCellRangeRect",value:function(e){return this.getCellsRect(e.start.col,e.start.row,e.end.col,e.end.row)}},{key:"isFrozenCell",value:function(e,t){var n=this[R],o=n.frozenRowCount,r=n.frozenColCount,i=o>0&&t<o,l=r>0&&e<r;return i||l?{row:i,col:l}:null}},{key:"getRowAt",value:function(e){var t=D(this,e);if(t)return t.row;var n=P.call(this,e);return n?n.row:-1}},{key:"getColAt",value:function(e){var t=A(this,e);if(t)return t.col;var n=L(this,e);return n?n.col:-1}},{key:"getCellAt",value:function(e,t){return{row:this.getRowAt(t),col:this.getColAt(e)}}},{key:"makeVisibleCell",value:function(e,t){var n=this.isFrozenCell(e,t);if(!(n&&n.col&&n.row)){var o=this.getCellRect(e,t),r=function(e){var t=0;e[R].frozenColCount>0&&(t=H(e).width);var n=0;return e[R].frozenRowCount>0&&(n=F(e).height),new k.Rect(e[R].scrollable.scrollLeft+t,e[R].scrollable.scrollTop+n,e[R].canvas.width-t,e[R].canvas.height-n)}(this);if(!r.contains(o)){var i=this[R].scrollable;n&&n.col||(o.left<r.left?i.scrollLeft-=r.left-o.left:r.right<o.right&&(i.scrollLeft-=r.right-o.right)),n&&n.row||(o.top<r.top?i.scrollTop-=r.top-o.top:r.bottom<o.bottom&&(i.scrollTop-=r.bottom-o.bottom))}}}},{key:"setFocusCursor",value:function(e,t){var n=this[R].focusControl,o=n.editMode;n.setFocusRect(this.getCellRect(e,t)),le.call(this),o&&!n.editMode&&n.resetInputStatus()}},{key:"focusCell",value:function(e,t){this.setFocusCursor(e,t),this[R].focusControl.focus()}},{key:"invalidateCell",value:function(e,t){this.invalidateGridRect(e,t)}},{key:"invalidateGridRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r=this.getOffsetInvalidateCells();r>0&&(e-=r,t-=r,n+=r,o+=r);var i=ce(this),l=this.getCellsRect(e,t,n,o),a=i.intersection(l);if(a){var s=this[R],u=s.frozenColCount,c=s.frozenRowCount;if(u>0&&n>=u){var d=H(this);d.intersection(a)&&(a.left=Math.min(d.right-1,a.left))}if(c>0&&o>=c){var f=F(this);f.intersection(a)&&(a.top=Math.min(f.bottom-1,a.top))}z(this,a)}}},{key:"invalidateCellRange",value:function(e){this.invalidateGridRect(e.start.col,e.start.row,e.end.col,e.end.row)}},{key:"invalidate",value:function(){z(this,ce(this))}},{key:"visibleRowCount",get:function(){var e=this.frozenRowCount,t=ce(this),n=e>0?t.top+ne.call(this,0,e-1):t.top,o=P.call(this,n);if(!o)return 0;for(var r=Math.max(o.top>=n?o.row:o.row+1,e),i=ne.call(this,0,r-1),l=0,a=this.rowCount,s=r;s<a;s++){var u=i+te.call(this,s);if(t.bottom<u)break;l++,i=u}return l}},{key:"visibleColCount",get:function(){var e=this.frozenColCount,t=ce(this),n=e>0?t.left+ee(this,0,e-1):t.left,o=L(this,n);if(!o)return 0;for(var r=Math.max(o.left>=n?o.col:o.col+1,e),i=ee(this,0,r-1),l=0,a=this.colCount,s=r;s<a;s++){var u=i+Q(this,s);if(t.right<u)break;l++,i=u}return l}},{key:"topRow",get:function(){var e=this.frozenRowCount,t=ce(this),n=e>0?t.top+ne.call(this,0,e-1):t.top,o=P.call(this,n);return o?Math.max(o.top>=n?o.row:o.row+1,e):0}},{key:"leftCol",get:function(){var e=this.frozenColCount,t=ce(this),n=e>0?t.left+ee(this,0,e-1):t.left,o=L(this,n);return o?Math.max(o.left>=n?o.col:o.col+1,e):0}},{key:"scrollTop",get:function(){return this[R].scrollable.scrollTop},set:function(e){this[R].scrollable.scrollTop=e}},{key:"scrollLeft",get:function(){return this[R].scrollable.scrollLeft},set:function(e){this[R].scrollable.scrollLeft=e}},{key:"getCopyCellValue",value:function(e,t,n){}},{key:"getCellOverflowText",value:function(e,t){var n="".concat(e,":").concat(t);return this[R].cellTextOverflows[n]||null}},{key:"setCellOverflowText",value:function(e,t,n){var o="".concat(e,":").concat(t);n?this[R].cellTextOverflows[o]="string"==typeof n?n.trim():n:delete this[R].cellTextOverflows[o]}},{key:"addDisposable",value:function(e){if(!e||!e.dispose||"function"!=typeof e.dispose)throw new Error("not disposable!");(this[R].disposables=this[R].disposables||[]).push(e)}},{key:"dispose",value:function(){u(g(n.prototype),"dispose",this).call(this);var e=this[R];e.handler.dispose(),e.scrollable.dispose(),e.focusControl.dispose(),e.columnResizer.dispose(),e.cellSelector.dispose(),e.disposables&&(e.disposables.forEach((function(e){return e.dispose()})),e.disposables=null);var t=e.element.parentElement;t&&t.removeChild(e.element)}},{key:"getAttachCellsArea",value:function(e){return{element:this.getElement(),rect:de(this,this.getCellRangeRect(e))}}},{key:"onKeyDownMove",value:function(e){re.call(this,e)}},{key:"bindEventsInternal",value:function(){}},{key:"getTargetRowAtInternal",value:function(e){}},{key:"getRowsHeightInternal",value:function(e,t){}},{key:"getRowHeightInternal",value:function(e){}},{key:"getScrollHeightInternal",value:function(e){}},{key:"getMoveLeftColByKeyDownInternal",value:function(e){return e.col-1}},{key:"getMoveRightColByKeyDownInternal",value:function(e){return e.col+1}},{key:"getMoveUpRowByKeyDownInternal",value:function(e){return e.row-1}},{key:"getMoveDownRowByKeyDownInternal",value:function(e){return e.row+1}},{key:"getOffsetInvalidateCells",value:function(){return 0}},{key:"getCopyRangeInternal",value:function(e){return e}},{key:"_getInitContext",value:function(){var e=this[R].context;return e.fillStyle="white",e.strokeStyle="black",e.textAlign="left",e.textBaseline="top",e.lineWidth=1,e.font=this.font||"16px sans-serif",e}},{key:"fireListeners",value:function(e){for(var t,o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return(t=u(g(n.prototype),"fireListeners",this)).call.apply(t,[this,e].concat(r))}}],[{key:"EVENT_TYPE",get:function(){return _.DG_EVENT_TYPE}}]),n}(b.EventTarget);t.DrawGrid=we},"./core/EventTarget.js":function(e,t,n){var o;Object.defineProperty(t,"__esModule",{value:!0}),t.EventTarget=void 0;var r=n("./internal/utils.js"),i=(0,n("./internal/symbolManager.js").get)(),l=1,a=function(){function e(){y(this,e),this[o]={listeners:{},listenerData:{}}}return m(e,[{key:"listen",value:function(e,t){var n=this,o=this[i].listeners[e]||(this[i].listeners[e]=[]);o.push(t);var r=l++;return this[i].listenerData[r]={type:e,listener:t,remove:function(){delete n[i].listenerData[r];var l=o.indexOf(t);o.splice(l,1),n[i].listeners[e].length||delete n[i].listeners[e]}},r}},{key:"unlisten",value:function(e){this[i]&&this[i].listenerData[e].remove()}},{key:"addEventListener",value:function(e,t){this.listen(e,t)}},{key:"removeEventListener",value:function(e,t){var n=this;this[i]&&(0,r.each)(this[i].listenerData,(function(o,r){o.type===e&&o.listener===t&&n.unlisten(r)}))}},{key:"hasListeners",value:function(e){return!!this[i]&&!!this[i].listeners[e]}},{key:"fireListeners",value:function(e){for(var t=this,n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];if(!this[i])return[];var l=this[i].listeners[e];return l?l.map((function(e){return e.call.apply(e,[t].concat(o))})).filter((function(e){return null!=e})):[]}},{key:"dispose",value:function(){delete this[i]}}]),e}();t.EventTarget=a,o=i},"./data.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterDataSource=t.CachedDataSource=t.DataSource=void 0;var o=n("./data/DataSource.js");Object.defineProperty(t,"DataSource",{enumerable:!0,get:function(){return o.DataSource}});var r=n("./data/CachedDataSource.js");Object.defineProperty(t,"CachedDataSource",{enumerable:!0,get:function(){return r.CachedDataSource}});var i=n("./data/FilterDataSource.js");Object.defineProperty(t,"FilterDataSource",{enumerable:!0,get:function(){return i.FilterDataSource}})},"./data/CachedDataSource.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CachedDataSource=void 0;var o=n("./data/DataSource.js"),r=function(e){d(n,e);var t=h(n);function n(e){var o;return y(this,n),(o=t.call(this,e))._rCache={},o._fCache={},o}return m(n,[{key:"getOriginal",value:function(e){return this._rCache&&this._rCache[e]?this._rCache[e]:u(g(n.prototype),"getOriginal",this).call(this,e)}},{key:"getOriginalField",value:function(e,t){var o=this._fCache&&this._fCache[e];if(o){var r=o.get(t);if(r)return r}return u(g(n.prototype),"getOriginalField",this).call(this,e,t)}},{key:"setOriginalField",value:function(e,t,o){var r=this._fCache;return r&&r[e]&&delete r[e],u(g(n.prototype),"setOriginalField",this).call(this,e,t,o)}},{key:"clearCache",value:function(){this._rCache&&(this._rCache={}),this._fCache&&(this._fCache={})}},{key:"fieldPromiseCallBackInternal",value:function(e,t,n){!function(e,t,n,o){(e[t]||(e[t]=new Map)).set(n,o)}(this._fCache,e,t,n)}},{key:"recordPromiseCallBackInternal",value:function(e,t){this._rCache[e]=t}},{key:"dispose",value:function(){u(g(n.prototype),"dispose",this).call(this)}}],[{key:"EVENT_TYPE",get:function(){return o.DataSource.EVENT_TYPE}},{key:"ofArray",value:function(e){return new n({get:function(t){return e[t]},length:e.length,source:e})}}]),n}(o.DataSource);t.CachedDataSource=r},"./data/DataSource.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0;var l=i(n("./internal/sort.js")),a=n("./internal/utils.js"),s=n("./core/EventTarget.js");function c(e){return!!(a.obj.isObject(e)&&e.get&&e.set)}var f={UPDATE_LENGTH:"update_length",UPDATED_LENGTH:"updated_length",UPDATED_ORDER:"updated_order"};function v(e,t){return e===t?0:null==e?null==t?0:-1:null==t||e>t?1:-1}function p(e,t){return-1*v(e,t)}function C(e,t){var n=(0,a.getOrApply)(e);if((0,a.isPromise)(n)){var o=n.then((function(e){return t(e),e}));return t(o),o}return n}function b(e,t,n){if(null!=e){if((0,a.isPromise)(e))return e.then((function(e){return b(e,t,n)}));var o=c(t)?t.get:t;if(o in e)return C(e[o],n);if("function"==typeof o)return C(o(e),n);var r=String(o).split(".");return r.length<=1?C(e[o],n):C(a.applyChainSafe.apply(void 0,[e,function(e,t){return b(e,t,a.emptyFn)}].concat(_(r))),n)}}function w(e,t,n){if(null==e)return!1;var o=c(t)?t.set:t;if(o in e)e[o]=n;else{if("function"==typeof o)return o(e,n);if("string"==typeof o)for(var r="".concat(o).split("."),i=e,l=r.length,a=0;a<l;a++){var s=r[a];a===l-1?i[s]=n:i=i[s]||(i[s]={})}else e[o]=n}return!0}function k(e,t){if(!e)return t;var n=e[t];return null!=n?n:t}var E=function(e){d(n,e);var t=h(n);function n(e){var o,r;return y(this,n),(o=t.call(this))._sortedIndexMap=null,o._get=(null==e?void 0:e.get.bind(e))||void 0,o._length=(null==e?void 0:e.length)||0,o._source=null!==(r=null==e?void 0:e.source)&&void 0!==r?r:e,o}return m(n,[{key:"source",get:function(){return this._source}},{key:"get",value:function(e){return this.getOriginal(k(this._sortedIndexMap,e))}},{key:"getField",value:function(e,t){return this.getOriginalField(k(this._sortedIndexMap,e),t)}},{key:"hasField",value:function(e,t){return this.hasOriginalField(k(this._sortedIndexMap,e),t)}},{key:"setField",value:function(e,t,n){return this.setOriginalField(k(this._sortedIndexMap,e),t,n)}},{key:"sort",value:function(e,t){var n=this,o=new Array(this._length),r="desc"!==t?v:p;return l.sortPromise((function(e){return null!=o[e]?o[e]:o[e]=e}),(function(e,t){o[e]=t}),this._length,r,(function(t){return n.getOriginalField(t,e)})).then((function(){n._sortedIndexMap=o,n.fireListeners(f.UPDATED_ORDER)}))}},{key:"length",get:function(){return this._length},set:function(e){if(this._length!==e){var t=this.fireListeners(f.UPDATE_LENGTH,e);a.array.findIndex(t,(function(e){return!e}))>=0||(this._length=e,this.fireListeners(f.UPDATED_LENGTH,this._length))}}},{key:"dataSource",get:function(){return this}},{key:"dispose",value:function(){u(g(n.prototype),"dispose",this).call(this)}},{key:"getOriginal",value:function(e){var t=this;return C(this._get(e),(function(n){t.recordPromiseCallBackInternal(e,n)}))}},{key:"getOriginalField",value:function(e,t){var n=this;if(null!=t)return b(this.getOriginal(e),t,(function(o){n.fieldPromiseCallBackInternal(e,t,o)}))}},{key:"hasOriginalField",value:function(e,t){if(null==t)return!1;if("function"==typeof t)return!0;var n=this.getOriginal(e);return Boolean(n&&t in n)}},{key:"setOriginalField",value:function(e,t,n){if(null==t)return!1;var o=this.getOriginal(e);return(0,a.isPromise)(o)?o.then((function(e){return w(e,t,n)})):w(o,t,n)}},{key:"fieldPromiseCallBackInternal",value:function(e,t,n){}},{key:"recordPromiseCallBackInternal",value:function(e,t){}}],[{key:"EVENT_TYPE",get:function(){return f}},{key:"ofArray",value:function(e){return new n({get:function(t){return e[t]},length:e.length,source:e})}}]),n}(s.EventTarget);t.DataSource=E,E.EMPTY=new E({get:function(){},length:0})},"./data/FilterDataSource.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterDataSource=void 0;var r=o("./internal/utils.js"),i=o("./data/DataSource.js"),l=o("./internal/EventHandler.js"),a=function(){function e(t){y(this,e),this._dataSource=t,this._curIndex=-1,this._data=[]}return m(e,[{key:"hasNext",value:function(){var e=this._curIndex+1;return this._dataSource.length>e}},{key:"next",value:function(){var e=this._curIndex+1,t=this._getIndexData(e);return this._curIndex=e,t}},{key:"movePrev",value:function(){this._curIndex--}},{key:"_getIndexData",value:function(e,t){var n=this._dataSource,o=this._data;if(e<o.length)return o[e];if(!(n.length<=e)){var i=this._dataSource.get(e);if(o[e]=i,(0,r.isPromise)(i)&&(i.then((function(t){o[e]=t})),!t))for(var l=1;l<=100;l++)this._getIndexData(e+l,!0);return i}}}]),e}(),s=function(){function e(t,n,o){y(this,e),this._cancel=!1,this._owner=t,this._dataSourceItr=new a(n),this._filter=o,this._filteredList=[],this._queues=[]}return m(e,[{key:"get",value:function(e){if(!this._cancel){var t=this._filteredList;if(e<t.length)return t[e];var n=this._queues;return n[e]||n[e]||this._findIndex(e)}}},{key:"cancel",value:function(){this._cancel=!0}},{key:"_findIndex",value:function(e){if(n.Promise){var t=Date.now()+100,o=0;return this._findIndexWithTimeout(e,(function(){return++o>=100&&(o=0,t<Date.now())}))}return this._findIndexWithTimeout(e,(function(){return!1}))}},{key:"_findIndexWithTimeout",value:function(e,t){for(var n=this,o=this._filteredList,i=this._filter,l=this._dataSourceItr,a=this._queues;l.hasNext();){if(this._cancel)return;var s=l.next();if((0,r.isPromise)(s)){l.movePrev();var u=s.then((function(t){return a[e]=null,n.get(e)}));return a[e]=u,u}if(i(s)&&(o.push(s),e<o.length))return o[e];if(t()){var c=new Promise((function(e){setTimeout((function(){e()}),300)})).then((function(){return a[e]=null,n.get(e)}));return a[e]=c,c}}this._owner.length=o.length}}]),e}(),c=function(e){d(n,e);var t=h(n);function n(e,o){var a;y(this,n),(a=t.call(this,e))._filterData=null,a._dataSource=e,a.filter=o;var s=a._handler=new l.EventHandler;return s.on(e,i.DataSource.EVENT_TYPE.UPDATED_ORDER,(function(){a.filter=a.filter})),(0,r.each)(i.DataSource.EVENT_TYPE,(function(t){s.on(e,t,(function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=a).fireListeners.apply(e,[t].concat(o))}))})),a}return m(n,[{key:"filter",get:function(){var e;return(null===(e=this._filterData)||void 0===e?void 0:e._filter)||null},set:function(e){this._filterData&&this._filterData.cancel(),this._filterData=e?new s(this,this._dataSource,e):null,this.length=this._dataSource.length}},{key:"getOriginal",value:function(e){return this._filterData?this._filterData.get(e):u(g(n.prototype),"getOriginal",this).call(this,e)}},{key:"sort",value:function(e,t){return this._dataSource.sort(e,t)}},{key:"source",get:function(){return this._dataSource.source}},{key:"dataSource",get:function(){return this._dataSource}},{key:"dispose",value:function(){this._handler.dispose(),u(g(n.prototype),"dispose",this).call(this)}}],[{key:"EVENT_TYPE",get:function(){return i.DataSource.EVENT_TYPE}}]),n}(i.DataSource);t.FilterDataSource=c},"./element/Inline.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Inline=void 0;var o=n("./internal/utils.js");function r(e,t){return e.measureText(t).width}function i(e,t,n,o,i){for(var a=[],s=n.next(),u=0;u<o&&null!==s;u++,s=n.next())a.push(s);var c=r(e,a.join(""));if(c>i)for(;a.length&&!((c-=r(e,a.pop()||""))<=i););else if(c<i)for(;null!==s;){var d=r(e,s);if(c+d>i)break;a.push(s),c+=d,s=n.next()}var f=a.join("").replace(/\s+$/,""),h=t.slice(f.length).replace(/^\s+/,"");return{before:f?new l(f):null,after:h?new l(h):null}}var l=function(){function e(t){y(this,e),this._content=null!=t?t:""}return m(e,[{key:"width",value:function(e){return r(e.ctx,this._content)}},{key:"font",value:function(){return null}},{key:"color",value:function(){return null}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(e){}},{key:"draw",value:function(e){var t=e.ctx,n=e.canvashelper,o=e.rect,r=e.offset,i=e.offsetLeft,l=e.offsetRight,a=e.offsetTop,s=e.offsetBottom;n.fillTextRect(t,this._content,o.left,o.top,o.width,o.height,{offset:r+1,padding:{left:i,right:l,top:a,bottom:s}})}},{key:"canBreak",value:function(){return!!this._content}},{key:"splitIndex",value:function(t){for(var n=this._content,r=o.str.genChars(n),i=[],l=r.next(),a=0;a<t&&null!==l;a++,l=r.next())i.push(l);var s=i.join(""),u=n.slice(s.length);return{before:s?new e(s):null,after:u?new e(u):null}}},{key:"breakWord",value:function(e,t){var n=this._content,r=this.width({ctx:e}),l=Math.floor(this._content.length*t/r);return i(e,n,o.str.genWords(n),l,t)}},{key:"breakAll",value:function(e,t){var n=this._content,r=this.width({ctx:e}),l=Math.floor(this._content.length*t/r);return i(e,n,o.str.genChars(n),l,t)}},{key:"toString",value:function(){return this._content}}]),e}();t.Inline=l},"./element/InlineDrawer.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineDrawer=void 0;var o=function(e){d(n,e);var t=h(n);function n(e){var o,r=e.draw,i=e.width,l=e.color;return y(this,n),(o=t.call(this))._draw=r,o._width=i,o._color=l,o}return m(n,[{key:"width",value:function(e){return this._width}},{key:"font",value:function(){return null}},{key:"color",value:function(){var e;return null!==(e=this._color)&&void 0!==e?e:null}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(e){}},{key:"draw",value:function(e){var t=e.ctx,n=e.canvashelper,o=e.rect,r=e.offset,i=e.offsetLeft,l=e.offsetRight,a=e.offsetTop,s=e.offsetBottom;this._draw({ctx:t,canvashelper:n,rect:o,offset:r,offsetLeft:i,offsetRight:l,offsetTop:a,offsetBottom:s})}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),n}(n("./element/Inline.js").Inline);t.InlineDrawer=o},"./element/InlineIcon.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineIcon=void 0;var l=i(n("./internal/fonts.js")),a=function(e){d(n,e);var t=h(n);function n(e){var o;return y(this,n),(o=t.call(this))._icon=e||{},o}return m(n,[{key:"width",value:function(e){var t=e.ctx,n=this._icon;if(n.width)return n.width;if(n.font&&l.check(n.font,n.content||"")){t.save(),t.canvas.style.letterSpacing="normal";try{return t.font=n.font||t.font,t.measureText(n.content||"").width}finally{t.canvas.style.letterSpacing="",t.restore()}}return 0}},{key:"font",value:function(){var e;return null!==(e=this._icon.font)&&void 0!==e?e:null}},{key:"color",value:function(){var e;return null!==(e=this._icon.color)&&void 0!==e?e:null}},{key:"canDraw",value:function(){var e=this._icon;return!e.font||l.check(e.font,e.content||"")}},{key:"onReady",value:function(e){var t=this._icon;t.font&&!l.check(t.font,t.content||"")&&l.load(t.font,t.content||"",e)}},{key:"draw",value:function(e){var t=e.ctx,n=e.canvashelper,o=e.rect,r=e.offset,i=e.offsetLeft,l=e.offsetRight,a=e.offsetTop,s=e.offsetBottom,u=this._icon;if(u.content){t.canvas.style.letterSpacing="normal";try{t.font=t.font,n.fillTextRect(t,u.content,o.left,o.top,o.width,o.height,{offset:r+1,padding:{left:i+(this._icon.offsetLeft||0),right:l,top:a+(this._icon.offsetTop||0),bottom:s}})}finally{t.canvas.style.letterSpacing=""}}}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),n}(n("./element/Inline.js").Inline);t.InlineIcon=a},"./element/InlineImage.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineImage=void 0;var o=n("./element/Inline.js"),r=n("./internal/imgs.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(e){var o,r=e.src,l=e.width,a=e.height,s=e.imageLeft,u=e.imageTop,c=e.imageWidth,d=e.imageHeight;return y(this,n),(o=t.call(this))._inlineImgPromise=null,o._inlineImg=null,o._src=r,o._width=l,o._height=a,o._imageLeft=s,o._imageTop=u,o._imageWidth=c,o._imageHeight=d,o._onloaded=[],(0,i.isPromise)(r)?r.then((function(e){o._src=e,o._loadImage(e)})):o._loadImage(r),o}return m(n,[{key:"_loadImage",value:function(e){var t=this,n=this._inlineImgPromise=(0,r.getCacheOrLoad)("InlineImage",50,e);(0,i.isPromise)(n)?n.then((function(e){t._inlineImg=e,t._onloaded.forEach((function(e){return e()}))})):this._inlineImg=n}},{key:"width",value:function(e){var t,n;return this._width||(null!==(n=null===(t=this._inlineImg)||void 0===t?void 0:t.width)&&void 0!==n?n:0)}},{key:"font",value:function(){return null}},{key:"color",value:function(){return null}},{key:"canDraw",value:function(){return!!this._inlineImg}},{key:"onReady",value:function(e){((0,i.isPromise)(this._src)||(0,i.isPromise)(this._inlineImgPromise))&&this._onloaded.push((function(){return e()}))}},{key:"draw",value:function(e){var t=e.ctx,n=e.canvashelper,o=e.rect,r=e.offset,i=e.offsetLeft,l=e.offsetRight,a=e.offsetTop,s=e.offsetBottom,u=this._inlineImg;n.drawInlineImageRect(t,u,this._imageLeft||0,this._imageTop||0,this._imageWidth||u.width,this._imageHeight||u.height,this._width||u.width,this._height||u.height,o.left,o.top,o.width,o.height,{offset:r+1,padding:{left:i,right:l,top:a,bottom:s}})}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),n}(o.Inline);t.InlineImage=l},"./element/InlinePath2D.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InlinePath2D=void 0;var l=i(n("./internal/path2DManager.js")),a=n("./element/Inline.js"),s=n("./internal/canvases.js"),u=function(e){d(n,e);var t=h(n);function n(e){var o,r=e.path,i=e.width,a=e.height,s=e.color;y(this,n),o=t.call(this);var u=l.getPath2D();return o._path=new u(r),o._width=i,o._height=a,o._color=s,o}return m(n,[{key:"width",value:function(e){return this._width}},{key:"font",value:function(){return null}},{key:"color",value:function(){var e;return null!==(e=this._color)&&void 0!==e?e:null}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(e){}},{key:"draw",value:function(e){var t=e.ctx,n=e.rect,o=e.offset;o++;var r={left:e.offsetLeft,right:e.offsetRight,top:e.offsetTop,bottom:e.offsetBottom};t.save();try{t.beginPath(),t.rect(n.left,n.top,n.width,n.height),t.clip();var i=(0,s.calcStartPosition)(t,n,this._width,this._height,{offset:o,padding:r});t.translate(i.x,i.y),t.fill(this._path)}finally{t.restore()}}},{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),n}(a.Inline);t.InlinePath2D=u},"./element/InlineSvg.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineSvg=void 0;var o=n("./internal/utils.js");function r(e){var t="string"==typeof e?e:(new XMLSerializer).serializeToString(e);return"data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(t))}function i(e){return"string"==typeof e?(new DOMParser).parseFromString(e,"image/svg+xml").children[0]:e}var l=function(e){d(n,e);var t=h(n);function n(e){var l,a,s=e.svg,u=e.width,c=e.height;y(this,n);var d=(0,o.then)(s,i),f=(0,o.isPromise)(d)?void 0:null!==(l=d.getAttribute("width"))&&void 0!==l?l:void 0,h=(0,o.isPromise)(d)?void 0:null!==(a=d.getAttribute("height"))&&void 0!==a?a:void 0,v=null!=f?Number(f):void 0,g=null!=h?Number(h):void 0;return t.call(this,{src:(0,o.then)(s,r),width:u||v,height:c||g,imageWidth:v,imageHeight:g})}return m(n,[{key:"canBreak",value:function(){return!1}},{key:"toString",value:function(){return""}}]),n}(n("./element/InlineImage.js").InlineImage);t.InlineSvg=l},"./element/inlines.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.string=t.buildInlines=t.of=t.iconOf=void 0;var l=i(n("./icons.js")),a=i(n("./internal/path2DManager.js")),s=n("./element/Inline.js"),u=n("./element/InlineDrawer.js"),c=n("./element/InlineIcon.js"),d=n("./element/InlineImage.js"),f=n("./element/InlinePath2D.js"),h=n("./element/InlineSvg.js"),v=n("./internal/canvases.js");function g(e){if(e instanceof s.Inline)return e;if(!e)return null;if(function(e){return!(!e.font||!e.content)}(e))return new c.InlineIcon(e);if(function(e){return!!e.src}(e))return new d.InlineImage({src:e.src,width:e.width,height:e.width});if(e.svg)return new h.InlineSvg({svg:e.svg,width:e.width,height:e.width});if(function(e){return!!e.path}(e))return new f.InlinePath2D({path:e.path,width:e.width,height:e.width,color:e.color});var t=l.get();if(e.name&&t[e.name]){var n=t[e.name],o=e.width||Math.max(n.width,n.height);return new u.InlineDrawer({draw:function(e){var t=e.ctx,r=e.rect,i=e.offset,l=e.offsetLeft,s=e.offsetRight,u=e.offsetTop,c=e.offsetBottom;!function(e,t,n,o,r,i,l,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=u.offset,d=void 0===c?2:c,f=u.padding,h={left:r,top:i,width:l,height:s,right:r+l,bottom:i+s};e.save();try{e.beginPath(),e.rect(h.left,h.top,h.width,h.height),e.clip();var g=(0,v.calcStartPosition)(e,h,n,o,{offset:d,padding:f});a.fill(t,e,g.x,g.y,n,o)}finally{e.restore()}}(t,n,o,o,r.left,r.top,r.width,r.height,{offset:i+1,padding:{left:l,right:s,top:u,bottom:c}})},width:o,height:o,color:e.color})}return new c.InlineIcon(e)}function y(e){return null==e?null:e instanceof s.Inline?e:new s.Inline(e)}function p(e,t){var n=[];if(e&&n.push.apply(n,_(e.map((function(e){return g(e)})).filter((function(e){return null!=e})))),Array.isArray(t))n.push.apply(n,_(t.map((function(e){return y(e)})).filter((function(e){return null!=e}))));else{var o=y(t);o&&n.push(o)}return n}t.iconOf=g,t.of=y,t.buildInlines=p,t.string=function(e){return p(void 0,e).join("")}},"./get-internal.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getInternal=void 0,t.getInternal=function(){return console.warn("use internal!!"),{color:n("./internal/color.js"),sort:n("./internal/sort.js"),calc:n("./internal/calc.js"),symbolManager:n("./internal/symbolManager.js"),path2DManager:n("./internal/path2DManager.js"),pasteUtils:n("./internal/paste-utils.js")}}},"./header/action.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ofCell=t.of=t.CheckHeaderAction=t.SortHeaderAction=t.BaseAction=t.ACTIONS=void 0;var o=n("./header/action/BaseAction.js");Object.defineProperty(t,"BaseAction",{enumerable:!0,get:function(){return o.BaseAction}});var r=n("./header/action/CheckHeaderAction.js");Object.defineProperty(t,"CheckHeaderAction",{enumerable:!0,get:function(){return r.CheckHeaderAction}});var i=n("./header/action/SortHeaderAction.js");Object.defineProperty(t,"SortHeaderAction",{enumerable:!0,get:function(){return i.SortHeaderAction}});var l=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"disabled",get:function(){return this._disabled}}]),n}(i.SortHeaderAction),a=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"disabled",get:function(){return this._disabled}}]),n}(r.CheckHeaderAction);function s(e){if(e){if("string"==typeof e){var n=e.toUpperCase();return t.ACTIONS[n]||s(null)}return e}}t.ACTIONS={SORT:new l,CHECK:new a},t.of=s,t.ofCell=function(e){if(e.sort){if("function"==typeof e.sort){var n=e.sort;return new l({sort:function(t){var o=t.order,r=t.col,i=t.grid;return n.call(e,o,r,i)}})}return"string"==typeof e.sort?new l({sort:e.sort}):t.ACTIONS.SORT}return s(e.headerAction)}},"./header/action/BaseAction.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAction=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,e),this._disabled=!!t.disabled||!1}return m(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this.onChangeDisabledInternal()}},{key:"clone",value:function(){return new e(this)}},{key:"bindGridEvent",value:function(e,t){return[]}},{key:"onChangeDisabledInternal",value:function(){}}]),e}();t.BaseAction=o},"./header/action/CheckHeaderAction.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckHeaderAction=void 0;var o=n("./header/action/actionBind.js"),r=n("./header/action/BaseAction.js"),i=n("./internal/animate.js"),l=n("./internal/symbolManager.js"),a=n("./internal/utils.js"),s=(0,l.getCheckHeaderStateId)(),u=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"clone",value:function(){return new n(this)}},{key:"bindGridEvent",value:function(e,t){var n=this,r=function(e){var t=e[s];return t||(t={elapsed:{},block:{}},a.obj.setReadonly(e,s,t)),t}(e),l=function(t){var o=t.col,l=t.row,a=e.getCellRange(o,l),s="".concat(a.start.col,":").concat(a.start.row);if(!n.disabled&&!r.block[s]){var u=e.getHeaderValue(a.start.col,a.start.row);e.setHeaderValue(a.start.col,a.start.row,!u),(0,i.animate)(200,(function(t){1===t?delete r.elapsed[s]:r.elapsed[s]=t,e.invalidateCellRange(a)}))}};return[].concat(_((0,o.bindCellClickAction)(e,t,{action:l,mouseOver:function(t){if(n.disabled)return!1;r.mouseActiveCell={col:t.col,row:t.row};var o=e.getCellRange(t.col,t.row);return e.invalidateCellRange(o),!0},mouseOut:function(t){delete r.mouseActiveCell;var n=e.getCellRange(t.col,t.row);e.invalidateCellRange(n)}})),_((0,o.bindCellKeyAction)(e,t,{action:l})))}}]),n}(r.BaseAction);t.CheckHeaderAction=u},"./header/action/SortHeaderAction.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SortHeaderAction=void 0;var o=n("./header/action/BaseAction.js"),r=n("./header/action/actionBind.js"),i=function(e){d(n,e);var t=h(n);function n(){var e,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,r))._sort=null===(o=r.sort)||void 0===o||o,e}return m(n,[{key:"sort",get:function(){return this._sort},set:function(e){this._sort=e,this.onChangeDisabledInternal()}},{key:"clone",value:function(){return new n(this)}},{key:"_executeSort",value:function(e,t){if("function"==typeof this._sort)this._sort({order:e.order||"asc",col:e.col,row:e.row,grid:t});else if("string"!=typeof this._sort||"true"===this._sort&&!function(e){if(e.dataSource.length>0){var t=e.dataSource.get(0);return null!=t&&"true"in t}return!1}(t)){var n=Math.min(t.recordRowCount-1,e.row)+t.frozenRowCount,o=t.getField(e.col,n);if(null==o)return;t.dataSource.sort(o,e.order||"asc")}else{var r=this._sort;t.dataSource.sort(r,e.order||"asc")}}},{key:"bindGridEvent",value:function(e,t){var n=this;return _((0,r.bindCellClickAction)(e,t,{action:function(o){if(!n.disabled){var r,i,l,a=e.sortState,s=e.getCellRange(o.col,o.row);i=a.col,l=o.row,r=e.getLayoutCellId(i,l)===t?{col:s.start.col,row:s.start.row,order:"asc"===a.order?"desc":"asc"}:{col:s.start.col,row:s.start.row,order:"asc"},e.sortState=r,n._executeSort(r,e),e.invalidateGridRect(0,0,e.colCount-1,e.rowCount-1)}},mouseOver:function(e){return!n.disabled}}))}}]),n}(o.BaseAction);t.SortHeaderAction=i},"./header/action/actionBind.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.bindCellKeyAction=t.bindCellClickAction=void 0;var o=n("./core/DG_EVENT_TYPE.js"),r=n("./internal/utils.js");t.bindCellClickAction=function(e,t,n){var r,i=n.action,l=n.mouseOver,a=n.mouseOut;function s(n,o){return e.getLayoutCellId(n,o)===t}return[e.listen(o.DG_EVENT_TYPE.CLICK_CELL,(function(e){s(e.col,e.row)&&i({col:e.col,row:e.row})})),e.listen(o.DG_EVENT_TYPE.MOUSEOVER_CELL,(function(t){s(t.col,t.row)&&(l&&!l({col:t.col,row:t.row})||(e.getElement().style.cursor="pointer",r=!0))})),e.listen(o.DG_EVENT_TYPE.MOUSEMOVE_CELL,(function(t){s(t.col,t.row)&&r&&!e.getElement().style.cursor&&(e.getElement().style.cursor="pointer")})),e.listen(o.DG_EVENT_TYPE.MOUSEOUT_CELL,(function(t){s(t.col,t.row)&&(a&&a({col:t.col,row:t.row}),e.getElement().style.cursor="",r=!1)}))]},t.bindCellKeyAction=function(e,t,n){var i=n.action,l=n.acceptKeys,a=void 0===l?[]:l;return a=[].concat(_(a),[13,32]),[e.listen(o.DG_EVENT_TYPE.KEYDOWN,(function(n){var o;if(-1!==a.indexOf(n.keyCode)&&(!(null===(o=e.keyboardOptions)||void 0===o?void 0:o.moveCellOnEnter)||13!==n.keyCode)){var l,s,u=e.selection.select;l=u.col,s=u.row,e.getLayoutCellId(l,s)===t&&(i({col:u.col,row:u.row}),r.event.cancel(n.event))}}))]}},"./header/style.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.of=t.MultilineTextHeaderStyle=t.CheckHeaderStyle=t.SortHeaderStyle=t.Style=t.BaseStyle=void 0;var o=n("./header/style/BaseStyle.js");Object.defineProperty(t,"BaseStyle",{enumerable:!0,get:function(){return o.BaseStyle}});var r=n("./header/style/CheckHeaderStyle.js");Object.defineProperty(t,"CheckHeaderStyle",{enumerable:!0,get:function(){return r.CheckHeaderStyle}});var i=n("./header/style/MultilineTextHeaderStyle.js");Object.defineProperty(t,"MultilineTextHeaderStyle",{enumerable:!0,get:function(){return i.MultilineTextHeaderStyle}});var l=n("./header/style/SortHeaderStyle.js");Object.defineProperty(t,"SortHeaderStyle",{enumerable:!0,get:function(){return l.SortHeaderStyle}});var a=n("./header/style/Style.js");Object.defineProperty(t,"Style",{enumerable:!0,get:function(){return a.Style}}),t.of=function e(t,n){return t?t instanceof a.Style?t:"function"==typeof t?e(t(),n):new n(t):n.DEFAULT}},"./header/style/BaseStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStyle=void 0;var o,r=n("./core/EventTarget.js"),i={CHANGE_STYLE:"change_style"},l=function(e){d(n,e);var t=h(n);function n(){var e,o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor;return y(this,n),(e=t.call(this))._bgColor=o,e}return m(n,[{key:"bgColor",get:function(){return this._bgColor},set:function(e){this._bgColor=e,this.doChangeStyle()}},{key:"doChangeStyle",value:function(){this.fireListeners(i.CHANGE_STYLE)}},{key:"clone",value:function(){return new n(this)}}],[{key:"EVENT_TYPE",get:function(){return i}},{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.EventTarget);t.BaseStyle=l},"./header/style/CheckHeaderStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckHeaderStyle=void 0;var o,r=n("./header/style/StdTextBaseStyle.js"),i=n("./internal/utils.js"),l=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,n),e=t.call(this,(0,i.defaults)(o,{textAlign:"center"}));var r=o.uncheckBgColor,l=o.checkBgColor,a=o.borderColor;return e._uncheckBgColor=r,e._checkBgColor=l,e._borderColor=a,e}return m(n,[{key:"uncheckBgColor",get:function(){return this._uncheckBgColor},set:function(e){this._uncheckBgColor=e,this.doChangeStyle()}},{key:"checkBgColor",get:function(){return this._checkBgColor},set:function(e){this._checkBgColor=e,this.doChangeStyle()}},{key:"borderColor",get:function(){return this._borderColor},set:function(e){this._borderColor=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(r.StdTextBaseStyle);t.CheckHeaderStyle=l},"./header/style/MultilineTextHeaderStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextHeaderStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),t.call(this,e)}return m(n,[{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./header/style/StdMultilineTextBaseStyle.js").StdMultilineTextBaseStyle);t.MultilineTextHeaderStyle=r},"./header/style/SortHeaderStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SortHeaderStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._sortArrowColor=o.sortArrowColor,e._multiline=o.multiline,e}return m(n,[{key:"sortArrowColor",get:function(){return this._sortArrowColor},set:function(e){this._sortArrowColor=e,this.doChangeStyle()}},{key:"multiline",get:function(){return!!this._multiline},set:function(e){this._multiline=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./header/style/StdMultilineTextBaseStyle.js").StdMultilineTextBaseStyle);t.SortHeaderStyle=r},"./header/style/StdBaseStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StdBaseStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._textAlign=o.textAlign||"left",e._textBaseline=o.textBaseline||"middle",e}return m(n,[{key:"textAlign",get:function(){return this._textAlign},set:function(e){this._textAlign=e,this.doChangeStyle()}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./header/style/BaseStyle.js").BaseStyle);t.StdBaseStyle=r},"./header/style/StdMultilineTextBaseStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StdMultilineTextBaseStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._lineHeight=o.lineHeight||"1em",e._autoWrapText=o.autoWrapText||!1,e._lineClamp=o.lineClamp,e}return m(n,[{key:"clone",value:function(){return new n(this)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight=e,this.doChangeStyle()}},{key:"lineClamp",get:function(){return this._lineClamp},set:function(e){this._lineClamp=e,this.doChangeStyle()}},{key:"autoWrapText",get:function(){return this._autoWrapText},set:function(e){this._autoWrapText=e,this.doChangeStyle()}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./header/style/StdTextBaseStyle.js").StdTextBaseStyle);t.StdMultilineTextBaseStyle=r},"./header/style/StdTextBaseStyle.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StdTextBaseStyle=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._color=o.color,e._font=o.font,e._padding=o.padding,e._textOverflow=o.textOverflow||"ellipsis",e}return m(n,[{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.doChangeStyle()}},{key:"font",get:function(){return this._font},set:function(e){this._font=e,this.doChangeStyle()}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e,this.doChangeStyle()}},{key:"textOverflow",get:function(){return this._textOverflow},set:function(e){this._textOverflow=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./header/style/StdBaseStyle.js").StdBaseStyle);t.StdTextBaseStyle=r},"./header/style/Style.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Style=void 0;var o,r=function(e){d(n,e);var t=h(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(e=t.call(this,o))._multiline=o.multiline,e}return m(n,[{key:"multiline",get:function(){return!!this._multiline},set:function(e){this._multiline=e,this.doChangeStyle()}},{key:"clone",value:function(){return new n(this)}}],[{key:"DEFAULT",get:function(){return o||(o=new n)}}]),n}(n("./header/style/StdMultilineTextBaseStyle.js").StdMultilineTextBaseStyle);t.Style=r},"./header/type.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ofCell=t.of=t.MultilineTextHeader=t.CheckHeader=t.SortHeader=t.Header=t.BaseHeader=void 0;var o=n("./header/type/BaseHeader.js");Object.defineProperty(t,"BaseHeader",{enumerable:!0,get:function(){return o.BaseHeader}});var r=n("./header/type/CheckHeader.js");Object.defineProperty(t,"CheckHeader",{enumerable:!0,get:function(){return r.CheckHeader}});var i=n("./header/type/Header.js");Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return i.Header}});var l=n("./header/type/MultilineTextHeader.js");Object.defineProperty(t,"MultilineTextHeader",{enumerable:!0,get:function(){return l.MultilineTextHeader}});var a=n("./header/type/SortHeader.js");Object.defineProperty(t,"SortHeader",{enumerable:!0,get:function(){return a.SortHeader}});var s={DEFAULT:new i.Header,SORT:new a.SortHeader,CHECK:new r.CheckHeader,MULTILINETEXT:new l.MultilineTextHeader};function u(e){if(e){if("string"==typeof e){var t=e.toUpperCase();return s[t]||u(null)}return e}return s.DEFAULT}t.of=u,t.ofCell=function(e){return e.sort?s.SORT:u(e.headerType)}},"./header/type/BaseHeader.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseHeader=void 0;var l=i(n("./header/style.js")),a=n("./header/style/BaseStyle.js"),s=function(){function e(){y(this,e),this.onDrawCell=this.onDrawCell.bind(this)}return m(e,[{key:"StyleClass",get:function(){return a.BaseStyle}},{key:"onDrawCell",value:function(e,t,n,o){var r=t.style,i=t.drawCellBase,a=o.getGridCanvasHelper();i(),this.drawInternal(this.convertInternal(e),n,l.of(r,this.StyleClass),a,o,t)}},{key:"convertInternal",value:function(e){return"function"==typeof e&&(e=e()),null!=e?"".concat(e):""}},{key:"bindGridEvent",value:function(e,t){return[]}},{key:"getCopyCellValue",value:function(e,t,n){return"function"==typeof e&&(e=e()),null!=e?e:""}}]),e}();t.BaseHeader=s},"./header/type/CheckHeader.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckHeader=void 0;var l=i(n("./element/inlines.js")),a=i(n("./columns/type/columnUtils.js")),s=n("./header/type/BaseHeader.js"),u=n("./header/style/CheckHeaderStyle.js"),c=n("./internal/symbolManager.js"),f=n("./internal/utils.js"),v=(0,c.getCheckHeaderStateId)(),g=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return u.CheckHeaderStyle}},{key:"clone",value:function(){return new n(this)}},{key:"drawInternal",value:function(e,t,n,o,r,i){var s=i.drawCellBase,u=i.getIcon,c=n.textAlign,d=n.textBaseline,h=n.borderColor,g=n.checkBgColor,y=n.uncheckBgColor,p=n.bgColor,m=n.padding,_=n.color,C=n.font,b=n.textOverflow;p&&s({bgColor:p});var w=t.col,k=t.row,E=r.getCellRange(w,k),j="".concat(E.start.col,":").concat(E.start.row),x=function(e){var t=e[v];return t||(t={elapsed:{},block:{}},f.obj.setReadonly(e,v,t)),t}(r),S=x.elapsed[j],O=r.getHeaderValue(E.start.col,E.start.row),T={textAlign:c,textBaseline:d,borderColor:h,checkBgColor:g,uncheckBgColor:y};null!=S&&(T.animElapsedTime=S);var I=o.buildCheckBoxInline(!!O,t,T);a.loadIcons(u(),t,o,(function(t,n){var r=[I];r=r.concat(l.buildInlines(t,null!=e?String(e):"")),o.text(r,n,{textAlign:c,textBaseline:d,color:_,font:C,padding:m,textOverflow:b})}))}}]),n}(s.BaseHeader);t.CheckHeader=g},"./header/type/Header.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var l=i(n("./columns/type/columnUtils.js")),a=n("./header/type/BaseHeader.js"),s=n("./header/style/Style.js"),u=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return s.Style}},{key:"drawInternal",value:function(e,t,n,o,r,i){var a=i.drawCellBase,s=i.getIcon,u=n.textAlign,c=n.textBaseline,d=n.color,f=n.font,h=n.bgColor,v=n.padding,g=n.textOverflow,y=n.lineHeight,p=n.autoWrapText,m=n.lineClamp,_=n.multiline;h&&a({bgColor:h});var C=null!=e?String(e):"";l.loadIcons(s(),t,o,(function(e,t){if(_){var n=C.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");o.multilineText(n,t,{textAlign:u,textBaseline:c,color:d,font:f,padding:v,lineHeight:y,autoWrapText:p,lineClamp:m,textOverflow:g,icons:e})}else o.text(C,t,{textAlign:u,textBaseline:c,color:d,font:f,padding:v,textOverflow:g,icons:e})}))}}]),n}(a.BaseHeader);t.Header=u},"./header/type/MultilineTextHeader.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MultilineTextHeader=void 0;var l=i(n("./columns/type/columnUtils.js")),a=n("./header/type/BaseHeader.js"),s=n("./header/style/MultilineTextHeaderStyle.js"),u=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return s.MultilineTextHeaderStyle}},{key:"clone",value:function(){return new n(this)}},{key:"drawInternal",value:function(e,t,n,o,r,i){var a=i.drawCellBase,s=i.getIcon,u=n.textAlign,c=n.textBaseline,d=n.color,f=n.font,h=n.bgColor,v=n.padding,g=n.lineHeight,y=n.autoWrapText,p=n.lineClamp,m=n.textOverflow;h&&a({bgColor:h});var _=null!=e?String(e):"",C=_.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");o.testFontLoad(f,_,t),l.loadIcons(s(),t,o,(function(e,t){o.multilineText(C,t,{textAlign:u,textBaseline:c,color:d,font:f,padding:v,lineHeight:g,autoWrapText:y,lineClamp:p,textOverflow:m,icons:e})}))}}]),n}(a.BaseHeader);t.MultilineTextHeader=u},"./header/type/SortHeader.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SortHeader=void 0;var l=i(n("./columns/type/columnUtils.js")),a=n("./header/type/BaseHeader.js"),s=n("./header/style/SortHeaderStyle.js"),u=n("./internal/utils.js"),c=n("./internal/canvases.js"),f=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"StyleClass",get:function(){return s.SortHeaderStyle}},{key:"drawInternal",value:function(e,t,n,o,r,i){var a=i.drawCellBase,s=i.getIcon,d=n.textAlign,f=n.textBaseline,h=void 0===f?"middle":f,v=n.color,g=n.bgColor,y=n.font,p=n.padding,m=n.textOverflow,_=n.lineHeight,C=n.autoWrapText,b=n.lineClamp,w=n.sortArrowColor,k=n.multiline;g&&a({bgColor:g});var E=null!=e?String(e):"";o.testFontLoad(y,E,t),l.loadIcons(s(),t,o,(function(e,t){var n=r.sortState,i=void 0,l=t.col,a=t.row,s=r.getCellRange(l,a);(0,u.cellInRange)(s,n.col,n.row)&&(i=n.order);var f=t.getContext(),g={name:null!=i?"asc"===i?"arrow_downward":"arrow_upward":void 0,width:1.2*(0,c.getFontSize)(f,y).width,color:o.getColor(w||o.theme.header.sortArrowColor,l,a,f)||"rgba(0, 0, 0, 0.38)"};if(k){var j=E.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");o.multilineText(j,t,{textAlign:d,textBaseline:h,color:v,font:y,padding:p,lineHeight:_,autoWrapText:C,lineClamp:b,textOverflow:m,icons:e,trailingIcon:g})}else o.text(E,t,{textAlign:d,textBaseline:h,color:v,font:y,padding:p,textOverflow:m,icons:e,trailingIcon:g})}))}}]),n}(a.BaseHeader);t.SortHeader=f},"./headers.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.style=t.type=t.action=void 0;var l=i(n("./header/action.js"));t.action=l;var a=i(n("./header/style.js"));t.style=a;var s=i(n("./header/type.js"));t.type=s},"./icons.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;var o=n("./internal/utils.js"),r=n("./plugins/icons.js"),i={get arrow_upward(){return{d:"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z",width:48,height:48}},get arrow_downward(){return{d:"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z",width:48,height:48}},get edit(){return{d:"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z",width:48,height:48}},get add(){return{d:"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z",width:48,height:48}},get star(){return{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",width:24,height:24}},get star_border(){return{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},get star_half(){return{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},get keyboard_arrow_down(){return{d:"M14.83 16.42L24 25.59l9.17-9.17L36 19.25l-12 12-12-12z",width:48,height:48}},get keyboard_arrow_left(){return{d:"M30.83 32.67l-9.17-9.17 9.17-9.17L28 11.5l-12 12 12 12z",width:48,height:48}},get keyboard_arrow_right(){return{d:"M17.17 32.92l9.17-9.17-9.17-9.17L20 11.75l12 12-12 12z",width:48,height:48}},get keyboard_arrow_up(){return{d:"M14.83 30.83L24 21.66l9.17 9.17L36 28 24 16 12 28z",width:48,height:48}},get chevron_left(){return{d:"M14.83 30.83L24 21.66l9.17 9.17L36 28 24 16 12 28z",width:48,height:48}},get chevron_right(){return{d:"M20 12l-2.83 2.83L26.34 24l-9.17 9.17L20 36l12-12z",width:48,height:48}},get expand_less(){return{d:"M24 16L12 28l2.83 2.83L24 21.66l9.17 9.17L36 28z",width:48,height:48}},get expand_more(){return{d:"M33.17 17.17L24 26.34l-9.17-9.17L12 20l12 12 12-12z",width:48,height:48}}};t.get=function(){return(0,o.extend)(i,r.icons)}},"./internal/EventHandler.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=void 0;var o=n("./internal/utils.js"),r=1,i=function(){function e(){y(this,e),this._listeners={}}return m(e,[{key:"on",value:function(e,t,n){for(var o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];e.addEventListener&&e.addEventListener.apply(e,[t,n].concat(i));var a={target:e,type:t,listener:n,options:i},s=r++;return this._listeners[s]=a,s}},{key:"once",value:function(e,t,n){for(var o=this,r=arguments.length,i=new Array(r>3?r-3:0),l=3;l<r;l++)i[l-3]=arguments[l];var a=this.on.apply(this,[e,t,function(){o.off(a),n.apply(void 0,arguments)}].concat(i));return a}},{key:"tryWithOffEvents",value:function(e,t,n){var r=[];try{(0,o.each)(this._listeners,(function(n){var o;n.target===e&&n.type===t&&(n.target.removeEventListener&&(o=n.target).removeEventListener.apply(o,[n.type,n.listener].concat(_(n.options))),r.push(n))})),n()}finally{r.forEach((function(e){var t;e.target.addEventListener&&(t=e.target).addEventListener.apply(t,[e.type,e.listener].concat(_(e.options)))}))}}},{key:"off",value:function(e){if(null!=e){var t,n=this._listeners[e];n&&(delete this._listeners[e],n.target.removeEventListener&&(t=n.target).removeEventListener.apply(t,[n.type,n.listener].concat(_(n.options))))}}},{key:"fire",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];(0,o.each)(this._listeners,(function(n){var o;n.target===e&&n.type===t&&(o=n.listener).call.apply(o,[n.target].concat(r))}))}},{key:"hasListener",value:function(e,t){var n=!1;return(0,o.each)(this._listeners,(function(o){o.target===e&&o.type===t&&(n=!0)})),n}},{key:"clear",value:function(){(0,o.each)(this._listeners,(function(e){var t;e.target.removeEventListener&&(t=e.target).removeEventListener.apply(t,[e.type,e.listener].concat(_(e.options)))})),this._listeners={}}},{key:"dispose",value:function(){this.clear(),this._listeners=null}}]),e}();t.EventHandler=i},"./internal/LRUCache.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;var o=function(){function e(t){y(this,e),this._list=[],this._map={},this._cacheSize=t||50}return m(e,[{key:"get",value:function(e){var t=this._map[e];if(t){var n=this._list,o=n.indexOf(e);n.splice(o,1),n.push(e)}return t}},{key:"put",value:function(e,t){var n=this._list,o=this._map;if(o[e]){var r=n.indexOf(e);n.splice(r,1)}o[e]=t,n.push(e),n.length>this._cacheSize&&delete o[n.shift()||""]}}]),e}();t.LRUCache=o},"./internal/NumberMap.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberMap=void 0;var o=function(){function e(){y(this,e),this._keys=[],this._vals={},this._sorted=!1}return m(e,[{key:"put",value:function(e,t){e in this._vals||(this._keys.push(e),this._sorted=!1),this._vals[e]=t}},{key:"remove",value:function(e){delete this._vals[e];var t=this._keys.indexOf(e);t<0||(this._keys.splice(t,1),this._sorted=!1)}},{key:"get",value:function(e){return this._vals[e]}},{key:"has",value:function(e){return null!=this._vals[e]}},{key:"each",value:function(e,t,n){var o=this._keys,r=o.length;this._sorted||(o.sort((function(e,t){return e<t?-1:e>t?1:0})),this._sorted=!0);for(var i=function(e,t){for(var n=0,o=e.length-1;n<=o;){var r=Math.floor((n+o)/2);if(e[r]===t)return r;e[r]>t?o=r-1:n=r+1}return o<0?0:o}(o,e);i<r;i++){var l=o[i];if(e<=l&&l<=t)n(this.get(l),l);else if(t<l)return}}}]),e}();t.NumberMap=o},"./internal/Rect.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Rect=void 0;var o=function(){function e(t,n,o,r){y(this,e),this._left=t,this._top=n,this._width=o,this._height=r}return m(e,[{key:"left",get:function(){return this._left},set:function(e){var t=this.right;this._left=e,this.right=t}},{key:"top",get:function(){return this._top},set:function(e){var t=this.bottom;this._top=e,this.bottom=t}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._right=void 0}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._bottom=void 0}},{key:"right",get:function(){return void 0!==this._right?this._right:this._right=this.left+this.width},set:function(e){this._right=e,this.width=e-this.left}},{key:"bottom",get:function(){return void 0!==this._bottom?this._bottom:this._bottom=this.top+this.height},set:function(e){this._bottom=e,this.height=e-this.top}},{key:"offsetLeft",value:function(e){this._left+=e,this._right=void 0}},{key:"offsetTop",value:function(e){this._top+=e,this._bottom=void 0}},{key:"copy",value:function(){return new e(this.left,this.top,this.width,this.height)}},{key:"intersection",value:function(t){var n=Math.max(this.left,t.left),o=Math.min(this.left+this.width,t.left+t.width);if(n<=o){var r=Math.max(this.top,t.top),i=Math.min(this.top+this.height,t.top+t.height);if(r<=i)return e.bounds(n,r,o,i)}return null}},{key:"contains",value:function(e){return this.left<=e.left&&this.left+this.width>=e.left+e.width&&this.top<=e.top&&this.top+this.height>=e.top+e.height}},{key:"inPoint",value:function(e,t){return this.left<=e&&this.left+this.width>=e&&this.top<=t&&this.top+this.height>=t}}],[{key:"bounds",value:function(t,n,o,r){return new e(t,n,o-t,r-n)}},{key:"max",value:function(t,n){return e.bounds(Math.min(t.left,n.left),Math.min(t.top,n.top),Math.max(t.right,n.right),Math.max(t.bottom,n.bottom))}}]),e}();t.Rect=o},"./internal/Scrollable.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Scrollable=void 0;var l=i(n("./internal/style.js")),a=n("./internal/EventHandler.js"),s=n("./internal/utils.js").browser.heightLimit-1e3,u=function(){function e(){y(this,e),this._p=1,this._handler=new a.EventHandler,this._scrollable=document.createElement("div"),this._scrollable.classList.add("grid-scrollable"),this._height=0,this._width=0,this._endPointElement=document.createElement("div"),this._endPointElement.classList.add("grid-scroll-end-point"),this._update(),this._scrollable.appendChild(this._endPointElement)}return m(e,[{key:"calcTop",value:function(e){var t=e-this.scrollTop;return this._scrollable.scrollTop+t}},{key:"getElement",value:function(){return this._scrollable}},{key:"setScrollSize",value:function(e,t){this._width=e,this._height=t,this._update()}},{key:"scrollWidth",get:function(){return this._width},set:function(e){this._width=e,this._update()}},{key:"scrollHeight",get:function(){return this._height},set:function(e){this._height=e,this._update()}},{key:"scrollLeft",get:function(){return Math.max(Math.ceil(this._scrollable.scrollLeft),0)},set:function(e){this._scrollable.scrollLeft=e}},{key:"scrollTop",get:function(){return Math.max(Math.ceil(this._scrollable.scrollTop/this._p),0)},set:function(e){this._scrollable.scrollTop=e*this._p}},{key:"onScroll",value:function(e){this._handler.on(this._scrollable,"scroll",e)}},{key:"dispose",value:function(){this._handler.dispose()}},{key:"_update",value:function(){var e,t=this._scrollable,n=t.offsetHeight,o=t.offsetWidth;if(this._height>s){var r=l.getScrollBarSize(),i=s-n+r,a=this._height-n+r;this._p=i/a,e=s}else this._p=1,e=this._height;this._endPointElement.style.top="".concat(e.toFixed(),"px"),this._endPointElement.style.left="".concat(this._width.toFixed(),"px"),this.scrollTop>this.scrollHeight-n&&(this.scrollTop=this.scrollHeight-n),this.scrollLeft>this.scrollWidth-o&&(this.scrollLeft=this.scrollWidth-o)}}]),e}();t.Scrollable=u},"./internal/animate.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.animate=void 0;var r=o("./internal/utils.js");function i(e,t,n,o){var r;return e*=3,t*=3,n*=3,o*=3,function(i){var l,a,s,u,c,d;if(i<0||1<i)throw new Error("".concat(i));l=r||i;do{l+=.5*(d=i-(e*(s=(a=1-l)*a)*l+n*a*(u=l*l)+(c=u*l)))}while(1e-4<Math.abs(d));return r=l,t*s*l+o*a*u+c}}var l={linear:function(e){return e},easeIn:i(.42,0,1,1),easeOut:i(0,0,.58,1),easeInOut:i(.42,0,.58,1)},a=r.isNode?function(){}:n.requestAnimationFrame||function(e){return setTimeout(e,1)};function s(){return Date.now()}t.animate=function(e,t,n){var o=s(),r=null==n?l.easeInOut:"string"==typeof n?l[n]:n,i=!1,u=function(n,l){return function u(){var c=s()-o;i?l&&l():c>=e?(t(1),n&&n()):(t(r(c/e)),a(u))}},c=function(){i=!0};if("undefined"!=typeof Promise){var d=new Promise((function(e,n){var o=u(e,n);t(0),o()}));return d.cancel=c,d}var f=u((function(){}),(function(){}));return t(0),f(),{cancel:c}}},"./internal/calc.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toPx=void 0;var o=n("./internal/utils.js");function r(e){return 9===e||10===e||12===e||13===e||32===e}function i(e){return e>=48&&e<=57}function l(e){return 46===e}function a(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||37===e}function s(e){return new Error("calc parse error: ".concat(e))}var u={"*":3,"/":3,"+":2,"-":2};function c(e,t){function n(e){var n=e.pop(),o=e.pop(),r=e.pop();if(!(r&&r.nodeType&&o&&2===o.type&&n&&n.nodeType))throw s(t);return{nodeType:11,left:r,op:o,right:n}}for(var r=[];e.length;){var i=e.shift();if(0===i.type&&"("===i.value)!function(){var n=0,i=o.array.findIndex(e,(function(e){if(0===e.type&&"("===e.value)n++;else if(0===e.type&&")"===e.value){if(!n)return!0;n--}return!1}));if(-1===i)throw s(t);r.push(c(e.splice(0,i),t)),e.shift()}();else if(2===i.type){if(r.length>=3){var l=r[r.length-2].value;u[i.value]<=u[l]&&r.push(n(r))}r.push(i)}else if(1===i.type){var a=i.value,d=i.unit;r.push({nodeType:10,value:a,unit:d})}else 3===i.type&&r.push({nodeType:12,value:i.value})}for(;r.length>1;)r.push(n(r));return r[0]}function d(e){return c(function(e){for(var t=e.replace(/calc\(/g,"(").trim(),n=[],o=t.length,u=0;u<o;u++){var c=t[u],d=c.charCodeAt(0);if("("===c||")"===c)n.push({value:c,type:0});else if("*"===c||"/"===c)n.push({value:c,type:2});else if("+"===c||"-"===c)u=f(c,u+1)-1;else if(i(d)||l(d))u=h(c,u+1)-1;else if(!r(d))throw s(e)}function f(e,r){if(r<o){var a=t[r],s=a.charCodeAt(0);if(i(s)||l(s))return h(e+a,r+1)}return n.push({value:e,type:2}),r}function h(r,l){for(var u=l;u<o;u++){var c=t[u],d=c.charCodeAt(0);if(i(d))r+=c;else{if("."!==c){if(a(d))return v(r,c,u+1);break}if(r.indexOf(".")>=0)throw s(e);r+=c}}if("."===r)throw s(e);return n.push({value:parseFloat(r),type:3}),u}function v(e,r,i){for(var l=i;l<o;l++){var s=t[l];if(!a(s.charCodeAt(0)))break;r+=s}return n.push({value:parseFloat(e),unit:r,type:1}),l}return n}(e),e)}function f(e,t){if(11===e.nodeType){var n=f(e.left,t),o=f(e.right,t);switch(e.op.value){case"+":return n+o;case"-":return n-o;case"*":return n*o;case"/":return n/o;default:throw new Error("calc error. unknown operator: ".concat(e.op.value))}}else if(10===e.nodeType)switch(e.unit){case"%":return e.value*t.full/100;case"em":return e.value*t.em;case"px":return e.value;default:throw new Error("calc error. unknown unit: ".concat(e.unit))}else if(12===e.nodeType)return e.value;throw new Error("calc error.")}function h(e,t){return f(d(e),t)}t.toPx=function(e,t){return"string"==typeof e?h(e.trim(),t):e-0}},"./internal/canvases.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.calcStartPosition=t.calcBasePosition=t.getFontSize=void 0;var o={};function r(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=r.offset,l=void 0===i?0:i,a=r.padding,s=(a=void 0===a?{}:a).left,u=void 0===s?0:s,c=a.right,d=void 0===c?0:c,f=a.top,h=void 0===f?0:f,v=a.bottom,g=void 0===v?0:v,y=e.textAlign||"left",p=e.textBaseline||"middle";e.textAlign=y,e.textBaseline=p;var m=t.left+l+u;"right"===y||"end"===y?m=t.right-n-l-d:"center"===y&&(m=t.left+(t.width-n+u-d)/2);var _=t.top+l+h;return"bottom"===p||"alphabetic"===p||"ideographic"===p?_=t.bottom-o-l-g:"middle"===p&&(_=t.top+(t.height-o+h-g)/2),{x:m,y:_}}t.getFontSize=function(e,t){var n=t||e.font;if(o[n])return o[n];var r=e.font;try{e.font=n;var i=e.measureText("あ").width;return o[n]={width:i,height:i}}finally{e.font=r}},t.calcBasePosition=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.offset,i=void 0===o?0:o,l=n.padding,a=(l=void 0===l?{}:l).left,s=void 0===a?0:a,u=l.right,c=void 0===u?0:u,d=l.top,f=void 0===d?0:d,h=l.bottom;return r(e,t,0,0,{offset:i,padding:{left:s,right:c,top:f,bottom:void 0===h?0:h}})},t.calcStartPosition=r},"./internal/color.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.colorToRGB=void 0;var r={};function i(e){return parseInt(e,16)}function l(e,t,n){return{r:e,g:t,b:n,a:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1}}function a(e){var t=e.r,n=e.g,o=e.b,r=e.a;return 0<=t&&t<=255&&0<=n&&n<=255&&0<=o&&o<=255&&0<=r&&r<=1}function s(e){return Math.ceil(255*e/100)}var u=/((?:\+|-)?(?:\d+(?:\.\d+)?|\.\d+))/.source,c="".concat(u,"%"),d="".concat(u,"(%?)");function f(e){return new RegExp("^rgba?\\(\\s*".concat(e,"\\s*,\\s*").concat(e,"\\s*,\\s*").concat(e,"\\s*\\)$"),"i")}function h(e){return new RegExp("^rgba?\\(\\s*".concat(e,"\\s+").concat(e,"\\s+").concat(e,"\\s*\\)$"),"i")}function v(e,t){return new RegExp("^rgba?\\(\\s*".concat(e,"\\s*,\\s*").concat(e,"\\s*,\\s*").concat(e,"\\s*,\\s*").concat(t,"\\s*\\)$"),"i")}function g(e,t){return new RegExp("^rgba?\\(\\s*".concat(e,"\\s+").concat(e,"\\s+").concat(e,"\\s*/\\s*").concat(t,"\\s*\\)$"),"i")}function y(e){if(/^#[0-9a-f]{3}$/i.exec(e))return n=(t=e)[1],o=t[2],r=t[3],l(i(n+n),i(o+o),i(r+r));var t,n,o,r,y,p,m,_,C,b,w;if(/^#[0-9a-f]{6}$/i.exec(e))return p=(y=e)[1],m=y[2],_=y[3],C=y[4],b=y[5],w=y[6],l(i(p+m),i(_+C),i(b+w));var k=f(u).exec(e)||h(u).exec(e);if(k){var E=l(Number(k[1]),Number(k[2]),Number(k[3]));if(a(E))return E}if(k=f(c).exec(e)||h(c).exec(e)){var j=l(s(Number(k[1])),s(Number(k[2])),s(Number(k[3])));if(a(j))return j}if(k=v(u,d).exec(e)||g(u,d).exec(e)){var x=l(Number(k[1]),Number(k[2]),Number(k[3]),Number(k[4])/(k[5]?100:1));if(a(x))return x}if(k=v(c,d).exec(e)||g(c,d).exec(e)){var S=l(s(Number(k[1])),s(Number(k[2])),s(Number(k[3])),Number(k[4])/(k[5]?100:1));if(a(S))return S}return null}t.colorToRGB=function(e){return"string"!=typeof e?l(0,0,0,0):(e=e.toLowerCase().trim(),r[e]?r[e]:y(e)||(r[e]=function(e){var t=document.createElement("div"),o=t.style;o.color=e,o.position="fixed",o.height="1px",o.width="1px",o.opacity="0",document.body.appendChild(t);var r=(document.defaultView||n).getComputedStyle(t,"").color;return document.body.removeChild(t),y(r||"")}(e)))}},"./internal/dom.js":function(e,t,n){function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.classList,r=n.text,i=n.html,l=document.createElement(e);return o&&(Array.isArray(o)?(t=l.classList).add.apply(t,_(o)):l.classList.add(o)),r?l.textContent=r:i&&(l.innerHTML=i),l}function r(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t.push.apply(t,_(r(e)))})),t}var n=function(e){if(function(e){return!(!e.nodeType||!e.nodeName)}(e))return e;var t=o("div",{html:e});return Array.prototype.slice.call(t.childNodes)}(e);return Array.isArray(n)?n:[n]}function i(e){return null!=e.tabIndex&&e.tabIndex>-1}Object.defineProperty(t,"__esModule",{value:!0}),t.findNextSiblingFocusable=t.findPrevSiblingFocusable=t.isFocusable=t.enableFocus=t.disableFocus=t.appendHtml=t.toNodeList=t.empty=t.createElement=void 0,t.createElement=o,t.empty=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},t.toNodeList=r,t.appendHtml=function(e,t){r(t).forEach((function(t){e.appendChild(t)}))},t.disableFocus=function e(t){t.dataset.disableBeforeTabIndex="".concat(t.tabIndex),t.tabIndex=-1,Array.prototype.slice.call(t.children,0).forEach(e)},t.enableFocus=function e(t){"disableBeforeTabIndex"in t.dataset&&(t.tabIndex=Number(t.dataset.disableBeforeTabIndex)),Array.prototype.slice.call(t.children,0).forEach(e)},t.isFocusable=i,t.findPrevSiblingFocusable=function(e){for(var t=e.previousSibling;t&&!i(t);)t=t.previousSibling;return t},t.findNextSiblingFocusable=function(e){for(var t=e.nextSibling;t&&!i(t);)t=t.nextSibling;return t}},"./internal/fonts.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.check=void 0;var o,r,i=n("./internal/utils.js"),l={};if(t.load=o,t.check=r,i.isNode)t.load=o=function(e,t,n){n()},t.check=r=function(){return!1};else{var a=document.fonts,s=!a;t.load=o=s?function(e,t,o){l["".concat(e," @ ").concat(t)]?o():n("./internal/legacy/fontwatch/FontWatchRunner.js").load(e,t,(function(){l["".concat(e," @ ").concat(t)]=!0,o()}),(function(){l["".concat(e," @ ").concat(t)]=!0,o()}))}:function(e,t,n){l.all||l[e]?n():(a.ready.then((function(){l.all=!0})),a.load(e).then((function(){l[e]=!0,n()})))},t.check=r=s?function(e,t){return!!l["".concat(e," @ ").concat(t)]||(o(e,t,(function(){})),!1)}:function(e,t){return!(!l.all&&!l[e]&&!a.check(e)&&(o(e,t,(function(){})),1))}}},"./internal/hiDPI.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.transform=void 0;var r=o("./internal/EventHandler.js"),i=o("./internal/utils.js"),l=new r.EventHandler,a=1;function s(){i.isNode?a=1:(a=Math.ceil(n.devicePixelRatio||1))>1&&a%2!=0&&(a+=1)}s(),i.isNode||l.on(n,"resize",s),t.transform=function(e){var t=e.getContext("2d"),n=e.getAttribute,o=e.setAttribute;e.getAttribute=function(e){var t=n.call(this,e);return"width"!==e&&"height"!==e||(t="".concat(Number(t)/a)),t},e.setAttribute=function(e,n){var r="width"===e||"height"===e;r&&(n="".concat(Number(n)*a));var i=o.call(this,e,n);return r&&t.scale(a,a),i},Object.defineProperty(e,"width",{get:function(){return Number(e.getAttribute("width"))},set:function(t){e.setAttribute("width","".concat(Math.floor(t)))},configurable:!0,enumerable:!0}),Object.defineProperty(e,"height",{get:function(){return Number(e.getAttribute("height"))},set:function(t){e.setAttribute("height","".concat(Math.floor(t)))},configurable:!0,enumerable:!0});var r=t.drawImage;return t.drawImage=function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(t!==e||1===a)return r.call.apply(r,[this,t].concat(o));this.save();try{return this.scale(1/a,1/a),o.length>4?(o[4]*=a,o[5]*=a):(o[0]*=a,o[1]*=a),r.call.apply(r,[this,t].concat(o))}finally{this.restore()}},e}},"./internal/icons.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.iconPropKeys=t.toNormalizeArray=t.getIconProps=void 0;var r=["content","font","color","className","tagName","isLiga","width","src","svg","name","path","offsetTop","offsetLeft"],i={},l={};function a(e,t){var o=l[e]||(l[e]={});if(o[t])return o[t];var r=i[e]||(i[e]=document.createElement(e));r.className=t,r.classList.add("cheetah-grid-icon"),document.body.appendChild(r);try{var a=(document.defaultView||n).getComputedStyle(r,"::before"),s=a.getPropertyValue("content");s.length>=3&&('"'===s[0]||"'"===s[0])&&s[0]===s[s.length-1]&&(s=s.slice(1,-1));var u=a.getPropertyValue("font");u||(u="".concat(a.getPropertyValue("font-style")," ").concat(a.getPropertyValue("font-variant")," ").concat(a.getPropertyValue("font-weight")," ").concat(a.getPropertyValue("font-size"),"/").concat(a.getPropertyValue("line-height")," ").concat(function(e){for(var t=[],n=e.split(/,\s*/),o=0;o<n.length;o++){var r=n[o].replace(/['"]/g,"");-1!==r.indexOf(" ")||/^\d/.test(r)?t.push("'".concat(r,"'")):t.push(r)}return t.join(",")}(a.getPropertyValue("font-family"))));var c=a.getPropertyValue("color"),d=r.clientWidth,f=(a.getPropertyValue("font-feature-settings")||"").indexOf("liga")>-1;return o[t]={content:s,font:u,color:c,width:d,isLiga:f}}finally{document.body.removeChild(r)}}function s(e){return r.indexOf(e)>=0}t.getIconProps=a,t.toNormalizeArray=function(e){var t=function(e){if(!e)return e;if(Array.isArray(e))return e;var t={},n=0;r.forEach((function(t){var o=e[t];o&&(n=Array.isArray(o)?Math.max(n,o.length):Math.max(n,1))})),r.forEach((function(o){var r=function(e,t){var n=[];if(Array.isArray(e)){n.push.apply(n,_(e));for(var o=e.length;o<t;o++)n.push(null)}else for(var r=0;r<t;r++)n.push(e);return n}(e[o],n);t[o]=r}));for(var o=[],i=function(e){var n={};r.forEach((function(o){var r=t[o][e];n[o]=r})),o.push(n)},l=0;l<n;l++)i(l);return o}(e);return t?t.map((function(e){return function(e){var t={};for(var n in e)"className"!==n&&s(n)&&(t[n]=e[n]);if(e.className){var o=a(e.tagName||"i",e.className);for(var r in o)s(r)&&null==e[r]&&(t[r]=o[r])}return t}(e)})):t},t.iconPropKeys=r},"./internal/imgs.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getCacheOrLoad=t.loadImage=void 0;var o=n("./internal/LRUCache.js"),r=n("./internal/utils.js"),i={};function l(e){if("undefined"==typeof Promise)return console.error("Promise is not loaded. load Promise before this process."),{then:function(){return this}};var t=new Image,n=new Promise((function(e){t.onload=function(){e(t)}}));return t.onerror=function(){var t=e.length>200?"".concat(e.slice(0,200),"..."):e;throw console.warn("cannot load: ".concat(t)),new Error("IMAGE LOAD ERROR: ".concat(t))},t.src=e,n}t.loadImage=l,t.getCacheOrLoad=function(e,t,n){return function(e,t){return(0,r.then)(t,(function(t){var n=e.get(t);if(n)return n;var o=l(t).then((function(n){return e.put(t,n),n}));return e.put(t,o),o}))}(i[e]||(i[e]=new o.LRUCache(t)),n)}},"./internal/legacy/canvas/Path2DShim.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Path2DShim=void 0;var r=new(o("./internal/legacy/canvas/PathCommandsParser.js").PathCommandsParser),i=function(){function e(t){if(y(this,e),this._ops=[],void 0!==t)if("string"==typeof t)this._ops=r.parse(t);else{if(!t.hasOwnProperty("_ops"))throw new Error("Error: ".concat(b(t)," is not a valid argument to Path"));this._ops=_(t._ops)}}return m(e,[{key:"arc",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"arc",args:t})}},{key:"arcTo",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"arcTo",args:t})}},{key:"bezierCurveTo",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"bezierCurveTo",args:t})}},{key:"closePath",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"closePath",args:t})}},{key:"ellipse",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"ellipse",args:t})}},{key:"lineTo",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"lineTo",args:t})}},{key:"moveTo",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"moveTo",args:t})}},{key:"quadraticCurveTo",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"quadraticCurveTo",args:t})}},{key:"rect",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._ops.push({op:"rect",args:t})}},{key:"roundRect",value:function(e,t,n,o,r){throw new Error("Method not implemented.")}}]),e}();t.Path2DShim=i;var l=n.CanvasRenderingContext2D,a=l.prototype.fill;l.prototype.fill=function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(n[0]instanceof i){var r=n[0];this.beginPath(),r._ops.forEach((function(t){e[t.op].apply(e,t.args)})),a.apply(this,Array.prototype.slice.call(n,1))}else a.apply(this,n)}},"./internal/legacy/canvas/PathCommands.js":function(e,t,n){function o(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function r(e,t){var n,r=1;return e[0]*t[1]-e[1]*t[0]<0&&(r=-1),r*Math.acos((n=function(e,t){return function(e,t){return e[0]*t[0]+e[1]*t[1]}(e,t)/(o(e)*o(t))}(e,t),Math.min(Math.max(n,-1),1)))}Object.defineProperty(t,"__esModule",{value:!0}),t.PathCommands=void 0,t.PathCommands=function e(t){var n,o,i=this;y(this,e);var l,a=0,s=0,u="";function c(){return"CcSsQqTt".indexOf(u)<0?{x:a,y:s}:l}this.M=function(e,r){return t.moveTo(e,r),n=e,o=r,a=e,s=r,u="M",i},this.m=function(e,t){return i.M(e+a,t+s)},this.L=function(e,n){return t.lineTo(e,n),a=e,s=n,u="L",i},this.l=function(e,t){return i.L(e+a,t+s)},this.H=function(e){return i.L(e,s)},this.h=function(e){return i.H(e+a)},this.V=function(e){return i.L(a,e)},this.v=function(e){return i.V(e+s)},this.Z=function(){return t.closePath(),a=n,s=o,u="Z",i},this.z=function(){return i.Z()},this.C=function(e,n,o,r,c,d){return t.bezierCurveTo(e,n,o,r,c,d),a=c,s=d,l={x:2*c-o,y:2*d-r},u="C",i},this.c=function(e,t,n,o,r,l){return i.C(e+a,t+s,n+a,o+s,r+a,l+s)},this.S=function(e,t,n,o){var r=c(),l=r.x,a=r.y;return i.C(l,a,e,t,n,o)},this.s=function(e,t,n,o){return i.S(e+a,t+s,n+a,o+s)},this.Q=function(e,n,o,r){return t.quadraticCurveTo(e,n,o,r),a=o,s=r,l={x:2*o-e,y:2*r-n},u="Q",i},this.q=function(e,t,n,o){return i.Q(e+a,t+s,n+a,o+s)},this.T=function(e,t){var n=c(),o=n.x,r=n.y;return i.Q(o,r,e,t)},this.t=function(e,t){return i.T(e+a,t+s)},this.A=function(e,n,o,l,c,d,f){return function(e,t,n,o,i,l,a,s,u,c){if(0!==o&&0!==i){l*=Math.PI/180,o=Math.abs(o),i=Math.abs(i);var d,f,h=function(e,t){var n=Math.cos(t),o=Math.sin(t);return[n*e[0]+o*e[1],-1*o*e[0]+n*e[1]]}([((d=[t,n])[0]-(f=[u,c])[0])/2,(d[1]-f[1])/2],l),v=function(e,t){return[e[0]*t[0],e[1]*t[1]]}(h,h),g=Math.pow(o,2),y=Math.pow(i,2),p=Math.sqrt(v[0]/g+v[1]/y);p>1&&(o*=p,i*=p,g=Math.pow(o,2),y=Math.pow(i,2));var m=Math.sqrt(Math.abs(g*y-g*v[1]-y*v[0])/(g*v[1]+y*v[0]));a===s&&(m*=-1);var _=function(e,t){return[e*t[0],e*t[1]]}(m,[o*h[1]/i,-i*h[0]/o]),C=function(e,t){return[e[0]+t[0],e[1]+t[1]]}(function(e,t){var n=Math.cos(t),o=Math.sin(t);return[n*e[0]-o*e[1],o*e[0]+n*e[1]]}(_,l),function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}([t,n],[u,c])),b=[(h[0]-_[0])/o,(h[1]-_[1])/i],w=[(-1*h[0]-_[0])/o,(-1*h[1]-_[1])/i],k=r([1,0],b),E=k,j=k+r(b,w);e.save(),e.translate(C[0],C[1]),e.rotate(l),e.scale(o,i),e.arc(0,0,1,E,j,!s),e.restore()}else e.lineTo(u,t)}(t,a,s,e,n,o,l,c,d,f),a=d,s=f,u="A",i},this.a=function(e,t,n,o,r,l,u){return i.A(e,t,n,o,r,l+a,u+s)}}},"./internal/legacy/canvas/PathCommandsParser.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PathCommandsParser=void 0;var o=n("./internal/legacy/canvas/PathCommands.js");function r(e,t,n){return"M"===t.toUpperCase()||"L"===t.toUpperCase()||"T"===t.toUpperCase()?(e.command(t,n.next(),n.next()),"M"===t?"L":"m"===t?"l":t):"H"===t.toUpperCase()||"V"===t.toUpperCase()?(e.command(t,n.next()),t):"Z"===t.toUpperCase()?(e.command(t),t):"C"===t.toUpperCase()?(e.command(t,n.next(),n.next(),n.next(),n.next(),n.next(),n.next()),t):"S"===t.toUpperCase()||"Q"===t.toUpperCase()?(e.command(t,n.next(),n.next(),n.next(),n.next()),t):"A"===t.toUpperCase()?(e.command(t,n.next(),n.next(),n.next(),n.next(),n.next(),n.next(),n.next()),t):(console.warn("unsupported:".concat(t)),null)}var i=function(){function e(){var t=this;y(this,e),this._ops=[],this._commands=new o.PathCommands(this);var n=function(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];t._ops.push({op:e,args:o})}};this.moveTo=n("moveTo"),this.lineTo=n("lineTo"),this.closePath=n("closePath"),this.bezierCurveTo=n("bezierCurveTo"),this.quadraticCurveTo=n("quadraticCurveTo"),this.save=n("save"),this.translate=n("translate"),this.rotate=n("rotate"),this.scale=n("scale"),this.arc=n("arc"),this.restore=n("restore"),this.arcTo=n("arcTo"),this.ellipse=n("ellipse"),this.rect=n("rect")}return m(e,[{key:"command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];for(var r=n||[],i=0;i<n.length;i++)r[i]-=0;this._commands[e].apply(this,r)}},{key:"parse",value:function(e){var t=this,n=this._ops=[],o=function(e){var t=0;return{next:function(){for(var n="";e.length>t;){var o=e[t];if(t++," ,\n\r\t".indexOf(o)>-1){if(n)return n}else{if("str"==(".+-1234567890".indexOf(o)>-1?"num":"str"))return n?(t--,n):o;if("-+".indexOf(o)>-1&&n)return t--,n;if("."===o&&n.indexOf(".")>-1)return t--,n;n+=o}}return n||null}}}(e);try{!function(){for(var e,n="Z";e=o.next();)isNaN(Number(e))?n=r(t,e,o)||"Z":function(){var i=!0;n=r(t,n,{next:function(){return i?(i=!1,e):o.next()}})||"Z"}()}()}catch(t){throw console.log("Error: ".concat(e)),t}return n}}]),e}();t.PathCommandsParser=i},"./internal/legacy/fontwatch/FontRuler.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FontRuler=void 0;var o=function(){function e(t,n){y(this,e);var o=document.createElement("span");o.setAttribute("aria-hidden","true"),o.textContent=n||"BESbswy",function(e){return[{display:"block",position:"absolute",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0","white-space":"nowrap",font:e},{"font-variant":"normal","font-size":"300px","font-style":"normal","font-weight":"400","line-height":"normal"}]}(t).forEach((function(e){for(var t in e){var n=t;o.style[n]=e[n]}})),document.body.appendChild(o),this.el_=o}return m(e,[{key:"getWidth",value:function(){return this.el_.offsetWidth}},{key:"remove",value:function(){document.body.removeChild(this.el_)}}]),e}();t.FontRuler=o},"./internal/legacy/fontwatch/FontWatchRunner.js":function(e,t,o){var r=o("./internal/legacy/fontwatch/FontRuler.js"),i={SERIF:"serif",SANS_SERIF:"sans-serif"},l={},a=function(){function e(t,n){y(this,e),this.activeCallbacks=[],this.inactiveCallbacks=[],this.status=null,this.lastResortWidths_={},this.fontRulerA_=new r.FontRuler("".concat(t,",").concat(i.SERIF),n),this.fontRulerB_=new r.FontRuler("".concat(t,",").concat(i.SANS_SERIF),n);var o=new r.FontRuler("4px ".concat(i.SERIF),n),l=new r.FontRuler("4px ".concat(i.SANS_SERIF),n);this.lastResortWidths_[i.SERIF]=o.getWidth(),this.lastResortWidths_[i.SANS_SERIF]=l.getWidth(),o.remove(),l.remove(),this.started_=Date.now(),this.check_()}return m(e,[{key:"then",value:function(e,t){this.status?"ng"!==this.status?e():t():(this.activeCallbacks.push(e),this.inactiveCallbacks.push(t))}},{key:"check_",value:function(){var e=this,t=this.fontRulerA_.getWidth(),n=this.fontRulerB_.getWidth();this.isFallbackFont_(t,n)||this.isLastResortFont_(t,n)?Date.now()-this.started_>=3e3?this.isLastResortFont_(t,n)?(this.finish_(this.activeCallbacks),this.status="ok"):(this.finish_(this.inactiveCallbacks),this.status="ng"):setTimeout((function(){e.check_()}),50):(this.finish_(this.activeCallbacks),this.status="ok")}},{key:"isFallbackFont_",value:function(e,t){return this.widthMatches_(e,i.SERIF)&&this.widthMatches_(t,i.SANS_SERIF)}},{key:"widthsMatchLastResortWidths_",value:function(e,t){for(var n in i)if(i.hasOwnProperty(n)&&this.widthMatches_(e,i[n])&&this.widthMatches_(t,i[n]))return!0;return!1}},{key:"widthMatches_",value:function(e,t){return e===this.lastResortWidths_[t]}},{key:"isLastResortFont_",value:function(e,t){return function(){if(null===s){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(n.navigator.userAgent);s=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return s}()&&this.widthsMatchLastResortWidths_(e,t)}},{key:"finish_",value:function(e){var t=this;setTimeout((function(){t.fontRulerA_.remove(),t.fontRulerB_.remove(),e.forEach((function(e){return e()}))}),0)}}],[{key:"load",value:function(t,n,o,r){var i=l[t]||(l[t]={});(i[n+=""]?i[n]:i[n]=new e(t,n)).then(o,r)}}]),e}(),s=null;e.exports=a},"./internal/menu-items.js":function(e,t,n){function o(e){if(!e)return[];if(Array.isArray(e))return e.map((function(e){return function(e,t){var n={};for(var o in e)n[o]=e[o];for(var r in t)n[r]=t[r];return n}(e,{label:e.caption||e.label})}));if("string"==typeof e)return o(JSON.parse(e));var t=[];for(var n in e)t.push({value:n,label:e[n]});return t}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeToFn=t.normalize=void 0,t.normalize=o,t.normalizeToFn=function(e){return"function"==typeof e?function(t){return o(e(t))}:function(){return o(e)}}},"./internal/paste-utils.js":function(e,t,n){function o(e){return"\n"!==e[e.length-1]?e:"\r"===e[e.length-2]?e.slice(0,-2):e.slice(0,-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePasteRangeBoxValues=t.normalizePasteValue=void 0,t.normalizePasteValue=o,t.parsePasteRangeBoxValues=function(e,t){var n=function(e,t){for(var n=t.trimOnPaste,o=e.length,r=n?function(e){return e.trim()}:function(e){return e},i=1,l=[],a=[l],s="",u=0;u<o;u++){var c=e[u];if("\t"!==c)if("\n"!==c){if('"'===c&&!s.trim()){var d=f(u+1);if(d){s=d.cell,u=d.next-1;continue}}s+=c}else"\r"===(s=r(s))[s.length-1]&&(s=s.slice(0,-1)),l.push(s),i=Math.max(i,l.length),l=[],a.push(l),s="";else l.push(r(s)),s=""}return l.push(r(s)),{values:a,colCount:i=Math.max(i,l.length)};function f(t){for(var n="",r=t;r<o;){var i=e[r];if('"'===i){if('"'!==e[r+1]){for(var l=r+1;l<o;){var a=e[l];if(a.trim())return null;if("\t"===a||"\n"===a)break;l++}return{cell:n,next:l}}n+='"',r+=2}else n+=i,r++}return null}}(o(e),t),r=n.values;return{colCount:n.colCount,rowCount:r.length,getCellValue:function(e,t){var n,o;return null!==(o=null===(n=r[t])||void 0===n?void 0:n[e])&&void 0!==o?o:""}}}},"./internal/path2DManager.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.fill=t.getPath2D=void 0;var o=n("./internal/utils.js");function r(){return"undefined"==typeof Path2D||o.browser.Edge?n("./internal/legacy/canvas/Path2DShim.js").Path2DShim:Path2D}t.getPath2D=r,t.fill=function(e,t,n,o,i,l){t.save();try{var a=e.width,s=e.height,u=e.ud,c=e.x,d=void 0===c?0:c,f=e.y,h=void 0===f?0:f,v=(i=i||a)/a,g=(l=l||s)/(u?-s:s);n=n||0,o=u?(o||0)+-s*g:o||0,t.translate(n,o),t.scale(v,g),0===d&&0===h||t.translate(d,h);var y=r(),p=e.path2d=e.path2d||new y(e.d);t.fill(p)}finally{t.restore()}}},"./internal/sort.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sortPromise=t.sort=t.sortArray=void 0;var o=n("./internal/utils.js");function r(e,t,n,o,r){var i=function(e,t){for(var n=new Array(t),o=0;o<t;o++)n[o]=e(o);return n}(e,n);null!=r?i.sort((function(e,t){return o(r(e),r(t))})):i.sort(o);for(var l=0;l<n;l++)t(l,i[l])}t.sortArray=function(e,t){Array.prototype.sort.call(e,t)},t.sort=r,t.sortPromise=function(e,t,n,i,l){if("undefined"!=typeof Promise)return function(e,t,n){return new Promise((function(r){for(var i=[],l=new Array(n),a=function(t){var n=e(t),r={v:n,f:n};l[t]=r,(0,o.isPromise)(n)&&i.push(n.then((function(e){r.v=e,r.f=e})))},s=0;s<n;s++)a(s);Promise.all(i).then((function(){return null==t?l:function(e,t){return new Promise((function(n){for(var r=e.length,i=[],l=function(n){var r=e[n],l=t(r.v);(0,o.isPromise)(l)?i.push(l.then((function(e){r.f=e}))):r.f=l},a=0;a<r;a++)l(a);Promise.all(i).then((function(){return n(e)}))}))}(l,t)})).then(r)}))}(e,l,n).then((function(e){e.sort((function(e,t){return i(e.f,t.f)}));for(var o=0;o<n;o++)t(o,e[o].v)}));r(e,t,n,i,l);var a={then:function(e){return e(),a},catch:function(){return a}};return a}},"./internal/style.js":function(e,t,n){var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollBarSize=t.initDocument=void 0;var r=function(){n("../src/js/internal/style.css"),o=function(){var e=document.createElement("div"),t=document.createElement("div"),n=e.style;n.position="fixed",n.height="50px",n.width="50px",n.overflow="scroll",n.opacity="0",n.pointerEvents="none";var o=t.style;o.height="100%",o.width="100%",t.textContent="x",e.appendChild(t),document.body.appendChild(e);var r=e.getBoundingClientRect().width,i=t.getBoundingClientRect().width;return document.body.removeChild(e),Math.ceil(r-i)}()||10;var e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-name","cheetah-grid"),e.innerHTML="\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ".concat(o,"px;\n\theight: ").concat(o,"px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ").concat(o,"px);\n\twidth: calc(100% - ").concat(o,"px);\n\theight: -webkit-calc(100% - ").concat(o,"px);\n\theight: calc(100% - ").concat(o,"px);\n}\n\t\t"),document.head.appendChild(e)};t.initDocument=function(){r(),r=Function.prototype},t.getScrollBarSize=function(){return o}},"./internal/symbolManager.js":function(e,t,o){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getCheckHeaderStateId=t.getInlineMenuEditorStateId=t.getInlineInputEditorStateId=t.getSmallDialogInputEditorStateId=t.getTreeColumnStateId=t.getBranchGraphColumnStateId=t.getColumnFadeinStateId=t.getButtonColumnStateId=t.getRadioColumnStateId=t.getCheckColumnStateId=t.getProtectedSymbol=t.get=void 0;var r=o("./internal/utils.js").isNode?e.Symbol:n.Symbol?n.Symbol:function(){function e(){for(var e="",t=0;t<10;t++)e+="abcdefghijklmnopqrstuvwxyz0123456789"[Math.floor(36*Math.random())];return e}return function(t){return t?"#".concat(t,"_").concat(e()):"#_".concat(e())}}(),i={};function l(e){return e?i[e]?i[e]:i[e]=r(e):r()}t.get=l,t.getProtectedSymbol=function(){return l("protected")},t.getCheckColumnStateId=function(){return l("chkcol.stateID")},t.getRadioColumnStateId=function(){return l("rdcol.stateID")},t.getButtonColumnStateId=function(){return l("btncol.stateID")},t.getColumnFadeinStateId=function(){return l("col.fadein_stateID")},t.getBranchGraphColumnStateId=function(){return l("branch_graph_col.stateID")},t.getTreeColumnStateId=function(){return l("tree_col.stateID")},t.getSmallDialogInputEditorStateId=function(){return l("small_dialog_input_editor.stateID")},t.getInlineInputEditorStateId=function(){return l("inline_input_editor.stateID")},t.getInlineMenuEditorStateId=function(){return l("inline_menu_editor.stateID")},t.getCheckHeaderStateId=function(){return l("check_header.stateID")}}).call(this,o("../node_modules/webpack/buildin/global.js"))},"./internal/utils.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.emptyFn=t.style=t.event=t.str=t.obj=t.browser=t.cellInRange=t.cellEquals=t.array=t.then=t.getIgnoreCase=t.getOrApply=t.applyChainSafe=t.getChainSafe=t.isDescendantElement=t.isNode=t.isPromise=t.extend=t.defaults=t.omit=t.each=void 0;var r,i,l=void 0===n||void 0===n.window;t.isNode=l;var a={get find(){return r||(r=Array.prototype.find?function(e,t){return Array.prototype.find.call(e,t)}:function(e,t){var n=a.findIndex(e,t);return n>=0?e[n]:void 0})},get findIndex(){return i||(i=Array.prototype.findIndex?function(e,t){return Array.prototype.findIndex.call(e,t)}:function(e,t){for(var n=e.length,o=0;o<n;o++)if(t(e[o],o,e))return o;return-1})}};t.array=a;var s=function(){if(l)return{IE:!1,Edge:!1,Chrome:!1,Firefox:!1,Safari:!1};var e=n.navigator.userAgent.toLowerCase();return{IE:!!/(msie|trident)/.exec(e),Edge:e.indexOf("edge")>-1,Chrome:e.indexOf("chrome")>-1&&-1===e.indexOf("edge"),Firefox:e.indexOf("firefox")>-1,Safari:e.indexOf("safari")>-1&&-1===e.indexOf("edge")}}(),u=s.IE,c=s.Chrome,d=s.Firefox,f=s.Edge,h=s.Safari;function v(e,t){for(var n=e,o=0;o<(arguments.length<=2?0:arguments.length-2)&&null!=n;o++)n=t(n,o+2<2||arguments.length<=o+2?void 0:arguments[o+2]);return n}function g(e){return Boolean(e&&"function"==typeof e.then)}t.each=function(e,t){for(var n in e)t(e[n],n,e)},t.omit=function(e,t){var n={},o=function(o){if(t.indexOf(o)>=0)return"continue";Object.defineProperty(n,o,{get:function(){return e[o]},set:function(t){e[o]=t},configurable:!0,enumerable:!0})};for(var r in e)o(r);return n},t.defaults=function(e,t){var n=[],o={},r=function(r){n.push(r),Object.defineProperty(o,r,{get:function(){var n=e[r];return void 0===n?t[r]:n},set:function(t){e[r]=t},configurable:!0,enumerable:!0})};for(var i in e)r(i);var l=function(r){if(n.indexOf(r)>=0)return"continue";Object.defineProperty(o,r,{get:function(){var n=e[r];return void 0===n?t[r]:n},set:function(t){e[r]=t},configurable:!0,enumerable:!0})};for(var a in t)l(a);return o},t.extend=function(){for(var e={},t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach((function(t){var n=function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0,enumerable:!0})};for(var o in t)n(o)})),e},t.isDescendantElement=function(e,t){for(;t.parentElement;){var n=t.parentElement;if(e===n)return!0;t=n}return!1},t.applyChainSafe=v,t.getChainSafe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return v.apply(void 0,[e,function(e,t){return e[t]}].concat(n))},t.getOrApply=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e.apply(void 0,n)}return e},t.isPromise=g,t.then=function(e,t){return g(e)?e.then((function(e){return t(e)})):t(e)},t.getIgnoreCase=function(e,t){if(e[t])return e[t];var n=t.toLowerCase();if(e[n])return e[n];var o=t.toLowerCase();if(e[o])return e[o];for(var r in e)if(r.toLowerCase()===n)return e[r]},t.cellEquals=function(e,t){return e.col===t.col&&e.row===t.row},t.cellInRange=function(e,t,n){return e.start.col<=t&&t<=e.end.col&&e.start.row<=n&&n<=e.end.row},t.browser={IE:u,Edge:f,Chrome:c,Firefox:d,Safari:h,heightLimit:c?16777216:d?17895588:10737433},t.obj={setReadonly:function(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:n})},isObject:function(e){return e===Object(e)}},t.str={endsWith:function(e,t,n){var o=e.toString();("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>o.length)&&(n=o.length),n-=t.length;var r=o.lastIndexOf(t,n);return-1!==r&&r===n},genChars:function(e){var t=/([\uD800-\uDBFF][\uDC00-\uDFFF]|\r\n|[^\uD800-\uDFFF])([\u180B-\u180D]|[\uFE00-\uFE0F]|\uDB40[\uDD00-\uDDEF])?/g;return{next:function(){var n=t.exec(e);return null!==n?n[0]:null}}},genWords:function(e){var t=/[!-~]+|[^!-~\s]+|\s+/g;return{next:function(){var n=t.exec(e);return null!==n?n[0]:null}}}},t.event={getMouseButtons:function(e){return null!=e.buttons?e.buttons:null!=e.which?3===e.which||2===e.which?4:e.which:0===e.button||1===e.button?1:2===e.button?2:0},getKeyCode:function(e){return e.keyCode||e.which},isTouchEvent:function(e){return!!e.changedTouches},cancel:function(e){e.preventDefault(),e.stopPropagation()}},t.style={toBoxArray:function(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],e[1]]:2===e.length?[e[0],e[1],e[0],e[1]]:1===e.length?[e[0],e[0],e[0],e[0]]:e:[e,e,e,e]}},t.emptyFn=Function.prototype},"./list-grid/LG_EVENT_TYPE.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LG_EVENT_TYPE=void 0;var o=n("./core/DG_EVENT_TYPE.js"),r=n("./internal/utils.js");t.LG_EVENT_TYPE=(0,r.extend)(o.DG_EVENT_TYPE,{BEFORE_CHANGE_VALUE:"before_change_value",CHANGED_VALUE:"changed_value",CHANGED_HEADER_VALUE:"changed_header_value",REJECTED_PASTE_VALUES:"rejected_paste_values"})},"./list-grid/layout-map/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MultiLayoutMap=t.SimpleHeaderLayoutMap=void 0;var o=n("./list-grid/layout-map/internal/simple-header-layout.js");Object.defineProperty(t,"SimpleHeaderLayoutMap",{enumerable:!0,get:function(){return o.SimpleHeaderLayoutMap}});var r=n("./list-grid/layout-map/internal/multi-layout.js");Object.defineProperty(t,"MultiLayoutMap",{enumerable:!0,get:function(){return r.MultiLayoutMap}})},"./list-grid/layout-map/internal/multi-layout.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiLayoutMap=void 0;var l=i(n("./columns.js")),a=i(n("./header/action.js")),s=i(n("./header/type.js")),u=n("./list-grid/layout-map/internal/utils.js"),c=0,d=function(){function e(t,n){var o=this;y(this,e),this.objects=[],this.objectGrid=[],this.objectMap={},this.columnCount=0,this.columnWidths=[],t.forEach((function(e,t){var r=0;e.forEach((function(e){var i,l,a=c++,s=n(e,a);o.objects.push(s),o.objectMap[a]=s,r=o._findStartCell(r,t);for(var u=Number(null!==(i=e.rowSpan)&&void 0!==i?i:1),d=Number(null!==(l=e.colSpan)&&void 0!==l?l:1),f=t+u,h=r+d,v=t;v<f;v++)for(var g=o._getObjectGridRow(v),y=r;y<h;y++)g[y]=s;1===d&&o._setWidthDataIfAbsent(r,e),o._useColumnIndex(h-1),r=h}))}))}return m(e,[{key:"rowCount",get:function(){return this.objectGrid.length}},{key:"_findStartCell",value:function(e,t){for(var n=this._getObjectGridRow(t),o=e;o<n.length;o++)if(!n[o])return o;return n.length}},{key:"_getObjectGridRow",value:function(e){return this.objectGrid[e]||(this.objectGrid[e]=[])}},{key:"_useColumnIndex",value:function(e){this.columnCount>e||(this.columnCount=e+1)}},{key:"_setWidthDataIfAbsent",value:function(e,t){this.columnWidths[e]||null==t.width&&null==t.maxWidth&&null==t.minWidth||(this.columnWidths[e]={width:t.width,maxWidth:t.maxWidth,minWidth:t.minWidth})}}]),e}(),f=function(){function e(t){y(this,e),this._columnWidths=[],this._emptyDataCache=new u.EmptyDataCache;for(var n=function(e){return Array.isArray(e)?{header:e,body:e}:e}(t),o=this._header=new d(n.header,(function(e,t){return{id:t,caption:e.caption,field:e.headerField||e.field,headerIcon:e.headerIcon,style:e.headerStyle,headerType:s.ofCell(e),action:a.ofCell(e),define:e}})),r=this._body=new d(n.body,(function(e,t){return{id:t,field:e.field,width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,icon:e.icon,message:e.message,columnType:l.type.of(e.columnType),action:l.action.of(e.action),style:e.style,define:e}})),i=this._columnCount=Math.max(o.columnCount,r.columnCount),c=0;c<i;c++){var f=o.columnWidths[c]||r.columnWidths[c]||{};this._columnWidths[c]=f}}return m(e,[{key:"columnWidths",get:function(){return this._columnWidths}},{key:"headerRowCount",get:function(){return this._header.rowCount}},{key:"bodyRowCount",get:function(){return this._body.rowCount}},{key:"colCount",get:function(){return this._columnCount}},{key:"headerObjects",get:function(){return this._header.objects}},{key:"columnObjects",get:function(){return this._body.objects}},{key:"getCellId",value:function(e,t){var n,o,r,i;if(this.headerRowCount<=t){var l=(t-this.headerRowCount)%this.bodyRowCount;return null===(o=null===(n=this._body.objectGrid[l])||void 0===n?void 0:n[e])||void 0===o?void 0:o.id}return null===(i=null===(r=this._header.objectGrid[t])||void 0===r?void 0:r[e])||void 0===i?void 0:i.id}},{key:"getHeader",value:function(e,t){var n=this.getCellId(e,t);return this._header.objectMap[n]||this._emptyDataCache.getHeader(e,t)}},{key:"getBody",value:function(e,t){var n=this.getCellId(e,t);return this._body.objectMap[n]||this._emptyDataCache.getBody(e,t)}},{key:"getBodyLayoutRangeById",value:function(e){for(var t,n=0;n<this.bodyRowCount;n++){var o=this._body.objectGrid[n];if(o)for(var r=0;r<this.colCount;r++)if(e===(null===(t=o[r])||void 0===t?void 0:t.id))return this._getCellRange(this._body,r,n,0)}throw new Error("can not found body layout @id=".concat(e))}},{key:"getCellRange",value:function(e,t){if(this.headerRowCount<=t){var n=this.getRecordIndexByRow(t),o=this.getRecordStartRowByRecordIndex(n),r=(t-this.headerRowCount)%this.bodyRowCount;return this._getCellRange(this._body,e,r,o)}return this._getCellRange(this._header,e,t,0)}},{key:"getRecordIndexByRow",value:function(e){if(e<this.headerRowCount)return-1;var t=e-this.headerRowCount;return Math.floor(t/this.bodyRowCount)}},{key:"getRecordStartRowByRecordIndex",value:function(e){return this.headerRowCount+e*this.bodyRowCount}},{key:"_getCellRange",value:function(e,t,n,o){var r,i,l,a,s,u,c,d,f,h,v={start:{col:t,row:n+o},end:{col:t,row:n+o}},g=e.objectGrid,y=null===(i=null===(r=g[n])||void 0===r?void 0:r[t])||void 0===i?void 0:i.id;if(null==y)return v;for(var p=t-1;p>=0&&y===(null===(a=null===(l=g[n])||void 0===l?void 0:l[p])||void 0===a?void 0:a.id);p--)v.start.col=p;for(var m=t+1;m<e.columnCount&&y===(null===(u=null===(s=g[n])||void 0===s?void 0:s[m])||void 0===u?void 0:u.id);m++)v.end.col=m;for(var _=n-1;_>=0&&y===(null===(d=null===(c=g[_])||void 0===c?void 0:c[t])||void 0===d?void 0:d.id);_--)v.start.row=_+o;for(var C=n+1;C<e.rowCount&&y===(null===(h=null===(f=g[C])||void 0===f?void 0:f[t])||void 0===h?void 0:h.id);C++)v.end.row=C+o;return v}}]),e}();t.MultiLayoutMap=f},"./list-grid/layout-map/internal/simple-header-layout.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleHeaderLayoutMap=void 0;var l=i(n("./columns.js")),a=i(n("./header/action.js")),s=i(n("./header/type.js")),u=n("./list-grid/layout-map/internal/utils.js"),c=0,d=function(){function e(t){y(this,e),this.bodyRowCount=1,this._emptyDataCache=new u.EmptyDataCache,this._columns=[],this._headerCellIds=[],this._headerObjects=this._addHeaders(0,t,[]),this._headerObjectMap=this._headerObjects.reduce((function(e,t){return e[t.id]=t,e}),{})}return m(e,[{key:"columnWidths",get:function(){return this._columns}},{key:"headerRowCount",get:function(){return this._headerCellIds.length}},{key:"colCount",get:function(){return this._columns.length}},{key:"headerObjects",get:function(){return this._headerObjects}},{key:"columnObjects",get:function(){return this._columns}},{key:"getCellId",value:function(e,t){return this.headerRowCount<=t?this._columns[e].id:this._headerCellIds[t][e]}},{key:"getHeader",value:function(e,t){var n=this.getCellId(e,t);return this._headerObjectMap[n]||this._emptyDataCache.getHeader(e,t)}},{key:"getBody",value:function(e,t){return this._columns[e]||this._emptyDataCache.getBody(e,0)}},{key:"getBodyLayoutRangeById",value:function(e){for(var t=0;t<this.colCount;t++)if(e===this._columns[t].id)return{start:{col:t,row:0},end:{col:t,row:0}};throw new Error("can not found body layout @id=".concat(e))}},{key:"getCellRange",value:function(e,t){var n={start:{col:e,row:t},end:{col:e,row:t}};if(this.headerRowCount<=t)return n;for(var o=this.getCellId(e,t),r=e-1;r>=0&&o===this.getCellId(r,t);r--)n.start.col=r;for(var i=e+1;i<this.colCount&&o===this.getCellId(i,t);i++)n.end.col=i;for(var l=t-1;l>=0&&o===this.getCellId(e,l);l--)n.start.row=l;for(var a=t+1;a<this.headerRowCount&&o===this.getCellId(e,a);a++)n.end.row=a;return n}},{key:"getRecordIndexByRow",value:function(e){return e<this.headerRowCount?-1:e-this.headerRowCount}},{key:"getRecordStartRowByRecordIndex",value:function(e){return this.headerRowCount+e}},{key:"_addHeaders",value:function(e,t,n){var o=this,r=[],i=this._headerCellIds[e]||this._newRow(e);return t.forEach((function(t){var u=o._columns.length,d=c++,f={id:d,caption:t.caption,field:t.headerField||t.field,headerIcon:t.headerIcon,style:t.headerStyle,headerType:s.ofCell(t),action:a.ofCell(t),define:t};r[d]=f,i[u]=d;for(var h=e-1;h>=0;h--)o._headerCellIds[h][u]=n[h];if(t.columns)o._addHeaders(e+1,t.columns,[].concat(_(n),[d])).forEach((function(e){return r.push(e)}));else{var v=t;o._columns.push({id:c++,field:v.field,width:v.width,minWidth:v.minWidth,maxWidth:v.maxWidth,icon:v.icon,message:v.message,columnType:l.type.of(v.columnType),action:l.action.of(v.action),style:v.style,define:v});for(var g=e+1;g<o._headerCellIds.length;g++)o._headerCellIds[g][u]=d}})),r}},{key:"_newRow",value:function(e){var t=this._headerCellIds[e]=[];if(!this._columns.length)return t;for(var n=this._headerCellIds[e-1],o=0;o<n.length;o++)t[o]=n[o];return t}}]),e}();t.SimpleHeaderLayoutMap=d},"./list-grid/layout-map/internal/utils.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyDataCache=t.newEmptyColumnData=t.newEmptyHeaderData=void 0;var l=i(n("./columns.js")),a=i(n("./header/type.js")),s=-1;function u(){return{id:s--,define:{},headerType:a.of(null)}}function c(){return{id:s--,define:{},columnType:l.type.of(null),style:null}}t.newEmptyHeaderData=u,t.newEmptyColumnData=c;var d=function(){function e(){y(this,e),this.headers=[],this.columns=[]}return m(e,[{key:"getHeader",value:function(e,t){var n=this.headers[t]||(this.headers[t]=[]);return n[e]||(n[e]=u())}},{key:"getBody",value:function(e,t){var n=this.columns[t]||(this.columns[t]=[]);return n[e]||(n[e]=c())}}]),e}();t.EmptyDataCache=d},"./main.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.getIcons=t.GridCanvasHelper=t.data=t.themes=t.headers=t.columns=t.ListGrid=t.tools=t.core=t._getInternal=void 0;var l=i(n("./columns.js"));t.columns=l;var a=i(n("./core.js"));t.core=a;var s=i(n("./data.js"));t.data=s;var u=i(n("./headers.js"));t.headers=u;var c=i(n("./icons.js")),d=i(n("./register.js"));t.register=d;var f=i(n("./themes.js"));t.themes=f;var h=i(n("./tools.js"));t.tools=h;var v=n("./ListGrid.js");Object.defineProperty(t,"ListGrid",{enumerable:!0,get:function(){return v.ListGrid}});var g=n("./GridCanvasHelper.js");Object.defineProperty(t,"GridCanvasHelper",{enumerable:!0,get:function(){return g.GridCanvasHelper}});var y=n("./get-internal.js");function p(){return c.get()}Object.defineProperty(t,"_getInternal",{enumerable:!0,get:function(){return y.getInternal}}),t.getIcons=p,t.default={core:a,tools:h,ListGrid:v.ListGrid,columns:l,headers:u,themes:f,data:s,GridCanvasHelper:g.GridCanvasHelper,register:d,get icons(){return p()}},Object.defineProperty(f,"default",{enumerable:!1,configurable:!0,get:function(){return f.getDefault()},set:function(e){f.setDefault(e)}}),Object.defineProperty(f,"choices",{enumerable:!1,configurable:!0,get:function(){return f.getChoices()}})},"./plugins/icons.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.icons=void 0,t.icons={}},"./plugins/themes.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.themes=void 0,t.themes={}},"./register.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.icons=t.icon=t.theme=void 0;var o=n("./plugins/icons.js"),r=n("./plugins/themes.js");function i(e,t,n){var o=e[t];return e[t]=n,o}t.theme=function(e,t){return null!=t?i(r.themes,e,t):r.themes[e]},t.icon=function(e,t){return null!=t?i(o.icons,e,t):o.icons[e]},t.icons=function(e){return function(e,t){for(var n in t)e[n]=t[n]}(o.icons,e)}},"./themes.js":function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getChoices=t.setDefault=t.getDefault=t.of=t.theme=t.MATERIAL_DESIGN=t.BASIC=void 0;var r=n("./internal/utils.js"),i=n("./themes/theme.js"),l=o(n("./themes/BASIC.js")),a=o(n("./themes/MATERIAL_DESIGN.js")),s=n("./plugins/themes.js");t.BASIC=new i.Theme(l.default),t.MATERIAL_DESIGN=new i.Theme(a.default);var u={BASIC:t.BASIC,MATERIAL_DESIGN:t.MATERIAL_DESIGN},c=t.MATERIAL_DESIGN;function d(e){return e?"string"==typeof e?(0,r.getIgnoreCase)(f(),e)||null:e instanceof i.Theme?e:new i.Theme(e):null}function f(){return(0,r.extend)(u,s.themes)}t.theme={Theme:i.Theme},t.of=d,t.getDefault=function(){return c},t.setDefault=function(e){c=d(e)||c},t.getChoices=f},"./themes/BASIC.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o={};t.default={color:"#000",defaultBgColor:function(e){var t=e.row,n=e.grid;return t<n.frozenRowCount?"#FFF":1&n.getRecordIndexByRow(t)?"#F6F6F6":"#FFF"},frozenRowsBgColor:function(e){var t=e.col,n=e.grid,r=e.grid.frozenRowCount,i=e.context,l=n.getCellRelativeRect(t,0),a=l.left;return function(e,t,n,r,i,l){var a,s=[];for(a in l)s.push("".concat(a,"@").concat(l[a]));var u="".concat(t,"/").concat(n,"/").concat(r,"/").concat(i,"/").concat(s.join(",")),c=o[u];if(c)return c;var d=e.createLinearGradient(t,n,t,i);for(a in l)d.addColorStop(Number(a),l[a]);return o[u]=d}(i,a,l.top,a,n.getCellRelativeRect(t,r-1).bottom,{0:"#FFF",1:"#D3D3D3"})},selectionBgColor:"#CCE0FF",borderColor:"#000",highlightBorderColor:"#5E9ED6",checkbox:{uncheckBgColor:"#FFF",checkBgColor:"rgb(76, 73, 72)",borderColor:"#000"},radioButton:{checkColor:"rgb(76, 73, 72)",checkBorderColor:"#000",uncheckBorderColor:"#000",uncheckBgColor:"#FFF",checkBgColor:"#FFF"},button:{color:"#FFF",bgColor:"#2196F3"},header:{sortArrowColor:"rgba(0, 0, 0, 0.38)"},indicators:{topLeftColor:"#000"},underlayBackgroundColor:"#F6F6F6"}},"./themes/MATERIAL_DESIGN.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={color:"rgba(0, 0, 0, 0.87)",frozenRowsColor:"rgba(0, 0, 0, 0.54)",defaultBgColor:"#FFF",selectionBgColor:"#CCE0FF",borderColor:function(e){var t=e.col,n=e.row,o=e.grid,r=o.colCount,i=o.frozenColCount,l=o.recordRowCount,a="#ccc7c7",s="#ccc7c7";if(l>1){var u=o.getRecordStartRowByRecordIndex(o.getRecordIndexByRow(n));u!==n&&(a=null),u+l-1!==n&&(s=null)}return i-1===t||r-1===t?[a,"#f2f2f2",s,null]:[a,null,s,null]},frozenRowsBorderColor:function(e){var t=e.row;return e.grid.frozenRowCount-1===t?["#f2f2f2","#f2f2f2","#ccc7c7","#f2f2f2"]:["#f2f2f2"]},highlightBorderColor:"#5E9ED6",checkbox:{checkBgColor:"rgb(76, 73, 72)",borderColor:"rgba(0, 0, 0, 0.26)"},radioButton:{checkColor:"rgb(76, 73, 72)",checkBorderColor:"rgb(76, 73, 72)",uncheckBorderColor:"rgb(189, 189, 189)"},button:{color:"#FFF",bgColor:"#2196F3"},header:{sortArrowColor:"rgba(0, 0, 0, 0.38)"},indicators:{topLeftColor:"#ccc7c7"},underlayBackgroundColor:"#FFF"}},"./themes/theme.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=void 0;var o=n("./internal/utils.js"),r=n("./internal/symbolManager.js"),i=n("./columns/type/TreeColumn.js"),l=(0,r.get)();function a(e,t,n,r,i,l){var a=o.getChainSafe.apply(void 0,[e].concat(_(n)))||o.getChainSafe.apply(void 0,[t].concat(_(n)));if(a)return a;if(!r)return a||l;var s=i?function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var l=o.getChainSafe.apply(void 0,[e].concat(n));return l?i(l):l}:o.getChainSafe;return s.apply(void 0,[e].concat(_(r)))||s.apply(void 0,[t].concat(_(r)))||l}var s=function(){function e(t,n){y(this,e),this._checkbox=null,this._radioButton=null,this._button=null,this._tree=null,this._header=null,this._messages=null,this._indicators=null,this[l]={obj:t,superTheme:n}}return m(e,[{key:"font",get:function(){var e=this[l];return a(e.obj,e.superTheme,["font"])}},{key:"underlayBackgroundColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["underlayBackgroundColor"])}},{key:"color",get:function(){var e=this[l];return a(e.obj,e.superTheme,["color"])}},{key:"frozenRowsColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["frozenRowsColor"],["color"])}},{key:"defaultBgColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["defaultBgColor"])}},{key:"frozenRowsBgColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["frozenRowsBgColor"],["defaultBgColor"])}},{key:"selectionBgColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["selectionBgColor"],["defaultBgColor"])}},{key:"highlightBgColor",get:function(){var e=this;if(this.hasProperty(["highlightBgColor"])){var t=this[l];return a(t.obj,t.superTheme,["highlightBgColor"])}return function(t){var n=t.row<t.grid.frozenRowCount?e.frozenRowsBgColor:e.defaultBgColor;return"function"==typeof n?n(t):n}}},{key:"borderColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["borderColor"])}},{key:"frozenRowsBorderColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["frozenRowsBorderColor"],["borderColor"])}},{key:"highlightBorderColor",get:function(){var e=this[l];return a(e.obj,e.superTheme,["highlightBorderColor"],["borderColor"])}},{key:"checkbox",get:function(){var e=this[l],t=e.obj,n=e.superTheme;return this._checkbox||(this._checkbox={get uncheckBgColor(){return o("uncheckBgColor",["defaultBgColor"])},get checkBgColor(){return o("checkBgColor",["borderColor"],c,"#000")},get borderColor(){return o("borderColor",["borderColor"],c,"#000")}});function o(e,o,r,i){return a(t,n,["checkbox",e],o,r,i)}}},{key:"radioButton",get:function(){var e=this[l],t=e.obj,n=e.superTheme;return this._radioButton||(this._radioButton={get checkColor(){return o("checkColor",["color"])},get uncheckBorderColor(){return o("uncheckBorderColor",["borderColor"],c,"#000")},get checkBorderColor(){return o("checkBorderColor",["borderColor"],c,"#000")},get uncheckBgColor(){return o("uncheckBgColor",["defaultBgColor"])},get checkBgColor(){return o("checkBgColor",["defaultBgColor"])}});function o(e,o,r,i){return a(t,n,["radioButton",e],o,r,i)}}},{key:"button",get:function(){var e=this[l],t=e.obj,n=e.superTheme;return this._button||(this._button={get color(){return o("color",["color"])},get bgColor(){return o("bgColor",["defaultBgColor"])}});function o(e,o){return a(t,n,["button",e],o)}}},{key:"tree",get:function(){var e=this[l],t=e.obj,n=e.superTheme;return this._tree||(this._tree={get lineStyle(){return o("lineStyle",void 0,void 0,"solid")},get lineColor(){return o("lineColor",["borderColor"],c,"#0000")},get lineWidth(){return o("lineWidth",void 0,void 0,1)},get treeIcon(){return o("treeIcon",void 0,void 0,(function(e){var t=(0,i.getTreeNodeInfoAt)(e),n=t.hasChildren,o=t.nodeType;return n?"expand_more":"branch"===o?"chevron_right":"none"}))}});function o(e,o,r,i){return a(t,n,["tree",e],o,r,i)}}},{key:"header",get:function(){var e=this[l],t=e.obj,n=e.superTheme;return this._header||(this._header={get sortArrowColor(){return a(t,n,["header","sortArrowColor"],["color"])}})}},{key:"messages",get:function(){var e=this[l],t=e.obj,n=e.superTheme;return this._messages||(this._messages={get infoBgColor(){return o("infoBgColor")},get errorBgColor(){return o("errorBgColor")},get warnBgColor(){return o("warnBgColor")},get boxWidth(){return o("boxWidth")},get markHeight(){return o("markHeight")}});function o(e){return a(t,n,["messages",e])}}},{key:"indicators",get:function(){var e=this[l],t=e.obj,n=e.superTheme;return this._indicators||(this._indicators={get topLeftColor(){return o("topLeftColor",["borderColor"],c,"#000")},get topLeftSize(){return o("topLeftSize")},get topRightColor(){return o("topRightColor",["borderColor"],c,"#000")},get topRightSize(){return o("topRightSize")},get bottomRightColor(){return o("bottomRightColor",["borderColor"],c,"#000")},get bottomRightSize(){return o("bottomRightSize")},get bottomLeftColor(){return o("bottomLeftColor",["borderColor"],c,"#000")},get bottomLeftSize(){return o("bottomLeftSize")}});function o(e,o,r,i){return a(t,n,["indicators",e],o,r,i)}}},{key:"hasProperty",value:function(e){var t=this[l],n=t.obj,o=t.superTheme;return u(n,e)||u(o,e)}},{key:"extends",value:function(t){return new e(t,this)}}]),e}();function u(e,t){if(e instanceof s)return e.hasProperty(t);var n=e;if(!n)return!1;for(var o=0;o<t.length;o++)if(!(n=n[t[o]]))return!1;return!!n}function c(e){return"function"==typeof e?function(n){var o=e(n);return o?t(o):o}:t(e);function t(e){return Array.isArray(e)?e.find(Boolean)||void 0:e}}t.Theme=s},"./tools.js":function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.canvashelper=void 0;var l=i(n("./tools/canvashelper.js"));t.canvashelper=l},"./tools/canvashelper.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.drawButton=t.drawRadioButton=t.drawCheckbox=t.measureRadioButton=t.measureCheckbox=t.drawInlineImageRect=t.fillTextRect=t.strokeCircle=t.fillCircle=t.strokeRoundRect=t.fillRoundRect=t.roundRect=t.strokeColorsRect=void 0;var o=n("./internal/canvases.js"),r=Math.ceil,i=Math.PI;function l(e,t,n,o,r,l){e.beginPath(),e.arc(t+l,n+l,l,-i,-.5*i,!1),e.arc(t+o-l,n+l,l,-.5*i,0,!1),e.arc(t+o-l,n+r-l,l,0,.5*i,!1),e.arc(t+l,n+r-l,l,.5*i,i,!1),e.closePath()}function a(e,t,n,o,r,i){l(e,t,n,o,r,i),e.fill()}function s(e,t,n,o,r,i){l(e,t,n,o,r,i),e.stroke()}function u(e,t,n,o,r){var i=Math.min(o,r)/2;e.beginPath(),e.arc(t+i,n+i,i,0,2*Math.PI),e.closePath(),e.fill()}function c(e,t,n,o,r){var i=Math.min(o,r)/2;e.beginPath(),e.arc(t+i,n+i,i,0,2*Math.PI),e.closePath(),e.stroke()}function d(e){return{width:(0,o.getFontSize)(e,null).width}}function f(e){return{width:(0,o.getFontSize)(e,null).width}}t.strokeColorsRect=function(e,t,n,o,r,i){t[0]===t[1]&&t[0]===t[2]&&t[0]===t[3]?t[0]&&(e.strokeStyle=t[0],e.strokeRect(n,o,r,i)):function(n){for(var o=0;o<t.length;o++){var r=t[o],i=t[o-1];if(r){if(i!==r){i&&(e.strokeStyle=i,e.stroke());var l=n[o];e.beginPath(),e.moveTo(l.x,l.y)}var a=n[o+1];e.lineTo(a.x,a.y)}else i&&(e.strokeStyle=i,e.stroke())}var s=t[t.length-1];s&&(e.strokeStyle=s,e.stroke())}([{x:n,y:o},{x:n+r,y:o},{x:n+r,y:o+i},{x:n,y:o+i},{x:n,y:o}])},t.roundRect=l,t.fillRoundRect=a,t.strokeRoundRect=s,t.fillCircle=u,t.strokeCircle=c,t.fillTextRect=function(e,t,n,r,i,l){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=a.offset,u=void 0===s?2:s,c=a.padding,d={left:n,top:r,width:i,height:l,right:n+i,bottom:r+l};e.save();try{e.beginPath(),e.rect(d.left,d.top,d.width,d.height),e.clip();var f=(0,o.calcBasePosition)(e,d,{offset:u,padding:c});e.fillText(t,f.x,f.y)}finally{e.restore()}},t.drawInlineImageRect=function(e,t,n,r,i,l,a,s,u,c,d,f){var h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{},v=h.offset,g=void 0===v?2:v,y=h.padding,p={left:u,top:c,width:d,height:f,right:u+d,bottom:c+f};e.save();try{e.beginPath(),e.rect(p.left,p.top,p.width,p.height),e.clip();var m=(0,o.calcStartPosition)(e,p,a,s,{offset:g,padding:y});e.drawImage(t,n,r,i,l,m.x,m.y,a,s)}finally{e.restore()}},t.measureCheckbox=d,t.measureRadioButton=f,t.drawCheckbox=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=i.uncheckBgColor,u=void 0===l?"#FFF":l,c=i.checkBgColor,f=void 0===c?"rgb(76, 73, 72)":c,h=i.borderColor,v=void 0===h?"#000":h,g=i.boxSize,y=void 0===g?d(e).width:g,p="number"==typeof o?o>1?1:o:1;e.save();try{e.fillStyle=o?f:u;var m=r(t),_=r(n),C=r(y);if(a(e,m-1,_-1,C+1,C+1,y/5),e.lineWidth=1,e.strokeStyle=v,s(e,m-.5,_-.5,C,C,y/5),o){e.lineWidth=r(y/10),e.strokeStyle=u;var b=y/4,w=y/2*.9,k=t+.2*y,E=n+y/2;p<.5&&(b*=2*p),e.beginPath(),e.moveTo(k,E),e.lineTo(k+b,E+b),p>.5&&(p<1&&(w*=2*(p-.5)),e.lineTo(k+b+w,E+b-w)),e.stroke()}}finally{e.restore()}},t.drawRadioButton=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=i.checkColor,a=void 0===l?"rgb(76, 73, 72)":l,s=i.borderColor,d=void 0===s?"#000":s,h=i.bgColor,v=void 0===h?"#FFF":h,g=i.boxSize,y=void 0===g?f(e).width:g,p="number"==typeof o?o>1?1:o:1;e.save();try{e.fillStyle=v;var m=r(t),_=r(n),C=r(y);if(u(e,m-1,_-1,C+1,C+1),e.lineWidth=1,e.strokeStyle=d,c(e,m-.5,_-.5,C,C),o){var b=C*p/2,w=(C-b)/2;e.fillStyle=a,u(e,r(100*(m-.5+w))/100,r(100*(_-.5+w))/100,r(100*b)/100,r(100*b)/100)}}finally{e.restore()}},t.drawButton=function(e,t,n,o,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=l.backgroundColor,u=void 0===s?"#FFF":s,c=l.bgColor,d=void 0===c?u:c,f=l.radius,h=void 0===f?4:f,v=l.shadow,g=void 0===v?{}:v;e.save();try{if(e.fillStyle=d,g){var y=g.color,p=void 0===y?"rgba(0, 0, 0, 0.24)":y,m=g.blur,_=void 0===m?1:m,C=g.offsetX,b=void 0===C?0:C,w=g.offsetY,k=void 0===w?2:w,E=g.offset,j=(E=void 0===E?{}:E).x,x=void 0===j?b:j,S=E.y,O=void 0===S?k:S;e.shadowColor=p,e.shadowBlur=_,e.shadowOffsetX=x,e.shadowOffsetY=O}a(e,r(t),r(n),r(o),r(i),h)}finally{e.restore()}}},"./tooltip/BaseTooltip.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTooltip=void 0;var o=function(){function e(t){y(this,e),this._grid=t}return m(e,[{key:"dispose",value:function(){this.detachTooltipElement(),this._tooltipElement&&this._tooltipElement.dispose(),this._tooltipElement=void 0}},{key:"_getTooltipElement",value:function(){return this._tooltipElement?this._tooltipElement:this._tooltipElement=this.createTooltipElementInternal()}},{key:"attachTooltipElement",value:function(e,t,n){this._getTooltipElement().attach(this._grid,e,t,n)}},{key:"moveTooltipElement",value:function(e,t){this._getTooltipElement().move(this._grid,e,t)}},{key:"detachTooltipElement",value:function(){this._getTooltipElement()._detach()}}]),e}();t.BaseTooltip=o},"./tooltip/Tooltip.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;var o=n("./tooltip/BaseTooltip.js"),r=n("./tooltip/internal/TooltipElement.js"),i=function(e){d(n,e);var t=h(n);function n(){return y(this,n),t.apply(this,arguments)}return m(n,[{key:"createTooltipElementInternal",value:function(){return new r.TooltipElement}}]),n}(o.BaseTooltip);t.Tooltip=i},"./tooltip/TooltipHandler.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipHandler=void 0;var o=n("./list-grid/LG_EVENT_TYPE.js"),r=n("./tooltip/Tooltip.js"),i=n("./internal/utils.js"),l={"overflow-text":function(e){return new r.Tooltip(e)}},a=function(){function e(t){y(this,e),this._grid=t,this._tooltipInstances={},this._bindGridEvent(t)}return m(e,[{key:"dispose",value:function(){var e=this._tooltipInstances;for(var t in e)e[t].dispose();delete this._tooltipInstances,this._attachInfo=null}},{key:"_attach",value:function(e,t){var n=this._attachInfo,o=this._getTooltipInstanceInfo(e,t);if(!n||o&&n.instance===o.instance||(n.instance.detachTooltipElement(),this._attachInfo=null),o){var r=o.instance;r.attachTooltipElement(e,t,o.content);var i=this._grid.getCellRange(e,t);this._attachInfo={range:i,instance:r}}}},{key:"_move",value:function(e,t){var n=this._attachInfo;n&&(0,i.cellInRange)(n.range,e,t)&&n.instance.moveTooltipElement(e,t)}},{key:"_detach",value:function(){var e=this._attachInfo;e&&(e.instance.detachTooltipElement(),this._attachInfo=null)}},{key:"_isAttachCell",value:function(e,t){var n=this._attachInfo;return!!n&&(0,i.cellInRange)(n.range,e,t)}},{key:"_bindGridEvent",value:function(e){var t=this;e.listen(o.LG_EVENT_TYPE.MOUSEOVER_CELL,(function(e){e.related&&t._isAttachCell(e.col,e.row)||t._attach(e.col,e.row)})),e.listen(o.LG_EVENT_TYPE.MOUSEOUT_CELL,(function(e){e.related&&t._isAttachCell(e.related.col,e.related.row)||t._detach()})),e.listen(o.LG_EVENT_TYPE.SELECTED_CELL,(function(e){t._isAttachCell(e.col,e.row)&&t._detach()})),e.listen(o.LG_EVENT_TYPE.SCROLL,(function(){var e=t._attachInfo;e&&t._move(e.range.start.col,e.range.start.row)})),e.listen(o.LG_EVENT_TYPE.CHANGED_VALUE,(function(e){t._isAttachCell(e.col,e.row)&&(t._detach(),t._attach(e.col,e.row))}))}},{key:"_getTooltipInstanceInfo",value:function(e,t){var n=this._grid,o=this._tooltipInstances,r=function(e,t,n){var o=e.getCellOverflowText(t,n);return o?{type:"overflow-text",content:o}:null}(n,e,t);if(!r)return null;var i=r.type;return{instance:o[i]||(o[i]=l[i](n)),type:i,content:r.content}}}]),e}();t.TooltipHandler=a},"./tooltip/internal/TooltipElement.js":function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipElement=void 0;var r=o("./internal/EventHandler.js"),i=o("./internal/dom.js"),l="cheetah-grid__tooltip-element",a="".concat(l,"__content"),s="".concat(l,"--hidden"),u="".concat(l,"--shown"),c=function(){function e(){y(this,e),this._handler=new r.EventHandler;var t=this._rootElement=function(){o("../src/js/tooltip/internal/TooltipElement.css");var e=(0,i.createElement)("div",{classList:[l,s]}),t=(0,i.createElement)("pre",{classList:[a]});return e.appendChild(t),e}();this._messageElement=t.querySelector(".".concat(a))}return m(e,[{key:"dispose",value:function(){this.detach();var e=this._rootElement;e.parentElement&&e.parentElement.removeChild(e),this._handler.dispose(),delete this._rootElement,delete this._messageElement}},{key:"attach",value:function(e,t,n,o){var r=this._rootElement,i=this._messageElement;r.classList.remove(u),r.classList.add(s),this._attachCell(e,t,n)?(r.classList.add(u),r.classList.remove(s),i.textContent=o):this._detach()}},{key:"move",value:function(e,t,n){var o=this._rootElement;this._attachCell(e,t,n)?(o.classList.add(u),o.classList.remove(s)):this._detach()}},{key:"detach",value:function(){this._detach()}},{key:"_detach",value:function(){var e=this._rootElement;e.parentElement&&(e.classList.remove(u),e.classList.add(s))}},{key:"_attachCell",value:function(e,t,o){var r=this._rootElement,i=e.getAttachCellsArea(e.getCellRange(t,o)),l=i.element,a=i.rect,s=a.bottom,u=a.left,c=a.width,d=e.frozenRowCount,f=e.frozenColCount;if(o>=d&&d>0){if(s<e.getAttachCellsArea(e.getCellRange(t,d-1)).rect.bottom)return!1}else if(s<0)return!1;if(t>=f&&f>0){if(u<e.getAttachCellsArea(e.getCellRange(f-1,o)).rect.right)return!1}else if(u<0)return!1;var h=l.getBoundingClientRect(),v=h.height,g=h.width,y=h.left,p=h.right;if(v<s)return!1;if(g<u)return!1;var m=u+c/2;r.style.top="".concat(s.toFixed(),"px"),r.style.left="".concat(m.toFixed(),"px"),r.style.minWidth="".concat(c.toFixed(),"px");var _=2*(y+m),C=2*(g-m+(n.innerWidth-p)),b=Math.min(_,C);return r.style.maxWidth="".concat(b.toFixed(),"px"),r.parentElement!==l&&l.appendChild(r),!0}}]),e}();t.TooltipElement=c}})},"object"===b(t)&&"object"===b(e)?e.exports=l():(r=[],void 0===(i="function"==typeof(o=l)?o.apply(t,r):o)||(e.exports=i))}).call(void 0!==n.g?n.g:window,void 0!==n.g?n.g:window)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o](i,i.exports,n),i.loaded=!0,i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";HTMLWidgets;var e=n(190);HTMLWidgets.widget({name:"cheetah",type:"output",factory:function(t,n,o){return t.id,{renderValue:function(n,o=t.id){let r;const i=Object.keys(n.data[0]).map((e=>({field:e,caption:e,width:"auto"})));if(null!==n.columns){const e=Object.fromEntries(n.columns.map((e=>[e.field,e])));r=i.map((t=>({...t,...e[t.field]||{}})))}else r=i;const l=new e.ListGrid({parentElement:document.getElementById(o),header:r,records:n.data}),{CLICK_CELL:a,CHANGED_VALUE:s}=e.ListGrid.EVENT_TYPE;l.listen(a,((...e)=>{Shiny.setInputValue(`${o}_click_cell`,e)})),l.listen(s,((...e)=>{Shiny.setInputValue(`${o}_changed_value`,e)}))},resize:function(e,t){}}}})})()})();